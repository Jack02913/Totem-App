<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Totem â€” Plan Screen Mockup</title>
<style>
  /* â”€â”€â”€ Design Tokens â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  :root {
    --bg:           #0B0F1E;
    --card:         #141929;
    --card-2:       #1A2036;
    --border:       rgba(255,255,255,0.07);
    --brand:        #7C6EFA;
    --brand-light:  rgba(124,110,250,0.12);
    --teal:         #4ECDC4;
    --teal-light:   rgba(78,205,196,0.12);
    --amber:        #F7C84B;
    --amber-light:  rgba(247,200,75,0.12);
    --red:          #FF6B6B;
    --red-light:    rgba(255,107,107,0.12);
    --green:        #51CF66;
    --green-light:  rgba(81,207,102,0.12);
    --text:         #F0F4FF;
    --text-2:       #8B95B0;
    --text-3:       #3E4660;
    font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', system-ui, sans-serif;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: #060914;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 40px 20px 60px;
  }

  /* â”€â”€â”€ Page header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .page-title {
    color: var(--text);
    font-size: 28px;
    font-weight: 800;
    letter-spacing: -1px;
    margin-bottom: 6px;
    text-align: center;
  }
  .page-subtitle {
    color: var(--text-2);
    font-size: 14px;
    text-align: center;
    margin-bottom: 32px;
  }

  /* â”€â”€â”€ Legend â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .legend {
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
    justify-content: center;
    margin-bottom: 36px;
  }
  .legend-item {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 12px;
    color: var(--text-2);
  }
  .legend-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
  }

  /* â”€â”€â”€ Phone Frame â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .phone-outer {
    width: 390px;
    background: #1a1a2e;
    border-radius: 54px;
    padding: 14px;
    box-shadow:
      0 0 0 1px rgba(255,255,255,0.08),
      0 40px 100px rgba(0,0,0,0.8),
      inset 0 0 0 1px rgba(255,255,255,0.04);
    position: relative;
  }
  .phone-screen {
    background: var(--bg);
    border-radius: 44px;
    overflow: hidden;
    height: 844px;
    display: flex;
    flex-direction: column;
    position: relative;
  }

  /* â”€â”€â”€ Dynamic Island â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .dynamic-island {
    width: 120px;
    height: 34px;
    background: #000;
    border-radius: 20px;
    position: absolute;
    top: 12px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 10;
  }

  /* â”€â”€â”€ Screen Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .screen-header {
    padding: 62px 20px 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-shrink: 0;
  }
  .screen-title {
    font-size: 22px;
    font-weight: 800;
    letter-spacing: -0.5px;
    color: var(--text);
  }
  .header-action {
    font-size: 14px;
    font-weight: 600;
    color: var(--brand);
    cursor: pointer;
  }

  /* â”€â”€â”€ Sub-Tab Bar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .subtab-bar {
    display: flex;
    padding: 12px 20px 0;
    border-bottom: 1px solid var(--border);
    flex-shrink: 0;
    margin-top: 8px;
  }
  .subtab {
    padding: 0 0 10px;
    margin-right: 24px;
    font-size: 14px;
    font-weight: 500;
    color: var(--text-2);
    cursor: pointer;
    position: relative;
    transition: color 0.2s;
    white-space: nowrap;
  }
  .subtab.active {
    font-weight: 700;
    color: var(--text);
  }
  .subtab.active::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 2px;
    background: var(--brand);
    border-radius: 2px 2px 0 0;
  }

  /* â”€â”€â”€ Scroll Area â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .tab-content {
    flex: 1;
    overflow-y: auto;
    padding: 16px 20px 96px;
    scroll-behavior: smooth;
  }
  .tab-content::-webkit-scrollbar { display: none; }
  .tab-pane { display: none; }
  .tab-pane.active { display: block; }

  /* â”€â”€â”€ Section Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 14px 0 8px;
  }
  .section-label {
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.8px;
    color: var(--text-2);
  }
  .section-link {
    font-size: 11px;
    font-weight: 600;
    color: var(--brand);
    cursor: pointer;
  }

  /* â”€â”€â”€ Milestone Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .milestone-card {
    background: var(--card);
    border: 1px solid rgba(124,110,250,0.2);
    border-radius: 16px;
    padding: 16px;
    margin-bottom: 12px;
  }
  .milestone-top {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 10px;
  }
  .milestone-icon {
    width: 36px;
    height: 36px;
    border-radius: 10px;
    background: var(--brand-light);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 17px;
    flex-shrink: 0;
  }
  .milestone-text-block {}
  .ai-tag {
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--brand);
  }
  .milestone-title {
    font-size: 14px;
    font-weight: 700;
    color: var(--text);
    margin-top: 1px;
  }
  .milestone-bar-track {
    height: 8px;
    background: rgba(255,255,255,0.08);
    border-radius: 4px;
    overflow: hidden;
    margin: 10px 0 6px;
  }
  .milestone-bar-fill {
    height: 100%;
    width: 73%;
    background: linear-gradient(90deg, var(--brand), #9C8FFF);
    border-radius: 4px;
    animation: fillBar 1s ease-out forwards;
  }
  .milestone-labels {
    display: flex;
    justify-content: space-between;
    margin-bottom: 8px;
  }
  .milestone-label-left { font-size: 12px; color: var(--text-2); }
  .milestone-label-right { font-size: 12px; font-weight: 600; color: var(--brand); }
  .milestone-sub {
    font-size: 12px;
    color: var(--text-2);
    line-height: 1.5;
  }
  .milestone-cta {
    font-size: 13px;
    font-weight: 600;
    color: var(--brand);
    margin-top: 10px;
    display: block;
    cursor: pointer;
  }

  /* â”€â”€â”€ AI Suggestion Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .ai-suggestion-card {
    background: var(--card);
    border: 1px solid rgba(124,110,250,0.25);
    border-radius: 16px;
    padding: 16px;
    margin-bottom: 12px;
    display: none; /* hidden by default â€” shown in "AI Active" state */
  }
  .suggestion-top {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    margin-bottom: 10px;
  }
  .suggestion-icon {
    width: 36px;
    height: 36px;
    border-radius: 10px;
    background: var(--brand-light);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 17px;
    flex-shrink: 0;
  }
  .suggestion-type { font-size: 12px; color: var(--text-2); margin-top: 1px; }
  .suggestion-insight {
    font-size: 14px;
    font-weight: 600;
    color: var(--text);
    line-height: 1.5;
    margin-bottom: 4px;
  }
  .suggestion-preview {
    font-size: 12px;
    color: var(--text-2);
    line-height: 1.5;
    background: rgba(255,255,255,0.04);
    border-radius: 8px;
    padding: 8px 10px;
    margin-bottom: 12px;
  }
  .suggestion-actions {
    display: flex;
    gap: 8px;
  }
  .btn-primary {
    background: var(--brand);
    color: #fff;
    border: none;
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    font-family: inherit;
  }
  .btn-ghost {
    background: transparent;
    color: var(--text-2);
    border: 1px solid var(--border);
    padding: 8px 12px;
    border-radius: 20px;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    font-family: inherit;
  }

  /* â”€â”€â”€ Goal Card Base â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .goal-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 16px;
    margin-bottom: 10px;
    overflow: hidden;
    position: relative;
  }
  .goal-card::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 3px;
    border-radius: 16px 0 0 16px;
  }
  .goal-card.save-up::before    { background: var(--brand); }
  .goal-card.spending::before   { background: var(--teal); }
  .goal-card.debt::before       { background: var(--green); }

  /* Goal header */
  .goal-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 12px;
  }
  .goal-header-left {
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .goal-icon {
    width: 34px;
    height: 34px;
    border-radius: 9px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    flex-shrink: 0;
  }
  .save-up .goal-icon    { background: var(--brand-light); }
  .spending .goal-icon   { background: var(--teal-light); }
  .debt .goal-icon       { background: var(--green-light); }

  .goal-name {
    font-size: 15px;
    font-weight: 700;
    color: var(--text);
    line-height: 1.2;
  }
  .goal-type-label {
    font-size: 11px;
    color: var(--text-2);
    margin-top: 1px;
  }

  /* Amounts row */
  .goal-amounts {
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    margin-bottom: 6px;
  }
  .goal-amount-main {
    font-size: 22px;
    font-weight: 800;
    letter-spacing: -0.8px;
    color: var(--text);
  }
  .goal-amount-main .unit {
    font-size: 13px;
    font-weight: 500;
    color: var(--text-2);
    letter-spacing: 0;
  }
  .goal-pct {
    font-size: 16px;
    font-weight: 700;
    color: var(--brand);
  }
  .spending .goal-pct { color: var(--teal); }
  .debt .goal-pct     { color: var(--green); }

  /* Progress bar */
  .progress-track {
    height: 6px;
    background: rgba(255,255,255,0.08);
    border-radius: 4px;
    overflow: visible;
    position: relative;
    margin-bottom: 4px;
  }
  .progress-fill {
    height: 100%;
    border-radius: 4px;
    animation: fillBar 0.8s ease-out forwards;
    transform-origin: left;
  }
  .fill-brand  { background: linear-gradient(90deg, var(--brand), #9C8FFF); }
  .fill-teal   { background: linear-gradient(90deg, var(--teal), #6EDCD5); }
  .fill-green  { background: linear-gradient(90deg, var(--green), #7CE88C); }
  .fill-amber  { background: var(--amber); }
  .fill-red    { background: var(--red); }

  /* Period marker */
  .period-marker {
    position: absolute;
    top: -3px;
    width: 2px;
    height: 12px;
    background: rgba(255,255,255,0.35);
    border-radius: 1px;
    z-index: 2;
  }

  /* Goal footer */
  .goal-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 10px;
  }
  .goal-footer-left { font-size: 11px; color: var(--text-2); line-height: 1.5; }
  .goal-footer-label { font-size: 11px; color: var(--text-2); }
  .goal-footer-val   { font-size: 12px; font-weight: 600; color: var(--text); }

  /* Bar bottom labels */
  .bar-labels {
    display: flex;
    justify-content: space-between;
    margin-top: 4px;
  }
  .bar-label-left  { font-size: 11px; color: var(--text-2); }
  .bar-label-right { font-size: 11px; font-weight: 600; }
  .text-green { color: var(--green); }
  .text-amber { color: var(--amber); }
  .text-red   { color: var(--red); }

  /* â”€â”€â”€ Streak Row â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .streak-row {
    display: flex;
    align-items: center;
    gap: 6px;
    margin-top: 10px;
    padding-top: 10px;
    border-top: 1px solid var(--border);
  }
  .streak-text {
    font-size: 12px;
    font-weight: 600;
  }
  .streak-3 { color: var(--amber); }
  .streak-best {
    font-size: 11px;
    color: var(--text-3);
    margin-left: auto;
  }

  /* â”€â”€â”€ Pill / Chips â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .pill {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background: rgba(255,255,255,0.04);
    border-radius: 20px;
    padding: 4px 10px;
    font-size: 11px;
    color: var(--text-2);
    margin-top: 8px;
  }
  .pill-teal {
    background: rgba(78,205,196,0.08);
    color: var(--teal);
  }
  .pill-green {
    background: rgba(81,207,102,0.08);
    color: var(--green);
  }

  /* â”€â”€â”€ Badges â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .badge {
    display: inline-flex;
    align-items: center;
    gap: 3px;
    padding: 2px 8px;
    border-radius: 20px;
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.3px;
    white-space: nowrap;
  }
  .badge-green  { background: var(--green-light);  color: var(--green); }
  .badge-amber  { background: var(--amber-light);  color: var(--amber); }
  .badge-red    { background: var(--red-light);    color: var(--red); }
  .badge-brand  { background: var(--brand-light);  color: var(--brand); }

  /* â”€â”€â”€ Completed Section â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .completed-toggle {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 0;
    cursor: pointer;
    border-top: 1px solid var(--border);
    margin-top: 6px;
  }
  .completed-label {
    font-size: 11px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.8px;
    color: var(--text-2);
  }
  .completed-count {
    background: var(--brand-light);
    color: var(--brand);
    border-radius: 20px;
    padding: 2px 8px;
    font-size: 10px;
    font-weight: 700;
  }
  .completed-chevron {
    margin-left: auto;
    font-size: 12px;
    color: var(--text-3);
    transition: transform 0.25s ease;
  }
  .completed-chevron.open { transform: rotate(180deg); }

  .completed-goals { display: none; }
  .completed-goals.visible { display: block; }

  .goal-card.completed {
    opacity: 0.55;
  }
  .goal-card.completed::before {
    background: var(--text-3);
  }

  /* â”€â”€â”€ Add Goal Button â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .add-goal-btn {
    width: 100%;
    height: 48px;
    border: 1px dashed rgba(124,110,250,0.3);
    border-radius: 12px;
    background: transparent;
    color: var(--brand);
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    font-family: inherit;
    margin-top: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    transition: background 0.15s;
  }
  .add-goal-btn:hover { background: var(--brand-light); }

  /* â”€â”€â”€ Budgets Tab â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .period-banner {
    background: rgba(255,255,255,0.04);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 10px 14px;
    margin-bottom: 12px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .period-day   { font-size: 13px; font-weight: 500; color: var(--text); }
  .period-pct   { font-size: 12px; color: var(--text-2); }

  .budget-summary {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
    margin-bottom: 16px;
  }
  .budget-summary-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 14px;
  }
  .bsc-label {
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.7px;
    color: var(--text-2);
    margin-bottom: 4px;
  }
  .bsc-amount {
    font-size: 22px;
    font-weight: 800;
    letter-spacing: -0.8px;
    color: var(--text);
  }

  .budget-list {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 16px;
    overflow: hidden;
    margin-bottom: 12px;
  }
  .budget-row {
    padding: 14px 16px;
    border-bottom: 1px solid var(--border);
    cursor: pointer;
    transition: background 0.1s;
  }
  .budget-row:last-child { border-bottom: none; }
  .budget-row:hover { background: rgba(255,255,255,0.02); }

  .budget-row-top {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 7px;
  }
  .budget-category {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 14px;
    font-weight: 600;
    color: var(--text);
  }
  .budget-cat-icon { font-size: 16px; }
  .budget-goal-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: var(--teal);
    flex-shrink: 0;
  }
  .budget-amounts {
    display: flex;
    align-items: baseline;
    gap: 3px;
  }
  .budget-spent { font-size: 14px; font-weight: 700; color: var(--text); }
  .budget-limit { font-size: 11px; color: var(--text-2); }
  .budget-row-bottom {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 6px;
  }
  .budget-pct { font-size: 10px; color: var(--text-3); }

  .add-budget-btn {
    width: 100%;
    height: 48px;
    border: 1px dashed rgba(124,110,250,0.3);
    border-radius: 12px;
    background: transparent;
    color: var(--brand);
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    font-family: inherit;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    transition: background 0.15s;
  }
  .add-budget-btn:hover { background: var(--brand-light); }

  /* â”€â”€â”€ Floating AI Chat Button â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .fab {
    position: absolute;
    bottom: 96px;
    right: 20px;
    width: 52px;
    height: 52px;
    border-radius: 50%;
    background: var(--brand);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 22px;
    box-shadow: 0 4px 20px rgba(124,110,250,0.5);
    cursor: pointer;
    z-index: 20;
    border: none;
    transition: transform 0.15s, box-shadow 0.15s;
    animation: fabEntrance 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) 0.8s both;
  }
  .fab:hover {
    transform: scale(1.05);
    box-shadow: 0 6px 28px rgba(124,110,250,0.65);
  }
  .fab-dot {
    position: absolute;
    top: 4px;
    right: 4px;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: var(--amber);
    border: 2px solid var(--bg);
  }

  /* â”€â”€â”€ Bottom Navigation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .bottom-nav {
    height: 82px;
    background: rgba(11,15,30,0.95);
    backdrop-filter: blur(20px);
    border-top: 1px solid var(--border);
    display: flex;
    align-items: flex-start;
    padding-top: 12px;
    flex-shrink: 0;
  }
  .nav-tab {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 3px;
    cursor: pointer;
  }
  .nav-icon { font-size: 22px; line-height: 1; }
  .nav-label {
    font-size: 10px;
    font-weight: 500;
    color: var(--text-3);
  }
  .nav-tab.active .nav-label { color: var(--brand); }
  .nav-tab.active .nav-icon  { filter: none; }

  /* â”€â”€â”€ Bottom Sheet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .sheet-backdrop {
    position: absolute;
    inset: 0;
    background: rgba(0,0,0,0);
    z-index: 30;
    display: none;
    transition: background 0.35s;
    border-radius: 44px;
    overflow: hidden;
  }
  .sheet-backdrop.visible {
    display: block;
    background: rgba(0,0,0,0.6);
  }
  .bottom-sheet {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: var(--card);
    border-radius: 20px 20px 0 0;
    padding: 8px 20px 40px;
    z-index: 31;
    transform: translateY(100%);
    transition: transform 0.35s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }
  .bottom-sheet.open {
    transform: translateY(0);
  }
  .sheet-handle {
    width: 32px;
    height: 4px;
    background: rgba(255,255,255,0.2);
    border-radius: 2px;
    margin: 12px auto 20px;
  }
  .sheet-title {
    font-size: 17px;
    font-weight: 800;
    letter-spacing: -0.5px;
    color: var(--text);
    margin-bottom: 6px;
  }
  .sheet-sub {
    font-size: 13px;
    color: var(--text-2);
    margin-bottom: 20px;
  }

  /* Goal type option cards */
  .type-option {
    display: flex;
    align-items: center;
    gap: 14px;
    background: rgba(255,255,255,0.04);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 14px 16px;
    margin-bottom: 10px;
    cursor: pointer;
    transition: border-color 0.15s, background 0.15s;
    position: relative;
  }
  .type-option:hover { background: rgba(255,255,255,0.07); }
  .type-option.save-up  { border-left: 3px solid var(--brand); }
  .type-option.spending { border-left: 3px solid var(--teal); }
  .type-option.debt     { border-left: 3px solid var(--green); }

  .type-option-icon {
    width: 40px;
    height: 40px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    flex-shrink: 0;
  }
  .save-up .type-option-icon  { background: var(--brand-light); }
  .spending .type-option-icon { background: var(--teal-light); }
  .debt .type-option-icon     { background: var(--green-light); }

  .type-option-text { flex: 1; }
  .type-option-name {
    font-size: 15px;
    font-weight: 700;
    color: var(--text);
  }
  .type-option-desc {
    font-size: 12px;
    color: var(--text-2);
    line-height: 1.4;
    margin-top: 2px;
  }
  .type-chevron { font-size: 14px; color: var(--text-3); }

  /* â”€â”€â”€ AI Chat Overlay â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .chat-overlay {
    position: absolute;
    inset: 0;
    background: var(--bg);
    border-radius: 44px;
    z-index: 40;
    display: none;
    flex-direction: column;
    transform: translateY(100%);
    transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    overflow: hidden;
  }
  .chat-overlay.open {
    display: flex;
    transform: translateY(0);
  }
  .chat-header {
    padding: 62px 20px 16px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid var(--border);
    flex-shrink: 0;
  }
  .chat-title-block {}
  .chat-ai-label {
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    color: var(--brand);
  }
  .chat-title {
    font-size: 17px;
    font-weight: 800;
    letter-spacing: -0.5px;
    color: var(--text);
  }
  .chat-close {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    background: rgba(255,255,255,0.08);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    cursor: pointer;
    color: var(--text-2);
    border: none;
    font-family: inherit;
  }
  .chat-messages {
    flex: 1;
    overflow-y: auto;
    padding: 20px 20px 16px;
  }
  .chat-messages::-webkit-scrollbar { display: none; }
  .chat-msg {
    margin-bottom: 12px;
    max-width: 82%;
  }
  .chat-msg.ai {
    align-self: flex-start;
  }
  .chat-msg.user {
    align-self: flex-end;
    margin-left: auto;
  }
  .msg-bubble {
    padding: 10px 14px;
    border-radius: 16px;
    font-size: 13px;
    line-height: 1.5;
  }
  .ai .msg-bubble {
    background: var(--card-2);
    color: var(--text);
    border-radius: 4px 16px 16px 16px;
  }
  .user .msg-bubble {
    background: var(--brand);
    color: #fff;
    border-radius: 16px 4px 16px 16px;
  }
  .msg-ai-tag {
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.8px;
    color: var(--brand);
    margin-bottom: 4px;
  }
  .chat-suggestions {
    padding: 0 20px 12px;
    flex-shrink: 0;
  }
  .chat-suggestions-label {
    font-size: 11px;
    color: var(--text-2);
    margin-bottom: 8px;
  }
  .chat-chips {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }
  .chat-chip {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 6px 12px;
    font-size: 12px;
    color: var(--text);
    cursor: pointer;
    font-family: inherit;
    transition: border-color 0.15s;
  }
  .chat-chip:hover { border-color: var(--brand); color: var(--brand); }
  .chat-input-row {
    padding: 12px 20px 32px;
    display: flex;
    gap: 10px;
    border-top: 1px solid var(--border);
    flex-shrink: 0;
  }
  .chat-input {
    flex: 1;
    background: var(--card-2);
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 10px 16px;
    font-size: 14px;
    color: var(--text);
    font-family: inherit;
    outline: none;
  }
  .chat-input::placeholder { color: var(--text-3); }
  .chat-input:focus { border-color: rgba(124,110,250,0.4); }
  .chat-send {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: var(--brand);
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    cursor: pointer;
    flex-shrink: 0;
    font-family: inherit;
  }

  /* â”€â”€â”€ Animations â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  @keyframes fillBar {
    from { transform: scaleX(0); }
    to   { transform: scaleX(1); }
  }
  @keyframes fabEntrance {
    from { transform: scale(0.6); opacity: 0; }
    to   { transform: scale(1);   opacity: 1; }
  }

  /* â”€â”€â”€ Notes Panel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .notes-panel {
    width: 320px;
    margin-left: 40px;
    display: flex;
    flex-direction: column;
    gap: 20px;
    align-self: flex-start;
    position: sticky;
    top: 40px;
  }
  .note-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 16px;
  }
  .note-tag {
    font-size: 10px;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 6px;
  }
  .note-tag.teal   { color: var(--teal); }
  .note-tag.brand  { color: var(--brand); }
  .note-tag.amber  { color: var(--amber); }
  .note-tag.green  { color: var(--green); }
  .note-heading {
    font-size: 14px;
    font-weight: 700;
    color: var(--text);
    margin-bottom: 6px;
  }
  .note-body {
    font-size: 12px;
    color: var(--text-2);
    line-height: 1.6;
  }
  .note-body li { margin-left: 14px; margin-bottom: 4px; }

  /* â”€â”€â”€ Controls (state toggle) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .controls {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    margin-bottom: 24px;
    justify-content: center;
  }
  .ctrl-btn {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 20px;
    padding: 7px 16px;
    font-size: 12px;
    font-weight: 600;
    color: var(--text-2);
    cursor: pointer;
    font-family: inherit;
    transition: border-color 0.15s, color 0.15s;
  }
  .ctrl-btn.active, .ctrl-btn:hover {
    border-color: var(--brand);
    color: var(--brand);
  }

  /* â”€â”€â”€ Layout wrapper â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .demo-row {
    display: flex;
    align-items: flex-start;
    justify-content: center;
    gap: 0;
  }
</style>
</head>
<body>

<h1 class="page-title">Totem â€” Plan Screen</h1>
<p class="page-subtitle">Goals + Budgets Â· Interactive Mockup Â· Click tabs, buttons, and the AI chat button to explore</p>

<!-- Legend -->
<div class="legend">
  <div class="legend-item"><div class="legend-dot" style="background:var(--brand)"></div> Save Up Goal</div>
  <div class="legend-item"><div class="legend-dot" style="background:var(--teal)"></div> Spending Habit Goal</div>
  <div class="legend-item"><div class="legend-dot" style="background:var(--green)"></div> Debt Paydown Goal</div>
  <div class="legend-item"><div class="legend-dot" style="background:var(--amber)"></div> AI / At Risk</div>
</div>

<!-- State controls -->
<div class="controls">
  <button class="ctrl-btn active" id="btn-milestone" onclick="setState('milestone')">ğŸ”’ AI Locked (22/30)</button>
  <button class="ctrl-btn" id="btn-ai-active" onclick="setState('ai-active')">âœ¨ AI Active</button>
  <button class="ctrl-btn" id="btn-budgets" onclick="switchTab('budgets')">ğŸ“Š Budgets Tab</button>
</div>

<div class="demo-row">
  <!-- Phone -->
  <div class="phone-outer">
    <div class="phone-screen" id="phone-screen">

      <div class="dynamic-island"></div>

      <!-- Screen Header -->
      <div class="screen-header">
        <span class="screen-title">Plan</span>
        <span class="header-action" onclick="openSheet()">+ Add Goal</span>
      </div>

      <!-- Sub-tabs -->
      <div class="subtab-bar">
        <div class="subtab active" id="tab-goals" onclick="switchTab('goals')">Goals</div>
        <div class="subtab" id="tab-budgets" onclick="switchTab('budgets')">Budgets</div>
      </div>

      <!-- Scrollable content -->
      <div class="tab-content">

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <!-- GOALS TAB -->
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div class="tab-pane active" id="pane-goals">

          <!-- 30-Transaction Milestone Card (default state) -->
          <div id="milestone-card" class="milestone-card">
            <div class="milestone-top">
              <div class="milestone-icon">ğŸ¤–</div>
              <div class="milestone-text-block">
                <div class="ai-tag">Totem AI</div>
                <div class="milestone-title">Activate AI Goal Suggestions</div>
              </div>
            </div>
            <div class="milestone-bar-track">
              <div class="milestone-bar-fill" style="width: 73%"></div>
            </div>
            <div class="milestone-labels">
              <span class="milestone-label-left">22 of 30 transactions reviewed</span>
              <span class="milestone-label-right">8 more to go</span>
            </div>
            <div class="milestone-sub">Review more transactions to unlock AI-powered goal suggestions and spending insights.</div>
            <span class="milestone-cta">Go to Review â†’</span>
          </div>

          <!-- AI Suggestion Card (hidden until AI active) -->
          <div id="ai-suggestion-card" class="ai-suggestion-card">
            <div class="suggestion-top">
              <div class="suggestion-icon">âœ¨</div>
              <div>
                <div class="ai-tag">Totem AI</div>
                <div class="suggestion-type">Spending Habit Goal</div>
              </div>
            </div>
            <div class="suggestion-insight">Your Dining Out spend has risen 38% over the last 3 months ğŸ“ˆ</div>
            <div class="suggestion-preview">
              Based on $620/mo avg â†’ $496/mo target (âˆ’20%)<br>
              Save approx. <strong style="color:var(--teal)">$124/mo</strong> if you hit this goal
            </div>
            <div class="suggestion-actions">
              <button class="btn-primary">Review Suggestion</button>
              <button class="btn-ghost">Not Now</button>
            </div>
          </div>

          <!-- Section: Active Goals -->
          <div class="section-header">
            <span class="section-label">Active Goals Â· 3</span>
          </div>

          <!-- â”€â”€ Save Up Goal Card â”€â”€ -->
          <div class="goal-card save-up">
            <div class="goal-header">
              <div class="goal-header-left">
                <div class="goal-icon">ğŸ–ï¸</div>
                <div>
                  <div class="goal-name">Japan Trip</div>
                  <div class="goal-type-label">Save Up Goal</div>
                </div>
              </div>
              <span class="badge badge-green">On Track</span>
            </div>
            <div class="goal-amounts">
              <div class="goal-amount-main">$2,840 <span class="unit">of $5,000</span></div>
              <div class="goal-pct">57%</div>
            </div>
            <div class="progress-track">
              <div class="progress-fill fill-brand" style="width: 57%"></div>
            </div>
            <div class="goal-footer">
              <div>
                <div class="goal-footer-label">Projected completion</div>
                <div class="goal-footer-val">August 2025 Â· 6 months</div>
              </div>
            </div>
            <div class="pill">â†» Auto-transfer: $300/mo Â· next 1 Mar</div>
          </div>

          <!-- â”€â”€ Spending Habit Goal Card â”€â”€ -->
          <div class="goal-card spending">
            <div class="goal-header">
              <div class="goal-header-left">
                <div class="goal-icon">ğŸ”</div>
                <div>
                  <div class="goal-name">Dining Out</div>
                  <div class="goal-type-label">Spending Habit</div>
                </div>
              </div>
              <span class="badge badge-amber">At Risk</span>
            </div>
            <div class="goal-amounts">
              <div class="goal-amount-main" style="color: var(--amber)">$341 <span class="unit" style="color:var(--text-2)">of $464/mo</span></div>
              <div class="goal-pct">73%</div>
            </div>
            <div class="progress-track">
              <!-- Period marker: day 19 of 28 = 68% -->
              <div class="period-marker" style="left: 68%"></div>
              <div class="progress-fill fill-amber" style="width: 73%"></div>
            </div>
            <div class="bar-labels">
              <span class="bar-label-left">19 Feb Â· 8 days left</span>
              <span class="bar-label-right text-red">âˆ’$123 over pace</span>
            </div>
            <!-- Streak row -->
            <div class="streak-row">
              <span>ğŸ”¥</span>
              <span class="streak-text streak-3">3 months in a row</span>
              <span class="streak-best">Best: 3</span>
            </div>
          </div>

          <!-- â”€â”€ Debt Paydown Goal Card â”€â”€ -->
          <div class="goal-card debt">
            <div class="goal-header">
              <div class="goal-header-left">
                <div class="goal-icon">ğŸ’³</div>
                <div>
                  <div class="goal-name">ANZ Visa</div>
                  <div class="goal-type-label">Debt Paydown</div>
                </div>
              </div>
              <span class="badge badge-green">Ahead</span>
            </div>
            <div class="goal-amounts">
              <div class="goal-amount-main" style="color: var(--green)">$2,150 <span class="unit">paid off</span></div>
              <div class="goal-pct">43%</div>
            </div>
            <div class="progress-track">
              <div class="progress-fill fill-green" style="width: 43%"></div>
            </div>
            <div class="bar-labels">
              <span class="bar-label-left">$2,850 remaining</span>
              <span class="bar-label-right text-green">+2 months ahead</span>
            </div>
            <div class="goal-footer" style="margin-top: 10px">
              <div>
                <div class="goal-footer-label">Projected payoff</div>
                <div class="goal-footer-val">December 2025</div>
              </div>
            </div>
            <div class="pill pill-green">ğŸ’° Saving ~$380 in interest vs. minimums</div>
          </div>

          <!-- Add Goal button -->
          <button class="add-goal-btn" onclick="openSheet()">
            <span>+</span> Add Goal
          </button>

          <!-- Completed Goals Section -->
          <div class="completed-toggle" onclick="toggleCompleted()">
            <span class="completed-label">Completed</span>
            <span class="completed-count">2 goals</span>
            <span class="completed-chevron" id="completed-chevron">â–¼</span>
          </div>
          <div class="completed-goals" id="completed-goals">
            <div class="goal-card save-up completed">
              <div class="goal-header">
                <div class="goal-header-left">
                  <div class="goal-icon">ğŸ®</div>
                  <div>
                    <div class="goal-name">New PC</div>
                    <div class="goal-type-label">Save Up Goal</div>
                  </div>
                </div>
                <span class="badge badge-green">Completed</span>
              </div>
              <div class="progress-track">
                <div class="progress-fill fill-brand" style="width: 100%"></div>
              </div>
              <div class="goal-footer" style="margin-top: 8px">
                <div class="goal-footer-label">Completed 14 Jan 2025 Â· $2,200 saved</div>
              </div>
            </div>
          </div>

        </div><!-- /pane-goals -->

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <!-- BUDGETS TAB -->
        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <div class="tab-pane" id="pane-budgets">

          <!-- Period context banner -->
          <div class="period-banner">
            <span class="period-day">Day 19 of February</span>
            <span class="period-pct">68% of month elapsed</span>
          </div>

          <!-- Summary cards -->
          <div class="budget-summary">
            <div class="budget-summary-card">
              <div class="bsc-label">Total Budgeted</div>
              <div class="bsc-amount">$3,050</div>
            </div>
            <div class="budget-summary-card">
              <div class="bsc-label">Spent This Month</div>
              <div class="bsc-amount" style="color: var(--amber)">$2,190</div>
            </div>
          </div>

          <!-- Section header -->
          <div class="section-header">
            <span class="section-label">Budgets Â· 5 active</span>
            <span class="section-link" onclick="">Edit</span>
          </div>

          <!-- Budget list -->
          <div class="budget-list">

            <!-- Groceries â€” On Track -->
            <div class="budget-row">
              <div class="budget-row-top">
                <div class="budget-category">
                  <span class="budget-cat-icon">ğŸ›’</span>
                  Groceries
                </div>
                <div class="budget-amounts">
                  <span class="budget-spent">$412</span>
                  <span class="budget-limit">/ $600</span>
                </div>
              </div>
              <div class="progress-track">
                <div class="period-marker" style="left: 68%"></div>
                <div class="progress-fill fill-green" style="width: 69%"></div>
              </div>
              <div class="budget-row-bottom">
                <span class="badge badge-green">On Track</span>
                <span class="budget-pct">69%</span>
              </div>
            </div>

            <!-- Dining â€” At Risk (linked to goal) -->
            <div class="budget-row">
              <div class="budget-row-top">
                <div class="budget-category">
                  <span class="budget-cat-icon">ğŸ”</span>
                  Dining Out
                  <div class="budget-goal-dot" title="Synced with Dining Out goal"></div>
                </div>
                <div class="budget-amounts">
                  <span class="budget-spent">$341</span>
                  <span class="budget-limit">/ $464</span>
                </div>
              </div>
              <div class="progress-track">
                <div class="period-marker" style="left: 68%"></div>
                <div class="progress-fill fill-amber" style="width: 73%"></div>
              </div>
              <div class="budget-row-bottom">
                <span class="badge badge-amber">At Risk</span>
                <span class="budget-pct">73%</span>
              </div>
            </div>

            <!-- Entertainment â€” On Track -->
            <div class="budget-row">
              <div class="budget-row-top">
                <div class="budget-category">
                  <span class="budget-cat-icon">ğŸ¬</span>
                  Entertainment
                </div>
                <div class="budget-amounts">
                  <span class="budget-spent">$60</span>
                  <span class="budget-limit">/ $150</span>
                </div>
              </div>
              <div class="progress-track">
                <div class="period-marker" style="left: 68%"></div>
                <div class="progress-fill fill-green" style="width: 40%"></div>
              </div>
              <div class="budget-row-bottom">
                <span class="badge badge-green">On Track</span>
                <span class="budget-pct">40%</span>
              </div>
            </div>

            <!-- Transport â€” Over -->
            <div class="budget-row">
              <div class="budget-row-top">
                <div class="budget-category">
                  <span class="budget-cat-icon">ğŸš—</span>
                  Transport
                </div>
                <div class="budget-amounts">
                  <span class="budget-spent" style="color:var(--red)">$290</span>
                  <span class="budget-limit">/ $250</span>
                </div>
              </div>
              <div class="progress-track">
                <div class="period-marker" style="left: 68%"></div>
                <div class="progress-fill fill-red" style="width: 100%"></div>
              </div>
              <div class="budget-row-bottom">
                <span class="badge badge-red">Over Budget</span>
                <span class="budget-pct" style="color:var(--red)">116%</span>
              </div>
            </div>

            <!-- Shopping â€” On Track -->
            <div class="budget-row">
              <div class="budget-row-top">
                <div class="budget-category">
                  <span class="budget-cat-icon">ğŸ›ï¸</span>
                  Shopping
                </div>
                <div class="budget-amounts">
                  <span class="budget-spent">$375</span>
                  <span class="budget-limit">/ $500</span>
                </div>
              </div>
              <div class="progress-track">
                <div class="period-marker" style="left: 68%"></div>
                <div class="progress-fill fill-green" style="width: 75%"></div>
              </div>
              <div class="budget-row-bottom">
                <span class="badge badge-green">On Track</span>
                <span class="budget-pct">75%</span>
              </div>
            </div>

          </div><!-- /budget-list -->

          <!-- Dining-goal sync note -->
          <div class="pill pill-teal" style="margin-bottom: 10px; display: inline-flex;">
            âŸ· Dining Out budget is synced with your Spending Habit goal
          </div>

          <!-- Add Budget button -->
          <button class="add-budget-btn">+ Add Budget</button>

        </div><!-- /pane-budgets -->

      </div><!-- /tab-content -->

      <!-- Floating AI Chat Button -->
      <button class="fab" onclick="openChat()">
        âœ¨
        <div class="fab-dot"></div>
      </button>

      <!-- Bottom Navigation -->
      <div class="bottom-nav">
        <div class="nav-tab" onclick="">
          <div class="nav-icon">ğŸ </div>
          <div class="nav-label">Home</div>
        </div>
        <div class="nav-tab active">
          <div class="nav-icon" style="color:var(--brand)">ğŸ“‹</div>
          <div class="nav-label" style="color:var(--brand); font-weight:700">Plan</div>
        </div>
        <div class="nav-tab" onclick="">
          <div class="nav-icon">ğŸ“…</div>
          <div class="nav-label">Calendar</div>
        </div>
        <div class="nav-tab" onclick="">
          <div class="nav-icon">ğŸ¦</div>
          <div class="nav-label">Accounts</div>
        </div>
        <div class="nav-tab" onclick="">
          <div class="nav-icon">ğŸ’¡</div>
          <div class="nav-label">Insights</div>
        </div>
      </div>

      <!-- â”€â”€ Bottom Sheet: Add Goal Type Selector â”€â”€ -->
      <div class="sheet-backdrop" id="sheet-backdrop" onclick="closeSheet()"></div>
      <div class="bottom-sheet" id="add-goal-sheet">
        <div class="sheet-handle"></div>
        <div class="sheet-title">What type of goal?</div>
        <div class="sheet-sub">Choose the type that fits what you're trying to do.</div>

        <div class="type-option save-up" onclick="closeSheet()">
          <div class="type-option-icon">ğŸ¯</div>
          <div class="type-option-text">
            <div class="type-option-name">Save Up</div>
            <div class="type-option-desc">Set a target amount and track your progress toward it</div>
          </div>
          <span class="type-chevron">â€º</span>
        </div>

        <div class="type-option spending" onclick="closeSheet()">
          <div class="type-option-icon">ğŸ“Š</div>
          <div class="type-option-text">
            <div class="type-option-name">Reduce Spending</div>
            <div class="type-option-desc">Set a monthly limit on a category and build a streak</div>
          </div>
          <span class="type-chevron">â€º</span>
        </div>

        <div class="type-option debt" onclick="closeSheet()">
          <div class="type-option-icon">ğŸ’³</div>
          <div class="type-option-text">
            <div class="type-option-name">Pay Off Debt</div>
            <div class="type-option-desc">Track your progress on clearing a credit card or loan</div>
          </div>
          <span class="type-chevron">â€º</span>
        </div>
      </div>

      <!-- â”€â”€ AI Chat Overlay â”€â”€ -->
      <div class="chat-overlay" id="chat-overlay">
        <div class="chat-header">
          <div class="chat-title-block">
            <div class="chat-ai-label">âœ¨ Totem AI</div>
            <div class="chat-title">Ask me anything</div>
          </div>
          <button class="chat-close" onclick="closeChat()">âœ•</button>
        </div>
        <div class="chat-messages">
          <div class="chat-msg ai">
            <div class="msg-ai-tag">âœ¨ Totem AI</div>
            <div class="msg-bubble">Hey! ğŸ‘‹ I've been looking at your spending this week. Your Dining Out is running a bit hot â€” you're at $341 of $464 with 8 days left. Want me to suggest a plan to finish the month on track?</div>
          </div>
          <div class="chat-msg user">
            <div class="msg-bubble">Yes please, what would you suggest?</div>
          </div>
          <div class="chat-msg ai">
            <div class="msg-ai-tag">âœ¨ Totem AI</div>
            <div class="msg-bubble">You need to keep Dining Out under <strong>$123</strong> for the remaining 8 days â€” that's about $15/day. A practical approach: cook at home 5 days this week and budget $30â€“40 for one dinner out. You'll finish the month around $450, just under your $464 target. ğŸ¯<br><br>Want me to remind you each evening this week if you're on track?</div>
          </div>
        </div>
        <div class="chat-suggestions">
          <div class="chat-suggestions-label">Suggested questions</div>
          <div class="chat-chips">
            <button class="chat-chip">How's my Japan Trip goal?</button>
            <button class="chat-chip">Set a new budget</button>
            <button class="chat-chip">Show my spending trends</button>
          </div>
        </div>
        <div class="chat-input-row">
          <input class="chat-input" type="text" placeholder="Ask about your moneyâ€¦">
          <button class="chat-send">â†‘</button>
        </div>
      </div>

    </div><!-- /phone-screen -->
  </div><!-- /phone-outer -->

  <!-- â”€â”€â”€ Notes Panel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div class="notes-panel">

    <div class="note-card">
      <div class="note-tag brand">Goal Type System</div>
      <div class="note-heading">Three types, instant recognition</div>
      <div class="note-body">
        Every goal card has a 3px left border in its type colour:<br>
        <ul style="margin-top:6px">
          <li style="color:var(--brand)">Purple â€” Save Up</li>
          <li style="color:var(--teal)">Teal â€” Spending Habit</li>
          <li style="color:var(--green)">Green â€” Debt Paydown</li>
        </ul>
        <br>In a mixed list, you can identify goal types without reading the names.
      </div>
    </div>

    <div class="note-card">
      <div class="note-tag teal">Spending Habit â€” Unique to Totem</div>
      <div class="note-heading">The period marker + streak</div>
      <div class="note-body">
        The white tick on the burn bar shows where spending <em>should</em> be at this point in the month â€” the same differentiator from the Dashboard Burn Rate.
        <br><br>
        The streak (ğŸ”¥ 3 months) uses colour to signal momentum: muted at 1 month, amber at 2â€“3, brand purple at 4+.
        <br><br>
        No other AU/NZ finance app has this goal type.
      </div>
    </div>

    <div class="note-card">
      <div class="note-tag amber">30-Transaction Milestone</div>
      <div class="note-heading">Gamified AI activation</div>
      <div class="note-body">
        Until 30 transactions are reviewed, the AI card shows a progress bar toward activation â€” not a blank state. This creates a sense of progress and motivates the "Review" behaviour.
        <br><br>
        Click <strong style="color:var(--brand)">âœ¨ AI Active</strong> above to see the post-activation state with the AI suggestion card.
      </div>
    </div>

    <div class="note-card">
      <div class="note-tag green">Budget-Goal Sync</div>
      <div class="note-heading">The teal dot means linked</div>
      <div class="note-body">
        When a budget is synced with a Spending Habit goal, a small teal dot appears next to the category name. The budget amount automatically matches the goal target.
        <br><br>
        This is shown on the Dining Out row in the Budgets tab.
      </div>
    </div>

    <div class="note-card">
      <div class="note-tag brand">AI Chat Button (FAB)</div>
      <div class="note-heading">Present on every screen</div>
      <div class="note-body">
        The âœ¨ sparkle button sits above the bottom nav on every screen â€” tap it to open the AI chat overlay. The amber dot means Totem AI has a proactive message waiting.
        <br><br>
        This is the Monarch pattern: chat as a floating layer, not a nav tab. It never competes with navigation.
      </div>
    </div>

  </div><!-- /notes-panel -->
</div><!-- /demo-row -->

<script>
  // â”€â”€â”€ Tab switching â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function switchTab(tab) {
    document.querySelectorAll('.subtab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('.tab-pane').forEach(p => p.classList.remove('active'));

    document.getElementById('tab-' + tab).classList.add('active');
    document.getElementById('pane-' + tab).classList.add('active');

    // Update header action
    const action = document.querySelector('.header-action');
    if (tab === 'goals') action.textContent = '+ Add Goal';
    else action.textContent = '+ Add Budget';

    // Update control button states
    document.querySelectorAll('.ctrl-btn').forEach(b => {
      if (b.id === 'btn-budgets') b.classList.toggle('active', tab === 'budgets');
    });
  }

  // â”€â”€â”€ State switching (AI locked / AI active) â”€â”€â”€
  function setState(state) {
    document.getElementById('btn-milestone').classList.toggle('active', state === 'milestone');
    document.getElementById('btn-ai-active').classList.toggle('active', state === 'ai-active');

    const milestoneCard    = document.getElementById('milestone-card');
    const aiSuggestionCard = document.getElementById('ai-suggestion-card');

    if (state === 'milestone') {
      milestoneCard.style.display = 'block';
      aiSuggestionCard.style.display = 'none';
    } else {
      milestoneCard.style.display = 'none';
      aiSuggestionCard.style.display = 'block';
    }

    // Switch to goals tab
    switchTab('goals');
    document.getElementById('btn-budgets').classList.remove('active');
  }

  // â”€â”€â”€ Completed toggle â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function toggleCompleted() {
    const goals   = document.getElementById('completed-goals');
    const chevron = document.getElementById('completed-chevron');
    const open    = goals.classList.contains('visible');
    goals.classList.toggle('visible', !open);
    chevron.classList.toggle('open', !open);
  }

  // â”€â”€â”€ Bottom sheet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function openSheet() {
    document.getElementById('sheet-backdrop').classList.add('visible');
    document.getElementById('add-goal-sheet').classList.add('open');
  }
  function closeSheet() {
    document.getElementById('sheet-backdrop').classList.remove('visible');
    document.getElementById('add-goal-sheet').classList.remove('open');
  }

  // â”€â”€â”€ AI Chat overlay â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function openChat() {
    const overlay = document.getElementById('chat-overlay');
    overlay.style.display = 'flex';
    // Trigger reflow for animation
    requestAnimationFrame(() => {
      requestAnimationFrame(() => {
        overlay.classList.add('open');
      });
    });
  }
  function closeChat() {
    const overlay = document.getElementById('chat-overlay');
    overlay.classList.remove('open');
    setTimeout(() => { overlay.style.display = 'none'; }, 400);
  }

  // â”€â”€â”€ Chat send (demo) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  document.querySelector('.chat-send').addEventListener('click', function() {
    const input = document.querySelector('.chat-input');
    if (!input.value.trim()) return;
    const msgs = document.querySelector('.chat-messages');
    const userMsg = document.createElement('div');
    userMsg.className = 'chat-msg user';
    userMsg.innerHTML = '<div class="msg-bubble">' + input.value + '</div>';
    msgs.appendChild(userMsg);
    input.value = '';
    msgs.scrollTop = msgs.scrollHeight;
    // Fake AI response after delay
    setTimeout(() => {
      const aiMsg = document.createElement('div');
      aiMsg.className = 'chat-msg ai';
      aiMsg.innerHTML = '<div class="msg-ai-tag">âœ¨ Totem AI</div><div class="msg-bubble">Great question! Let me check your data and come back to youâ€¦ ğŸ”</div>';
      msgs.appendChild(aiMsg);
      msgs.scrollTop = msgs.scrollHeight;
    }, 800);
  });

  // Enter key sends chat message
  document.querySelector('.chat-input').addEventListener('keydown', function(e) {
    if (e.key === 'Enter') document.querySelector('.chat-send').click();
  });

  // Suggestion chips auto-fill chat input
  document.querySelectorAll('.chat-chip').forEach(chip => {
    chip.addEventListener('click', function() {
      document.querySelector('.chat-input').value = this.textContent;
      document.querySelector('.chat-input').focus();
    });
  });
</script>

</body>
</html>
