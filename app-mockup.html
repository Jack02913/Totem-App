<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Totem — App Prototype</title>
<style>

/* ════════════════════════════════════════════════════════
   DESIGN TOKENS — THEME SYSTEM
   Change theme by adding a class to <html>:
   (none)      → Midnight Blue  (default)
   .t-oled     → OLED Black
   .t-light    → Light
   ════════════════════════════════════════════════════════ */

:root {
    /* Surfaces */
    --bg:    #060B18;
    --card:  #0E1525;
    --card2: #152030;
    --border: rgba(255,255,255,0.07);

    /* Brand */
    --brand:       #8B7EFF;
    --brand-light: rgba(139,126,255,0.12);

    /* Semantic */
    --teal:        #4ECDC4;
    --teal-light:  rgba(78,205,196,0.12);
    --amber:       #F7C84B;
    --amber-light: rgba(247,200,75,0.12);
    --red:         #FF6B6B;
    --red-light:   rgba(255,107,107,0.12);
    --green:       #51CF66;
    --green-light: rgba(81,207,102,0.12);

    /* Text */
    --text:  #F0F4FF;
    --text2: #8B95B0;
    --text3: #304060;

    /* Gradients (parameterised for theming) */
    --hero-start:  #130E36;
    --sub-start:   #0d1a26;
    --body-bg:     #030710;

    /* Chrome */
    --nav-bg:      rgba(6,11,24,0.94);
    --status-fill: rgba(240,244,255,0.9);
}

.t-oled {
    --bg:    #000000;
    --card:  #0C0C12;
    --card2: #121218;
    --border: rgba(255,255,255,0.06);
    --text3: #2E3450;
    --hero-start: #100A30;
    --body-bg: #000000;
    --nav-bg: rgba(0,0,0,0.96);
    --status-fill: rgba(240,244,255,0.9);
}

.t-light {
    --bg:    #F0F2F8;
    --card:  #FFFFFF;
    --card2: #F5F7FC;
    --border: rgba(0,0,0,0.08);

    --brand:       #6B5FF0;
    --brand-light: rgba(107,95,240,0.10);

    --teal:        #1EA99F;
    --teal-light:  rgba(30,169,159,0.10);
    --amber:       #B87A00;
    --amber-light: rgba(184,122,0,0.10);
    --red:         #D93025;
    --red-light:   rgba(217,48,37,0.10);
    --green:       #1E8C35;
    --green-light: rgba(30,140,53,0.10);

    --text:  #0D1017;
    --text2: #525C78;
    --text3: #B0BAD0;

    --hero-start:  #EAE7FF;
    --sub-start:   #E0F5F4;
    --body-bg:     #E4E8F2;

    --nav-bg:      rgba(255,255,255,0.94);
    --status-fill: rgba(13,16,23,0.8);
}

/* ════════════════════════════════════════════════════════
   PAGE SHELL
   ════════════════════════════════════════════════════════ */

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
    background: var(--body-bg);
    font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', system-ui, sans-serif;
    min-height: 100vh;
    display: flex;
    align-items: flex-start;
    justify-content: center;
    padding: 32px 24px 60px;
    transition: background 0.4s;
}

.page-wrapper {
    display: flex;
    gap: 40px;
    align-items: flex-start;
    max-width: 1100px;
    width: 100%;
}

/* ── Sidebar ── */
.sidebar {
    flex: 1;
    max-width: 280px;
    position: sticky;
    top: 32px;
}

.sidebar-logo {
    font-size: 18px;
    font-weight: 800;
    color: var(--text);
    letter-spacing: -0.5px;
    margin-bottom: 3px;
}
.sidebar-logo span { color: var(--brand); }

.sidebar-tagline {
    font-size: 11px;
    color: var(--text2);
    margin-bottom: 24px;
    line-height: 1.5;
}

/* Screen nav */
.sb-section-label {
    font-size: 10px;
    font-weight: 700;
    color: var(--text2);
    text-transform: uppercase;
    letter-spacing: 0.8px;
    margin-bottom: 8px;
}

.sb-nav-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 9px 12px;
    border-radius: 10px;
    cursor: pointer;
    margin-bottom: 4px;
    transition: background 0.15s;
    border: 1px solid transparent;
}
.sb-nav-item:hover { background: var(--card); }
.sb-nav-item.active {
    background: var(--brand-light);
    border-color: rgba(124,110,250,0.2);
}
.sb-nav-icon { width: 18px; height: 18px; }
.sb-nav-icon svg { width: 18px; height: 18px; }
.sb-nav-item.active .sb-nav-icon svg { fill: var(--brand); }
.sb-nav-item:not(.active) .sb-nav-icon svg { fill: var(--text3); }
.sb-nav-label {
    font-size: 13px;
    font-weight: 600;
    color: var(--text2);
}
.sb-nav-item.active .sb-nav-label { color: var(--brand); }

.sb-divider {
    height: 1px;
    background: var(--border);
    margin: 16px 0;
}

/* Theme switcher */
.theme-grid {
    display: flex;
    gap: 8px;
    margin-bottom: 0;
}
.theme-btn {
    flex: 1;
    padding: 8px 6px;
    border-radius: 10px;
    border: 1px solid var(--border);
    background: var(--card);
    cursor: pointer;
    font-family: inherit;
    transition: border-color 0.15s, background 0.15s;
    text-align: center;
}
.theme-btn:hover, .theme-btn.active {
    border-color: var(--brand);
    background: var(--brand-light);
}
.theme-swatch {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    margin: 0 auto 4px;
}
.theme-btn-label {
    font-size: 10px;
    font-weight: 700;
    color: var(--text2);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}
.theme-btn.active .theme-btn-label { color: var(--brand); }

/* Notes */
.notes-head {
    font-size: 10px;
    font-weight: 700;
    color: var(--text2);
    text-transform: uppercase;
    letter-spacing: 0.8px;
    margin: 16px 0 10px;
}

.note-item {
    display: flex;
    gap: 8px;
    margin-bottom: 8px;
}
.note-dot {
    width: 5px;
    height: 5px;
    border-radius: 50%;
    background: var(--brand);
    flex-shrink: 0;
    margin-top: 5px;
}
.note-item p {
    font-size: 11px;
    color: var(--text2);
    line-height: 1.6;
}

.note-set { display: none; }
.note-set.active { display: block; }

/* ── Phone column ── */
.phone-col {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 16px;
}

/* ── Phone frame ── */
.phone-outer {
    width: 390px;
    background: #181830;
    border-radius: 54px;
    padding: 14px;
    box-shadow:
        0 0 0 1px rgba(255,255,255,0.1),
        0 40px 100px rgba(0,0,0,0.9),
        inset 0 0 0 1px rgba(255,255,255,0.04);
}

.phone-screen {
    background: var(--bg);
    border-radius: 44px;
    overflow: hidden;
    height: 844px;
    position: relative;
    display: flex;
    flex-direction: column;
    transition: background 0.4s;
}

.dynamic-island {
    position: absolute;
    top: 12px;
    left: 50%;
    transform: translateX(-50%);
    width: 120px;
    height: 34px;
    background: #000;
    border-radius: 20px;
    z-index: 30;
    pointer-events: none;
}

/* Status bar */
.status-bar {
    height: 54px;
    display: flex;
    align-items: flex-end;
    justify-content: space-between;
    padding: 0 28px 8px;
    flex-shrink: 0;
    position: relative;
    z-index: 5;
}
.status-time { font-size: 15px; font-weight: 600; color: var(--text); }
.status-icons { display: flex; gap: 5px; align-items: center; }
.status-icons svg { fill: var(--status-fill); transition: fill 0.4s; }

/* ════════════════════════════════════════════════════════
   APP SCREEN SYSTEM
   Each screen is position:absolute filling the space above the nav.
   Active screen is visible; others are hidden.
   ════════════════════════════════════════════════════════ */

.app-screen {
    position: absolute;
    top: 54px;   /* below status bar */
    left: 0;
    right: 0;
    bottom: 82px; /* above bottom nav */
    display: flex;
    flex-direction: column;
    opacity: 0;
    pointer-events: none;
    transform: translateX(30px);
    transition: opacity 0.25s ease, transform 0.25s ease;
    overflow: hidden;
}

.app-screen.active {
    opacity: 1;
    pointer-events: all;
    transform: translateX(0);
}

.app-screen.exit-left {
    opacity: 0;
    transform: translateX(-30px);
}

/* ════════════════════════════════════════════════════════
   BOTTOM NAV (persistent — sits outside .app-screen)
   ════════════════════════════════════════════════════════ */

.bottom-nav {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 82px;
    background: var(--nav-bg);
    backdrop-filter: blur(20px);
    border-top: 1px solid var(--border);
    display: flex;
    align-items: flex-start;
    justify-content: space-around;
    padding: 12px 0 0;
    z-index: 20;
    transition: background 0.4s, border-color 0.4s;
}

.nav-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    cursor: pointer;
    padding: 2px 10px;
    min-width: 44px;
}
.nav-icon { width: 22px; height: 22px; }
.nav-icon svg { width: 22px; height: 22px; }
.nav-label { font-size: 10px; font-weight: 500; }
.nav-item.active .nav-label { color: var(--brand); font-weight: 700; }
.nav-item.active .nav-icon svg { fill: var(--brand); }
.nav-item:not(.active) .nav-label { color: var(--text3); }
.nav-item:not(.active) .nav-icon svg { fill: var(--text3); }

/* ════════════════════════════════════════════════════════
   FLOATING AI CHAT BUTTON (FAB)
   ════════════════════════════════════════════════════════ */

.fab {
    position: absolute;
    bottom: 96px;
    right: 20px;
    width: 52px;
    height: 52px;
    border-radius: 50%;
    background: var(--brand);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 22px;
    box-shadow: 0 4px 20px rgba(124,110,250,0.5);
    cursor: pointer;
    z-index: 25;
    border: none;
    font-family: inherit;
    transition: transform 0.15s, box-shadow 0.15s, background 0.4s;
    animation: fabIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) 0.6s both;
}
.fab:hover { transform: scale(1.06); box-shadow: 0 6px 28px rgba(124,110,250,0.65); }
.fab-dot {
    position: absolute;
    top: 4px;
    right: 4px;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: var(--amber);
    border: 2px solid var(--bg);
}

@keyframes fabIn {
    from { transform: scale(0.6); opacity: 0; }
    to   { transform: scale(1);   opacity: 1; }
}

/* ════════════════════════════════════════════════════════
   SHARED COMPONENT STYLES
   ════════════════════════════════════════════════════════ */

.section-hd {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 14px 0 8px;
}
.section-title {
    font-size: 11px;
    font-weight: 700;
    color: var(--text2);
    text-transform: uppercase;
    letter-spacing: 0.8px;
}
.section-link {
    font-size: 11px;
    font-weight: 600;
    color: var(--brand);
    cursor: pointer;
}

/* Badges */
.badge {
    display: inline-flex;
    align-items: center;
    gap: 3px;
    padding: 2px 7px;
    border-radius: 20px;
    font-size: 10px;
    font-weight: 700;
}
.badge-green  { background: var(--green-light);  color: var(--green); }
.badge-amber  { background: var(--amber-light);  color: var(--amber); }
.badge-red    { background: var(--red-light);    color: var(--red);   }
.badge-brand  { background: var(--brand-light);  color: var(--brand); }
.badge-muted  { background: rgba(255,255,255,0.06); color: var(--text3); }

/* Progress bars */
.progress-track {
    background: rgba(255,255,255,0.08);
    border-radius: 4px;
    height: 6px;
    overflow: hidden;
    position: relative;
}
.progress-track.overflow-visible { overflow: visible; }
.progress-fill {
    height: 100%;
    border-radius: 4px;
}
.fill-brand { background: linear-gradient(90deg, var(--brand), #9C8FFF); }
.fill-green { background: var(--green); }
.fill-amber { background: var(--amber); }
.fill-red   { background: var(--red); }
.fill-teal  { background: linear-gradient(90deg, var(--teal), #6EDCD5); }

/* Period marker tick */
.period-marker {
    position: absolute;
    top: -3px;
    width: 2px;
    height: 12px;
    background: rgba(255,255,255,0.3);
    border-radius: 1px;
    z-index: 2;
}

/* List card */
.list-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 16px;
    overflow: hidden;
    transition: background 0.4s, border-color 0.4s;
}
.list-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 16px;
    border-bottom: 1px solid var(--border);
}
.list-item:last-child { border-bottom: none; }
.list-icon {
    width: 36px;
    height: 36px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
    flex-shrink: 0;
}
.list-info { flex: 1; }
.list-name { font-size: 14px; font-weight: 600; color: var(--text); }
.list-sub  { font-size: 11px; color: var(--text2); margin-top: 1px; }
.list-right { text-align: right; }
.list-amount  { font-size: 14px; font-weight: 700; color: var(--text); }
.list-urgency { font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; margin-top: 2px; }

/* Metric cards */
.metric-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 14px 16px;
    transition: background 0.4s, border-color 0.4s;
}
.metric-label {
    font-size: 10px;
    font-weight: 700;
    color: var(--text2);
    text-transform: uppercase;
    letter-spacing: 0.7px;
    margin-bottom: 5px;
}
.metric-value {
    font-size: 22px;
    font-weight: 800;
    color: var(--text);
    letter-spacing: -0.8px;
    margin-bottom: 4px;
}
.metric-sub { font-size: 11px; color: var(--text2); }

/* ════════════════════════════════════════════════════════
   SCREEN 1: HOME — DASHBOARD
   ════════════════════════════════════════════════════════ */

/* Tier bar */
.tier-bar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 6px 20px 4px;
    flex-shrink: 0;
}
.tier-badge-pill {
    font-size: 10px;
    font-weight: 700;
    color: var(--brand);
    background: var(--brand-light);
    padding: 3px 10px;
    border-radius: 20px;
    text-transform: uppercase;
    letter-spacing: 0.8px;
    transition: background 0.4s, color 0.4s;
}
.tier-dots { display: flex; gap: 5px; align-items: center; }
.tdot {
    height: 4px;
    border-radius: 2px;
    background: var(--text3);
    cursor: pointer;
    transition: all 0.3s;
}
.tdot.active { background: var(--brand); width: 18px; }
.tdot:not(.active) { width: 5px; }

/* Tier slider */
.screen-content {
    flex: 1;
    overflow: hidden;
    position: relative;
}
.tier-slider {
    display: flex;
    width: 300%;
    height: 100%;
    transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
}
.tier-panel {
    width: 33.333%;
    height: 100%;
    overflow-y: auto;
    padding: 4px 20px 16px;
    scrollbar-width: none;
}
.tier-panel::-webkit-scrollbar { display: none; }

/* Dashboard header */
.dash-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    padding: 10px 0 12px;
}
.greeting      { font-size: 21px; font-weight: 700; color: var(--text); letter-spacing: -0.5px; }
.greeting-date { font-size: 12px; color: var(--text2); margin-top: 2px; }
.avatar {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--brand), #9C8FFF);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 14px;
    font-weight: 700;
    color: #fff;
}

/* Payday pill */
.payday-pill {
    display: flex;
    align-items: center;
    gap: 8px;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 24px;
    padding: 8px 16px;
    margin-bottom: 14px;
    transition: background 0.4s, border-color 0.4s;
}
.pay-dot  { width: 7px; height: 7px; border-radius: 50%; background: var(--amber); flex-shrink: 0; }
.pay-text { font-size: 13px; color: var(--text2); flex: 1; }
.pay-text strong { color: var(--amber); }
.pay-cycle { font-size: 11px; color: var(--text3); white-space: nowrap; }

/* Safe to Spend hero */
.hero-card {
    background: linear-gradient(135deg, var(--hero-start) 0%, var(--card) 65%);
    border: 1px solid rgba(124,110,250,0.3);
    border-radius: 20px;
    padding: 20px;
    margin-bottom: 12px;
    position: relative;
    overflow: hidden;
    transition: background 0.4s, border-color 0.4s;
}
.hero-card::before {
    content: '';
    position: absolute;
    top: -50px; right: -50px;
    width: 180px; height: 180px;
    background: radial-gradient(circle, rgba(124,110,250,0.18) 0%, transparent 70%);
    pointer-events: none;
}
.hero-label {
    font-size: 11px;
    font-weight: 700;
    color: var(--brand);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 4px;
}
.hero-amount {
    font-size: 48px;
    font-weight: 800;
    color: var(--text);
    letter-spacing: -2.5px;
    line-height: 1;
    margin-bottom: 3px;
}
.hero-amount .dollar {
    font-size: 24px;
    font-weight: 600;
    color: var(--text2);
    vertical-align: top;
    margin-top: 10px;
    display: inline-block;
}
.hero-sub { font-size: 12px; color: var(--text2); margin-bottom: 14px; }
.progress-labels { display: flex; justify-content: space-between; }
.progress-labels span { font-size: 10px; color: var(--text3); }

/* Two-col grid */
.two-col {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
}

/* AI Insight card */
.insight-card {
    background: var(--card);
    border: 1px solid rgba(247,200,75,0.25);
    border-radius: 16px;
    padding: 14px 16px;
    display: flex;
    gap: 12px;
    align-items: flex-start;
    transition: background 0.4s;
}
.insight-icon {
    width: 36px; height: 36px;
    border-radius: 10px;
    background: var(--amber-light);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 17px;
    flex-shrink: 0;
}
.insight-tag {
    font-size: 10px;
    font-weight: 700;
    color: var(--amber);
    text-transform: uppercase;
    letter-spacing: 0.8px;
    margin-bottom: 4px;
}
.insight-text { font-size: 13px; color: var(--text); line-height: 1.5; font-weight: 500; }
.insight-cta  { font-size: 12px; font-weight: 600; color: var(--brand); margin-top: 6px; cursor: pointer; }

/* Tier 2 */
.tier-heading { font-size: 20px; font-weight: 700; color: var(--text); letter-spacing: -0.5px; padding-top: 10px; margin-bottom: 2px; }
.tier-sub     { font-size: 12px; color: var(--text2); margin-bottom: 4px; }

/* Burn rate */
.burn-item { padding: 13px 16px; border-bottom: 1px solid var(--border); }
.burn-item:last-child { border-bottom: none; }
.burn-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
.burn-cat { display: flex; align-items: center; gap: 8px; font-size: 14px; font-weight: 600; color: var(--text); }
.burn-right { text-align: right; }
.burn-spent  { font-size: 14px; font-weight: 700; color: var(--text); }
.burn-budget { font-size: 10px; color: var(--text2); }
.burn-bottom { display: flex; justify-content: space-between; align-items: center; margin-top: 6px; }
.burn-pct    { font-size: 10px; color: var(--text3); }
.progress-wrap { position: relative; }

/* Subscription card */
.sub-card {
    background: linear-gradient(135deg, var(--sub-start) 0%, var(--card) 100%);
    border: 1px solid rgba(78,205,196,0.2);
    border-radius: 16px;
    padding: 18px;
    transition: background 0.4s;
}
.sub-top  { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 14px; }
.sub-head-label { font-size: 10px; font-weight: 700; color: var(--teal); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 4px; }
.sub-count { font-size: 30px; font-weight: 800; color: var(--text); letter-spacing: -1px; }
.sub-count span { font-size: 14px; font-weight: 500; color: var(--text2); letter-spacing: 0; }
.sub-grid  { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.sub-metric { background: rgba(255,255,255,0.05); border-radius: 10px; padding: 10px 12px; }
.sub-metric-label { font-size: 10px; color: var(--text2); margin-bottom: 3px; }
.sub-metric-value { font-size: 19px; font-weight: 700; letter-spacing: -0.5px; }

/* Health cards */
.health-pair { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
.health-card { background: var(--card); border: 1px solid var(--border); border-radius: 16px; padding: 16px; transition: background 0.4s, border-color 0.4s; }
.health-icon  { font-size: 20px; margin-bottom: 8px; }
.health-label { font-size: 10px; font-weight: 700; color: var(--text2); text-transform: uppercase; letter-spacing: 0.7px; margin-bottom: 4px; }
.health-value { font-size: 28px; font-weight: 800; color: var(--text); letter-spacing: -1px; line-height: 1; }
.health-unit  { font-size: 11px; color: var(--text2); margin-top: 3px; }

/* Lifestyle creep */
.creep-card { background: var(--card); border: 1px solid var(--border); border-radius: 16px; padding: 18px; transition: background 0.4s, border-color 0.4s; }
.creep-top  { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 14px; }
.creep-building-label { font-size: 10px; font-weight: 700; color: var(--brand); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 4px; }
.creep-status { font-size: 15px; font-weight: 700; color: var(--text); }
.creep-desc   { font-size: 12px; color: var(--text2); line-height: 1.6; margin-top: 10px; }
.creep-desc strong { color: var(--brand); }

/* Category % */
.cat-item  { display: flex; align-items: center; gap: 10px; padding: 11px 16px; border-bottom: 1px solid var(--border); }
.cat-item:last-child { border-bottom: none; }
.cat-emoji { font-size: 14px; width: 20px; text-align: center; }
.cat-name  { font-size: 13px; font-weight: 500; color: var(--text); flex: 1; }
.cat-bar   { width: 80px; }
.cat-track { height: 4px; background: rgba(255,255,255,0.08); border-radius: 2px; overflow: hidden; }
.cat-fill  { height: 100%; border-radius: 2px; }
.cat-pct   { font-size: 12px; font-weight: 700; color: var(--text); width: 30px; text-align: right; }

/* Mini bar chart */
.mini-chart { display: flex; gap: 8px; align-items: flex-end; height: 48px; margin-top: 12px; }
.mini-bar-wrap { flex: 1; display: flex; flex-direction: column; align-items: center; gap: 4px; height: 100%; justify-content: flex-end; }
.mini-bar  { width: 100%; border-radius: 4px 4px 0 0; }
.mini-label { font-size: 10px; color: var(--text2); }
.mini-label.active { color: var(--brand); }

/* ════════════════════════════════════════════════════════
   SCREEN 2: PLAN — GOALS + BUDGETS
   ════════════════════════════════════════════════════════ */

/* Plan screen header */
.screen-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 14px 20px 8px;
    flex-shrink: 0;
}
.screen-title { font-size: 22px; font-weight: 800; letter-spacing: -0.5px; color: var(--text); }
.header-action { font-size: 14px; font-weight: 600; color: var(--brand); cursor: pointer; }

/* Sub-tab bar */
.subtab-bar {
    display: flex;
    padding: 0 20px;
    border-bottom: 1px solid var(--border);
    flex-shrink: 0;
}
.subtab {
    padding: 8px 0 10px;
    margin-right: 24px;
    font-size: 14px;
    font-weight: 500;
    color: var(--text2);
    cursor: pointer;
    position: relative;
    transition: color 0.2s;
    white-space: nowrap;
}
.subtab.active { font-weight: 700; color: var(--text); }
.subtab.active::after {
    content: '';
    position: absolute;
    bottom: 0; left: 0;
    width: 100%;
    height: 2px;
    background: var(--brand);
    border-radius: 2px 2px 0 0;
}

/* Scrollable tab content */
.tab-scroll {
    flex: 1;
    overflow-y: auto;
    scrollbar-width: none;
}
.tab-scroll::-webkit-scrollbar { display: none; }

.tab-pane { display: none; padding: 12px 20px 16px; }
.tab-pane.active { display: block; }

/* Goal cards — type accent system */
.goal-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 15px 15px 14px;
    margin-bottom: 10px;
    position: relative;
    transition: background 0.4s, border-color 0.4s;
}
.goal-card::before {
    content: '';
    position: absolute;
    left: 0; top: 0; bottom: 0;
    width: 3px;
    border-radius: 16px 0 0 16px;
}
.gc-save::before    { background: var(--brand); }
.gc-spend::before   { background: var(--teal); }
.gc-debt::before    { background: var(--green); }
.goal-card.gc-completed::before { background: var(--text3); opacity: 0.5; }
.goal-card.gc-completed { opacity: 0.55; }

/* Goal header */
.goal-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px; }
.goal-header-left { display: flex; align-items: center; gap: 10px; }
.goal-icon {
    width: 34px; height: 34px;
    border-radius: 9px;
    display: flex; align-items: center; justify-content: center;
    font-size: 16px; flex-shrink: 0;
}
.gc-save  .goal-icon { background: var(--brand-light); }
.gc-spend .goal-icon { background: var(--teal-light); }
.gc-debt  .goal-icon { background: var(--green-light); }
.gc-completed .goal-icon { background: rgba(255,255,255,0.06); }

.goal-name       { font-size: 15px; font-weight: 700; color: var(--text); line-height: 1.2; }
.goal-type-label { font-size: 11px; color: var(--text2); margin-top: 1px; }

/* Goal amounts */
.goal-amounts {
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    margin-bottom: 6px;
}
.goal-amount-main { font-size: 22px; font-weight: 800; letter-spacing: -0.8px; color: var(--text); }
.goal-amount-main .unit { font-size: 13px; font-weight: 500; color: var(--text2); letter-spacing: 0; }
.goal-pct-brand { font-size: 16px; font-weight: 700; color: var(--brand); }
.goal-pct-teal  { font-size: 16px; font-weight: 700; color: var(--teal); }
.goal-pct-green { font-size: 16px; font-weight: 700; color: var(--green); }

/* Bar labels */
.bar-labels { display: flex; justify-content: space-between; margin-top: 4px; }
.bar-lbl    { font-size: 11px; color: var(--text2); }
.bar-val-red    { font-size: 11px; font-weight: 600; color: var(--red); }
.bar-val-green  { font-size: 11px; font-weight: 600; color: var(--green); }

/* Goal footer */
.goal-footer { display: flex; justify-content: space-between; align-items: center; margin-top: 10px; }
.goal-footer-lbl { font-size: 11px; color: var(--text2); }
.goal-footer-val { font-size: 12px; font-weight: 600; color: var(--text); }

/* Streak */
.streak-row {
    display: flex;
    align-items: center;
    gap: 6px;
    margin-top: 10px;
    padding-top: 10px;
    border-top: 1px solid var(--border);
}
.streak-text-amber { font-size: 12px; font-weight: 600; color: var(--amber); }
.streak-best       { font-size: 11px; color: var(--text3); margin-left: auto; }

/* Inline pill */
.inline-pill {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background: rgba(255,255,255,0.04);
    border-radius: 20px;
    padding: 4px 10px;
    font-size: 11px;
    color: var(--text2);
    margin-top: 8px;
}
.inline-pill-teal  { background: rgba(78,205,196,0.08);  color: var(--teal); }
.inline-pill-green { background: rgba(81,207,102,0.08);  color: var(--green); }

/* Add goal / budget buttons */
.add-btn {
    width: 100%;
    height: 48px;
    border: 1px dashed rgba(124,110,250,0.3);
    border-radius: 12px;
    background: transparent;
    color: var(--brand);
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    font-family: inherit;
    margin-top: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    transition: background 0.15s;
}
.add-btn:hover { background: var(--brand-light); }

/* Milestone card */
.milestone-card {
    background: var(--card);
    border: 1px solid rgba(124,110,250,0.2);
    border-radius: 16px;
    padding: 16px;
    margin-bottom: 12px;
    transition: background 0.4s;
}
.milestone-top { display: flex; align-items: center; gap: 12px; margin-bottom: 10px; }
.milestone-icon {
    width: 36px; height: 36px;
    border-radius: 10px;
    background: var(--brand-light);
    display: flex; align-items: center; justify-content: center;
    font-size: 17px; flex-shrink: 0;
}
.ai-tag { font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; color: var(--brand); }
.milestone-title { font-size: 14px; font-weight: 700; color: var(--text); margin-top: 1px; }
.milestone-bar-track { height: 8px; background: rgba(255,255,255,0.08); border-radius: 4px; overflow: hidden; margin: 10px 0 6px; }
.milestone-bar-fill  { height: 100%; background: linear-gradient(90deg, var(--brand), #9C8FFF); border-radius: 4px; }
.milestone-labels    { display: flex; justify-content: space-between; margin-bottom: 8px; }
.ms-lbl-left  { font-size: 12px; color: var(--text2); }
.ms-lbl-right { font-size: 12px; font-weight: 600; color: var(--brand); }
.milestone-sub { font-size: 12px; color: var(--text2); line-height: 1.5; }
.milestone-cta { font-size: 13px; font-weight: 600; color: var(--brand); margin-top: 10px; display: block; cursor: pointer; }

/* AI Suggestion card (Plan) */
.plan-ai-card {
    background: var(--card);
    border: 1px solid rgba(124,110,250,0.25);
    border-radius: 16px;
    padding: 16px;
    margin-bottom: 12px;
    display: none;
    transition: background 0.4s;
}
.plan-ai-card.visible { display: block; }
.ai-card-top { display: flex; align-items: flex-start; gap: 12px; margin-bottom: 10px; }
.ai-card-icon { width: 36px; height: 36px; border-radius: 10px; background: var(--brand-light); display: flex; align-items: center; justify-content: center; font-size: 17px; flex-shrink: 0; }
.ai-card-type { font-size: 12px; color: var(--text2); margin-top: 1px; }
.ai-insight-text  { font-size: 14px; font-weight: 600; color: var(--text); line-height: 1.5; margin-bottom: 4px; }
.ai-preview-text  { font-size: 12px; color: var(--text2); line-height: 1.5; background: rgba(255,255,255,0.04); border-radius: 8px; padding: 8px 10px; margin-bottom: 12px; }
.ai-actions { display: flex; gap: 8px; }
.btn-primary {
    background: var(--brand); color: #fff;
    border: none; padding: 8px 16px; border-radius: 20px;
    font-size: 13px; font-weight: 600; cursor: pointer; font-family: inherit;
    transition: background 0.4s;
}
.btn-ghost {
    background: transparent; color: var(--text2);
    border: 1px solid var(--border); padding: 8px 12px; border-radius: 20px;
    font-size: 13px; font-weight: 500; cursor: pointer; font-family: inherit;
}

/* Completed section */
.completed-toggle {
    display: flex; align-items: center; gap: 10px;
    padding: 12px 0; cursor: pointer;
    border-top: 1px solid var(--border); margin-top: 6px;
}
.completed-label { font-size: 11px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.8px; color: var(--text2); }
.completed-count { background: var(--brand-light); color: var(--brand); border-radius: 20px; padding: 2px 8px; font-size: 10px; font-weight: 700; }
.completed-chevron { margin-left: auto; font-size: 12px; color: var(--text3); transition: transform 0.25s ease; }
.completed-chevron.open { transform: rotate(180deg); }
.completed-goals { display: none; }
.completed-goals.visible { display: block; }

/* Budgets tab */
.period-banner {
    background: rgba(255,255,255,0.04);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 10px 14px;
    margin-bottom: 12px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.period-day { font-size: 13px; font-weight: 500; color: var(--text); }
.period-pct { font-size: 12px; color: var(--text2); }

.budget-summary { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 16px; }
.bsc { background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 14px; transition: background 0.4s, border-color 0.4s; }
.bsc-label  { font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.7px; color: var(--text2); margin-bottom: 4px; }
.bsc-amount { font-size: 22px; font-weight: 800; letter-spacing: -0.8px; color: var(--text); }

.budget-list { background: var(--card); border: 1px solid var(--border); border-radius: 16px; overflow: hidden; margin-bottom: 12px; transition: background 0.4s, border-color 0.4s; }
.budget-row { padding: 14px 16px; border-bottom: 1px solid var(--border); cursor: pointer; transition: background 0.1s; }
.budget-row:last-child { border-bottom: none; }
.budget-row:hover { background: rgba(255,255,255,0.02); }
.budget-row-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 7px; }
.budget-cat { display: flex; align-items: center; gap: 8px; font-size: 14px; font-weight: 600; color: var(--text); }
.budget-goal-dot { width: 6px; height: 6px; border-radius: 50%; background: var(--teal); flex-shrink: 0; }
.budget-amounts { display: flex; align-items: baseline; gap: 3px; }
.budget-spent { font-size: 14px; font-weight: 700; color: var(--text); }
.budget-limit { font-size: 11px; color: var(--text2); }
.budget-row-bottom { display: flex; justify-content: space-between; align-items: center; margin-top: 6px; }
.budget-pct { font-size: 10px; color: var(--text3); }

/* ════════════════════════════════════════════════════════
   SCREEN 3: CALENDAR
   ════════════════════════════════════════════════════════ */

/* Month nav bar */
.cal-month-nav {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 4px 20px 8px;
    flex-shrink: 0;
}
.cal-nav-btn {
    width: 32px; height: 32px;
    border: 1px solid var(--border);
    border-radius: 50%;
    background: var(--card);
    color: var(--text2);
    font-size: 18px;
    cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    transition: border-color 0.15s, color 0.15s;
    font-family: inherit;
}
.cal-nav-btn:hover { border-color: var(--brand); color: var(--brand); }
.cal-nav-btn:disabled { opacity: 0.3; pointer-events: none; }
.cal-month-title { font-size: 18px; font-weight: 800; color: var(--text); letter-spacing: -0.5px; }

/* Summary strip */
.cal-summary-strip {
    display: flex;
    background: var(--card);
    border-top: 1px solid var(--border);
    border-bottom: 1px solid var(--border);
    flex-shrink: 0;
    transition: background 0.4s;
}
.cal-sum-cell {
    flex: 1; padding: 10px 0; text-align: center;
    border-right: 1px solid var(--border);
}
.cal-sum-cell:last-child { border-right: none; }
.cal-sum-label { font-size: 10px; color: var(--text2); text-transform: uppercase; letter-spacing: 0.5px; font-weight: 600; }
.cal-sum-value { font-size: 16px; font-weight: 800; color: var(--text); letter-spacing: -0.5px; margin-top: 2px; }

/* Weekday headers */
.cal-weekdays {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    padding: 8px 16px 4px;
    flex-shrink: 0;
}
.cal-weekday {
    text-align: center;
    font-size: 10px; font-weight: 700; color: var(--text3);
    text-transform: uppercase; letter-spacing: 0.4px;
}

/* Calendar grid */
.cal-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    grid-auto-rows: 1fr;
    gap: 3px;
    padding: 0 16px 10px;
    flex: 1;
    min-height: 0;
    transition: opacity 0.2s;
}

/* Day cells */
.cal-day {
    border-radius: 10px;
    padding: 6px 5px 5px;
    cursor: pointer;
    position: relative;
    display: flex;
    flex-direction: column;
    transition: background 0.15s;
    border: 1.5px solid transparent;
    overflow: hidden;
}
.cal-day:hover { border-color: var(--border); }
.cal-day.selected { border-color: var(--brand) !important; }
.cal-day.blank { pointer-events: none; opacity: 0; }
.cal-day.future { opacity: 0.65; }

/* Safety tints */
.cal-day.tint-g { background: rgba(81,207,102,0.09); }
.cal-day.tint-a { background: rgba(247,200,75,0.09); }
.cal-day.tint-r { background: rgba(255,107,107,0.10); }
.cal-day.tint-p { background: rgba(139,126,255,0.13); }

/* Date number */
.cal-date-num {
    font-size: 11px; font-weight: 700; color: var(--text2);
    line-height: 1; margin-bottom: 2px; flex-shrink: 0;
}
.cal-day.is-today .cal-date-num {
    background: var(--brand); color: #fff;
    border-radius: 50%;
    width: 20px; height: 20px;
    display: flex; align-items: center; justify-content: center;
    font-size: 11px; font-weight: 700;
}

/* Payday micro-label */
.cal-payday-tag {
    font-size: 8px; font-weight: 700; color: var(--brand);
    text-transform: uppercase; letter-spacing: 0.3px;
    line-height: 1; margin-top: 1px; flex-shrink: 0;
}

/* Amount */
.cal-amount { font-size: 10px; font-weight: 700; color: var(--text); line-height: 1.2; flex-shrink: 0; }
.cal-amount.income { color: var(--brand); font-size: 9px; }

/* Category dots */
.cal-dots { display: flex; gap: 2px; margin-top: auto; flex-wrap: wrap; }
.cal-dot { width: 5px; height: 5px; border-radius: 50%; flex-shrink: 0; }

/* Bill flag (top-right corner) */
.cal-bill-flag {
    position: absolute; top: 4px; right: 4px;
    width: 6px; height: 6px; border-radius: 50%;
    background: var(--amber);
}
.cal-bill-flag.urgent { background: var(--red); }

/* Legend */
.cal-legend {
    display: flex; justify-content: center; gap: 14px;
    padding: 6px 16px 8px; flex-shrink: 0;
}
.cal-legend-item { display: flex; align-items: center; gap: 5px; font-size: 10px; color: var(--text2); }
.cal-legend-swatch { width: 10px; height: 10px; border-radius: 3px; }

/* Calendar day detail sheet */
.cal-sheet-date-hd {
    font-size: 12px; font-weight: 600; color: var(--text2);
    text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 4px;
}
.cal-sheet-total-row {
    display: flex; justify-content: space-between; align-items: center;
    padding: 0 0 14px; border-bottom: 1px solid var(--border); margin-bottom: 12px;
}
.cal-sheet-total-lbl { font-size: 13px; color: var(--text2); }
.cal-sheet-total-amt { font-size: 22px; font-weight: 800; color: var(--text); letter-spacing: -0.8px; }
.cal-sheet-total-amt.income { color: var(--brand); }
.cal-upcoming-hd {
    font-size: 11px; font-weight: 700; text-transform: uppercase;
    letter-spacing: 0.7px; color: var(--text2); margin: 12px 0 8px;
}

/* View toggle bar (Month | Week | Day) */
.cal-view-bar {
    padding: 8px 16px;
    flex-shrink: 0;
}
.cal-view-seg {
    display: flex;
    background: var(--card2);
    border: 1px solid var(--border);
    border-radius: 10px;
    overflow: hidden;
    transition: background 0.4s, border-color 0.4s;
}
.cal-view-btn {
    flex: 1;
    padding: 7px 0;
    border: none;
    border-right: 1px solid var(--border);
    font-size: 13px; font-weight: 500;
    cursor: pointer; font-family: inherit;
    background: transparent; color: var(--text2);
    transition: background 0.15s, color 0.15s, border-color 0.4s;
}
.cal-view-btn:last-child { border-right: none; }
.cal-view-btn.active { background: var(--brand); color: #fff; font-weight: 700; }

/* Week grid */
/* Week view — horizontal tile list */
.cal-week-list {
    display: none;
    flex-direction: column;
    gap: 5px;
    padding: 6px 16px 10px;
    flex: 1; min-height: 0;
    overflow-y: auto;
    scrollbar-width: none;
}
.cal-week-list::-webkit-scrollbar { display: none; }
.cal-week-list.vis { display: flex; }
.cal-week-row {
    display: flex; align-items: center; gap: 14px;
    padding: 11px 14px; border-radius: 13px;
    border: 1.5px solid transparent; cursor: pointer;
    transition: border-color 0.15s; flex-shrink: 0;
}
.cal-week-row:hover    { border-color: var(--border); }
.cal-week-row.selected { border-color: var(--brand); }
.cal-week-row.tint-g { background: rgba(81,207,102,0.09); }
.cal-week-row.tint-a { background: rgba(247,200,75,0.09); }
.cal-week-row.tint-r { background: rgba(255,107,107,0.10); }
.cal-week-row.tint-p { background: rgba(139,126,255,0.13); }
/* Left: date label — DOW is primary, date is secondary */
.cal-week-day-label { width: 46px; flex-shrink: 0; }
.cal-week-dow {
    font-size: 16px; font-weight: 800; color: var(--text);
    text-transform: uppercase; letter-spacing: -0.3px; line-height: 1;
}
.cal-week-date {
    font-size: 12px; font-weight: 600; color: var(--text3);
    line-height: 1; margin-top: 4px;
}
.cal-week-row.is-today .cal-week-dow  { color: var(--brand); }
.cal-week-row.is-today .cal-week-date { color: var(--brand); font-weight: 700; }
/* Center: dots + spend bar */
.cal-week-center { flex: 1; min-width: 0; }
.cal-week-dots { display: flex; gap: 4px; margin-bottom: 7px; }
.cal-week-dot  { width: 7px; height: 7px; border-radius: 50%; flex-shrink: 0; }
.cal-week-bar-row   { display: flex; align-items: center; gap: 8px; }
.cal-week-bar-track {
    flex: 1; height: 3px; background: var(--card2);
    border-radius: 2px; overflow: hidden;
}
.cal-week-bar-fill { height: 100%; border-radius: 2px; }
.cal-week-row.tint-g .cal-week-bar-fill { background: var(--green); }
.cal-week-row.tint-a .cal-week-bar-fill { background: var(--amber); }
.cal-week-row.tint-r .cal-week-bar-fill { background: var(--red); }
.cal-week-bar-pct {
    font-size: 10px; font-weight: 700; color: var(--text3);
    flex-shrink: 0; min-width: 30px; text-align: right;
}
.cal-week-row.tint-g .cal-week-bar-pct { color: var(--green); }
.cal-week-row.tint-a .cal-week-bar-pct { color: var(--amber); }
.cal-week-row.tint-r .cal-week-bar-pct { color: var(--red); }
/* Future day labels */
.cal-week-future-lbl { font-size: 11px; color: var(--text3); line-height: 1.4; }
.cal-week-bill-name  { font-size: 11px; font-weight: 600; color: var(--amber); }
/* Right: amount */
.cal-week-amount {
    font-size: 16px; font-weight: 800; color: var(--text);
    letter-spacing: -0.4px; text-align: right; flex-shrink: 0;
}
.cal-week-amount.future-amt { font-size: 13px; color: var(--amber); font-weight: 700; }
.cal-week-amount.zero-amt   { font-size: 13px; color: var(--text3); font-weight: 600; }

/* Day view */
.cal-day-view {
    display: none; flex: 1; flex-direction: column;
    overflow: hidden;
}
.cal-day-view.vis { display: flex; }
.cal-day-content {
    flex: 1; padding: 14px 20px;
    overflow-y: auto; scrollbar-width: none;
}
.cal-day-content::-webkit-scrollbar { display: none; }
.cal-day-stat-card {
    display: flex; justify-content: space-around;
    background: var(--card); border: 1px solid var(--border);
    border-radius: 14px; padding: 14px 16px; margin-bottom: 14px;
    transition: background 0.4s, border-color 0.4s;
}
.cal-day-stat { text-align: center; }
.cal-day-stat-lbl { font-size: 10px; color: var(--text2); text-transform: uppercase; letter-spacing: 0.5px; font-weight: 600; }
.cal-day-stat-val { font-size: 20px; font-weight: 800; color: var(--text); letter-spacing: -0.6px; margin-top: 3px; }

/* ════════════════════════════════════════════════════════
   PLACEHOLDER SCREENS (Accounts, Insights)
   ════════════════════════════════════════════════════════ */

.placeholder-screen {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 40px 32px;
    text-align: center;
}
.placeholder-icon { font-size: 48px; margin-bottom: 16px; }
.placeholder-title { font-size: 20px; font-weight: 800; letter-spacing: -0.5px; color: var(--text); margin-bottom: 8px; }
.placeholder-desc  { font-size: 13px; color: var(--text2); line-height: 1.7; max-width: 240px; }
.placeholder-badge { display: inline-flex; margin-top: 20px; background: var(--brand-light); color: var(--brand); border-radius: 20px; padding: 4px 14px; font-size: 11px; font-weight: 700; letter-spacing: 0.5px; text-transform: uppercase; }

/* ════════════════════════════════════════════════════════
   BOTTOM SHEET
   ════════════════════════════════════════════════════════ */

.sheet-backdrop {
    position: absolute; inset: 0;
    background: rgba(0,0,0,0);
    z-index: 35;
    display: none;
    border-radius: 44px;
    overflow: hidden;
    transition: background 0.35s;
}
.sheet-backdrop.visible { display: block; background: rgba(0,0,0,0.6); }

.bottom-sheet {
    position: absolute; bottom: 0; left: 0; right: 0;
    background: var(--card);
    border-radius: 20px 20px 0 0;
    padding: 8px 20px 40px;
    z-index: 36;
    transform: translateY(100%);
    transition: transform 0.35s cubic-bezier(0.25, 0.46, 0.45, 0.94), background 0.4s;
}
.bottom-sheet.open { transform: translateY(0); }
.sheet-handle { width: 32px; height: 4px; background: rgba(255,255,255,0.2); border-radius: 2px; margin: 12px auto 20px; }
.sheet-title  { font-size: 17px; font-weight: 800; letter-spacing: -0.5px; color: var(--text); margin-bottom: 6px; }
.sheet-sub    { font-size: 13px; color: var(--text2); margin-bottom: 20px; }

.type-option {
    display: flex; align-items: center; gap: 14px;
    background: rgba(255,255,255,0.04);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 14px 16px; margin-bottom: 10px;
    cursor: pointer;
    transition: background 0.15s;
    position: relative;
}
.type-option:hover { background: rgba(255,255,255,0.07); }
.type-option.to-save   { border-left: 3px solid var(--brand); }
.type-option.to-spend  { border-left: 3px solid var(--teal); }
.type-option.to-debt   { border-left: 3px solid var(--green); }
.type-icon { width: 40px; height: 40px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 20px; flex-shrink: 0; }
.to-save  .type-icon { background: var(--brand-light); }
.to-spend .type-icon { background: var(--teal-light); }
.to-debt  .type-icon { background: var(--green-light); }
.type-name { font-size: 15px; font-weight: 700; color: var(--text); }
.type-desc { font-size: 12px; color: var(--text2); line-height: 1.4; margin-top: 2px; }
.type-chevron { font-size: 16px; color: var(--text3); margin-left: auto; }

/* ════════════════════════════════════════════════════════
   AI CHAT OVERLAY
   ════════════════════════════════════════════════════════ */

.chat-overlay {
    position: absolute; inset: 0;
    background: var(--bg);
    border-radius: 44px;
    z-index: 40;
    display: none;
    flex-direction: column;
    overflow: hidden;
    transition: background 0.4s;
}
.chat-overlay.open { display: flex; }

.chat-header {
    padding: 58px 20px 14px;
    display: flex; justify-content: space-between; align-items: center;
    border-bottom: 1px solid var(--border);
    flex-shrink: 0;
}
.chat-ai-label { font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; color: var(--brand); }
.chat-title    { font-size: 17px; font-weight: 800; letter-spacing: -0.5px; color: var(--text); }
.chat-close {
    width: 30px; height: 30px; border-radius: 50%;
    background: rgba(255,255,255,0.08);
    display: flex; align-items: center; justify-content: center;
    font-size: 14px; cursor: pointer; color: var(--text2);
    border: none; font-family: inherit;
}

.chat-messages { flex: 1; overflow-y: auto; padding: 16px 20px; scrollbar-width: none; }
.chat-messages::-webkit-scrollbar { display: none; }

.chat-msg { margin-bottom: 12px; max-width: 84%; }
.chat-msg.user { margin-left: auto; }
.msg-bubble    { padding: 10px 14px; border-radius: 16px; font-size: 13px; line-height: 1.5; }
.ai .msg-bubble   { background: var(--card2); color: var(--text); border-radius: 4px 16px 16px 16px; }
.user .msg-bubble { background: var(--brand);  color: #fff; border-radius: 16px 4px 16px 16px; }
.msg-ai-tag { font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.8px; color: var(--brand); margin-bottom: 4px; }

.chat-suggestions { padding: 0 20px 12px; flex-shrink: 0; }
.chat-sugg-label  { font-size: 11px; color: var(--text2); margin-bottom: 8px; }
.chat-chips { display: flex; flex-wrap: wrap; gap: 8px; }
.chat-chip {
    background: var(--card); border: 1px solid var(--border); border-radius: 20px;
    padding: 6px 12px; font-size: 12px; color: var(--text);
    cursor: pointer; font-family: inherit; transition: border-color 0.15s;
}
.chat-chip:hover { border-color: var(--brand); color: var(--brand); }

.chat-input-row { padding: 12px 20px 32px; display: flex; gap: 10px; border-top: 1px solid var(--border); flex-shrink: 0; }
.chat-input {
    flex: 1; background: var(--card2);
    border: 1px solid var(--border); border-radius: 20px;
    padding: 10px 16px; font-size: 14px; color: var(--text);
    font-family: inherit; outline: none;
}
.chat-input::placeholder { color: var(--text3); }
.chat-input:focus { border-color: rgba(124,110,250,0.4); }
.chat-send {
    width: 40px; height: 40px; border-radius: 50%;
    background: var(--brand); border: none;
    display: flex; align-items: center; justify-content: center;
    font-size: 16px; cursor: pointer; flex-shrink: 0; color: #fff;
    transition: background 0.4s;
}

/* ════════════════════════════════════════════════════════
   ARROW CONTROLS (below phone)
   ════════════════════════════════════════════════════════ */
.arrow-row {
    display: flex; align-items: center; gap: 14px;
}
.arrow-btn {
    width: 38px; height: 38px;
    background: var(--card); border: 1px solid var(--border);
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    cursor: pointer; color: var(--text2); font-size: 16px;
    user-select: none; transition: all 0.2s;
}
.arrow-btn:hover { border-color: var(--brand); color: var(--brand); background: var(--brand-light); }
.arrow-label { font-size: 12px; color: var(--text2); }
.arrow-row-hidden { display: none; }

/* ════════════════════════════════════════════════
   INSIGHTS SCREEN
════════════════════════════════════════════════ */
.ins-period-bar { display: flex; gap: 8px; margin-bottom: 14px; flex-wrap: wrap; }
.ins-period-chip {
    padding: 5px 13px; border-radius: 20px;
    font-size: 12px; font-weight: 600;
    border: 1px solid var(--border); color: var(--text2);
    cursor: pointer; transition: all 0.2s; white-space: nowrap;
}
.ins-period-chip.active { background: var(--brand-light); color: var(--brand); border-color: var(--brand); }

.ins-kpi-row { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; margin-bottom: 14px; }
.ins-kpi-card {
    background: var(--card); border: 1px solid var(--border);
    border-radius: 14px; padding: 11px 12px;
    transition: background 0.4s, border-color 0.4s;
}
.ins-kpi-label { font-size: 9px; font-weight: 700; color: var(--text3); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 3px; }
.ins-kpi-value { font-size: 16px; font-weight: 800; color: var(--text); letter-spacing: -0.5px; line-height: 1.1; }
.ins-kpi-sub   { font-size: 9px; color: var(--text3); margin-top: 2px; }

.ins-dual-chart { display: flex; gap: 5px; align-items: flex-end; height: 80px; margin: 12px 0 4px; }
.ins-month-col  { flex: 1; display: flex; flex-direction: column; align-items: center; gap: 3px; height: 100%; justify-content: flex-end; }
.ins-bar-pair   { display: flex; gap: 2px; align-items: flex-end; width: 100%; }
.ins-bar-i      { flex: 1; border-radius: 3px 3px 0 0; background: var(--brand); opacity: 0.65; }
.ins-bar-s      { flex: 1; border-radius: 3px 3px 0 0; background: var(--red); opacity: 0.75; }
.ins-chart-label        { font-size: 9px; color: var(--text3); }
.ins-chart-label.active { color: var(--brand); font-weight: 700; }
.ins-chart-legend { display: flex; gap: 14px; margin-top: 10px; }
.ins-legend-item  { display: flex; align-items: center; gap: 5px; font-size: 11px; color: var(--text2); }
.ins-legend-dot   { width: 8px; height: 8px; border-radius: 2px; flex-shrink: 0; }

.ins-creep-detail { margin-top: 12px; }
.ins-creep-row {
    display: flex; justify-content: space-between; align-items: center;
    padding: 10px 0; border-bottom: 1px solid var(--border);
}
.ins-creep-row:last-child { border-bottom: none; }
.ins-creep-row-label { font-size: 12px; color: var(--text2); }
.ins-creep-row-val   { font-size: 14px; font-weight: 700; }

.ins-merchant-row {
    display: flex; align-items: center; gap: 12px;
    padding: 10px 16px; border-bottom: 1px solid var(--border);
}
.ins-merchant-row:last-child { border-bottom: none; }
.ins-merchant-name  { font-size: 13px; font-weight: 600; color: var(--text); width: 90px; flex-shrink: 0; }
.ins-merchant-bar-wrap  { flex: 1; }
.ins-merchant-bar-track { height: 4px; background: rgba(255,255,255,0.08); border-radius: 2px; overflow: hidden; }
.ins-merchant-bar-fill  { height: 100%; border-radius: 2px; background: var(--brand); }
.ins-merchant-amount { font-size: 13px; font-weight: 700; color: var(--text); flex-shrink: 0; width: 52px; text-align: right; }

.ins-pay-row {
    display: flex; align-items: center; gap: 12px;
    padding: 11px 16px; border-bottom: 1px solid var(--border);
}
.ins-pay-row:last-child { border-bottom: none; }

.ins-proj-card {
    background: linear-gradient(135deg, var(--hero-start) 0%, var(--card) 65%);
    border: 1px solid rgba(124,110,250,0.3);
    border-radius: 20px; padding: 18px 20px; margin-bottom: 12px;
    position: relative; overflow: hidden;
    transition: background 0.4s, border-color 0.4s;
}
.ins-proj-card::before {
    content: ''; position: absolute; top: -50px; right: -50px;
    width: 180px; height: 180px;
    background: radial-gradient(circle, rgba(124,110,250,0.12) 0%, transparent 70%);
    pointer-events: none;
}
.ins-proj-label { font-size: 11px; font-weight: 700; color: var(--brand); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 4px; }
.ins-proj-amount { font-size: 40px; font-weight: 800; letter-spacing: -2px; line-height: 1; margin-bottom: 12px; }
.ins-proj-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; }
.ins-proj-cell { background: rgba(255,255,255,0.04); border-radius: 10px; padding: 8px 10px; }
.ins-proj-cell-label { font-size: 9px; font-weight: 600; color: var(--text3); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 2px; }
.ins-proj-cell-val { font-size: 14px; font-weight: 700; color: var(--text); }

.ins-goal-row {
    display: flex; align-items: center; gap: 12px;
    padding: 12px 16px; border-bottom: 1px solid var(--border);
}
.ins-goal-row:last-child { border-bottom: none; }
.ins-goal-info { flex: 1; min-width: 0; }
.ins-goal-name { font-size: 13px; font-weight: 600; color: var(--text); margin-bottom: 4px; }
.ins-goal-bar-row { display: flex; align-items: center; gap: 8px; }
.ins-goal-eta { font-size: 11px; font-weight: 700; color: var(--brand); flex-shrink: 0; text-align: right; }

.ins-risk-item {
    display: flex; gap: 10px; align-items: flex-start;
    padding: 11px 16px; border-bottom: 1px solid var(--border);
}
.ins-risk-item:last-child { border-bottom: none; }
.ins-risk-dot { width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0; margin-top: 4px; }
.ins-risk-text { font-size: 12px; color: var(--text2); line-height: 1.5; }

/* ════════════════════════════════════════════════
   ACCOUNTS SCREEN
════════════════════════════════════════════════ */
@keyframes acctPulse {
    0%, 100% { opacity: 1; transform: scale(1); }
    50%       { opacity: 0.4; transform: scale(0.7); }
}
.acct-net-card {
    background: linear-gradient(135deg, var(--hero-start) 0%, var(--card) 65%);
    border: 1px solid rgba(124,110,250,0.3);
    border-radius: 20px;
    padding: 18px 20px;
    margin-bottom: 12px;
    position: relative;
    overflow: hidden;
    transition: background 0.4s, border-color 0.4s;
}
.acct-net-card::before {
    content: '';
    position: absolute;
    top: -50px; right: -50px;
    width: 180px; height: 180px;
    background: radial-gradient(circle, rgba(124,110,250,0.15) 0%, transparent 70%);
    pointer-events: none;
}
.acct-net-label {
    font-size: 11px; font-weight: 700; color: var(--brand);
    text-transform: uppercase; letter-spacing: 1px; margin-bottom: 4px;
}
.acct-net-amount {
    font-size: 42px; font-weight: 800; color: var(--green);
    letter-spacing: -2px; line-height: 1; margin-bottom: 12px;
}
.acct-net-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
.acct-net-cell {
    background: rgba(255,255,255,0.04);
    border-radius: 10px; padding: 8px 10px;
}
.acct-net-cell-label {
    font-size: 10px; font-weight: 600; color: var(--text3);
    text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 2px;
}
.acct-net-cell-val { font-size: 16px; font-weight: 700; color: var(--text); }
.acct-live-dot {
    display: inline-block;
    width: 6px; height: 6px; border-radius: 50%;
    background: var(--green);
    animation: acctPulse 2s ease-in-out infinite;
    flex-shrink: 0;
}
.acct-review-item {
    max-height: 200px; overflow: hidden;
    transition: max-height 0.32s ease, opacity 0.32s ease, padding 0.32s ease;
    border-bottom: 1px solid var(--border);
}
.acct-review-item:last-child { border-bottom: none; }
.acct-review-item.removing { opacity: 0; max-height: 0; padding: 0; }
.acct-review-inner {
    display: flex; align-items: flex-start; gap: 12px;
    padding: 12px 16px 8px;
}
.acct-review-actions {
    display: flex; gap: 8px;
    padding: 0 16px 10px; align-items: center;
}
.acct-approve-btn {
    display: flex; align-items: center; gap: 5px;
    padding: 6px 14px; border-radius: 20px; border: none;
    background: var(--green-light); color: var(--green);
    font-size: 12px; font-weight: 700; cursor: pointer; transition: all 0.2s;
}
.acct-approve-btn:hover { background: var(--green); color: #fff; }
.acct-wrong-btn {
    display: flex; align-items: center; gap: 5px;
    padding: 6px 14px; border-radius: 20px;
    border: 1px solid var(--border); background: transparent;
    color: var(--text2); font-size: 12px; font-weight: 700;
    cursor: pointer; transition: all 0.2s;
}
.acct-wrong-btn:hover { background: var(--red-light); color: var(--red); border-color: var(--red); }
.acct-ai-pill {
    display: inline-flex; align-items: center; gap: 4px;
    padding: 2px 8px; border-radius: 20px;
    background: var(--brand-light); color: var(--brand);
    font-size: 10px; font-weight: 700;
}
.acct-conf-high {
    display: inline-flex; align-items: center;
    padding: 2px 7px; border-radius: 20px;
    background: var(--green-light); color: var(--green);
    font-size: 10px; font-weight: 700;
}
.acct-conf-medium {
    display: inline-flex; align-items: center;
    padding: 2px 7px; border-radius: 20px;
    background: var(--amber-light); color: var(--amber);
    font-size: 10px; font-weight: 700;
}
.acct-milestone-banner {
    background: var(--card);
    border: 1px solid rgba(124,110,250,0.3);
    border-radius: 16px; padding: 14px 16px; margin-bottom: 12px;
    transition: background 0.4s, border-color 0.4s;
}
.acct-milestone-title { font-size: 13px; font-weight: 700; color: var(--text); margin-bottom: 2px; }
.acct-milestone-sub   { font-size: 11px; color: var(--text2); margin-bottom: 10px; }
.acct-empty-state {
    display: none; flex-direction: column;
    align-items: center; justify-content: center;
    padding: 40px 20px; text-align: center; gap: 8px;
}
.acct-empty-state.visible { display: flex; }
.acct-empty-icon  { font-size: 40px; margin-bottom: 4px; }
.acct-empty-title { font-size: 17px; font-weight: 700; color: var(--text); }
.acct-empty-sub   { font-size: 13px; color: var(--text2); line-height: 1.5; }
.acct-cat-grid {
    display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px;
    padding: 0 4px;
}
.acct-cat-option {
    display: flex; flex-direction: column; align-items: center; gap: 6px;
    padding: 12px 8px; border-radius: 14px;
    border: 1px solid var(--border); background: var(--card);
    cursor: pointer; transition: all 0.2s; text-align: center;
}
.acct-cat-option:hover { background: var(--brand-light); border-color: var(--brand); }
.acct-cat-icon { font-size: 22px; }
.acct-cat-name { font-size: 10px; font-weight: 600; color: var(--text2); line-height: 1.2; }
.acct-rule-row {
    display: flex; align-items: center; gap: 12px;
    padding: 12px 16px; border-bottom: 1px solid var(--border);
}
.acct-rule-row:last-child { border-bottom: none; }
.acct-rule-info    { flex: 1; min-width: 0; }
.acct-rule-merchant { font-size: 13px; font-weight: 600; color: var(--text); }
.acct-rule-arrow   { font-size: 11px; color: var(--text3); margin: 2px 0; }
.acct-toggle       { display: flex; align-items: center; }
.acct-toggle-track {
    width: 34px; height: 20px; border-radius: 10px;
    background: var(--green); position: relative; flex-shrink: 0;
}
.acct-toggle-thumb {
    position: absolute; top: 3px; right: 3px;
    width: 14px; height: 14px; border-radius: 50%;
    background: #fff; box-shadow: 0 1px 3px rgba(0,0,0,0.3);
}
.acct-delete-btn {
    width: 28px; height: 28px; border-radius: 50%;
    border: none; background: rgba(255,255,255,0.05); color: var(--text3);
    font-size: 14px; cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    transition: all 0.2s; flex-shrink: 0;
}
.acct-delete-btn:hover { background: var(--red-light); color: var(--red); }
.acct-link-btn {
    display: flex; align-items: center; justify-content: center;
    width: 100%; padding: 13px; border-radius: 14px;
    border: 1.5px dashed var(--brand); background: transparent;
    color: var(--brand); font-size: 14px; font-weight: 700;
    cursor: pointer; transition: all 0.2s; margin-top: 10px;
    box-sizing: border-box;
}
.acct-link-btn:hover { background: var(--brand-light); }
.acct-info-card {
    background: var(--brand-light);
    border: 1px solid rgba(124,110,250,0.2);
    border-radius: 14px; padding: 13px 15px; margin-top: 10px;
    font-size: 12px; color: var(--text2); line-height: 1.5;
}
.acct-info-card strong { color: var(--brand); }

</style>
</head>
<body>
<div class="page-wrapper">

<!-- ════════════════════════════════════════════════════════
     SIDEBAR
════════════════════════════════════════════════════════ -->
<div class="sidebar">

    <div class="sidebar-logo">Totem <span>App</span></div>
    <div class="sidebar-tagline">Full app prototype · Click the nav below or use the phone's bottom bar to switch screens.</div>

    <!-- Screen navigator -->
    <div class="sb-section-label">Navigate</div>

    <div class="sb-nav-item active" id="sb-home" onclick="navigate('home')">
        <div class="sb-nav-icon"><svg viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg></div>
        <span class="sb-nav-label">Home — Dashboard</span>
    </div>
    <div class="sb-nav-item" id="sb-plan" onclick="navigate('plan')">
        <div class="sb-nav-icon"><svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14l-5-5 1.41-1.41L12 14.17l7.59-7.59L21 8l-9 9z"/></svg></div>
        <span class="sb-nav-label">Plan — Goals + Budgets</span>
    </div>
    <div class="sb-nav-item" id="sb-calendar" onclick="navigate('calendar')">
        <div class="sb-nav-icon"><svg viewBox="0 0 24 24"><path d="M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"/></svg></div>
        <span class="sb-nav-label">Calendar</span>
    </div>
    <div class="sb-nav-item" id="sb-accounts" onclick="navigate('accounts')">
        <div class="sb-nav-icon"><svg viewBox="0 0 24 24"><path d="M4 10v7h3v-7H4zm6 0v7h3v-7h-3zM2 22h19v-3H2v3zm14-12v7h3v-7h-3zM11.5 1L2 6v2h19V6l-9.5-5z"/></svg></div>
        <span class="sb-nav-label">Accounts</span>
    </div>
    <div class="sb-nav-item" id="sb-insights" onclick="navigate('insights')">
        <div class="sb-nav-icon"><svg viewBox="0 0 24 24"><path d="M3.5 18.49l6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z"/></svg></div>
        <span class="sb-nav-label">Insights</span>
    </div>

    <div class="sb-divider"></div>

    <!-- Theme switcher -->
    <div class="sb-section-label">Theme</div>
    <div class="theme-grid">
        <button class="theme-btn active" id="t-midnight" onclick="setTheme('midnight')">
            <div class="theme-swatch" style="background:linear-gradient(135deg,#060B18,#0E1525)"></div>
            <div class="theme-btn-label">Midnight</div>
        </button>
        <button class="theme-btn" id="t-oled" onclick="setTheme('oled')">
            <div class="theme-swatch" style="background:linear-gradient(135deg,#000,#0C0C12)"></div>
            <div class="theme-btn-label">OLED</div>
        </button>
        <button class="theme-btn" id="t-light" onclick="setTheme('light')">
            <div class="theme-swatch" style="background:linear-gradient(135deg,#F0F2F8,#FFFFFF);border:1px solid rgba(0,0,0,0.08)"></div>
            <div class="theme-btn-label">Light</div>
        </button>
    </div>

    <div class="sb-divider"></div>

    <!-- Dynamic notes -->
    <div class="notes-head">Design Notes</div>

    <div class="note-set active" id="notes-home">
        <div class="note-item"><div class="note-dot"></div><p>Mock user: Alex, 26, Melbourne. Fortnightly pay $3,200 net. Day 11 of 14-day cycle. Payday Friday.</p></div>
        <div class="note-item"><div class="note-dot"></div><p>Safe to Spend = income − already spent − committed bills before payday − auto-savings.</p></div>
        <div class="note-item"><div class="note-dot"></div><p>Burn rate bars show a vertical tick at "where you should be" — the key differentiator from a plain progress bar.</p></div>
        <div class="note-item"><div class="note-dot"></div><p>AI Insight card uses a priority score (dollar impact × urgency × severity). One insight only — no feed.</p></div>
        <div class="note-item"><div class="note-dot"></div><p>Use ← → below the phone (or keyboard arrows) to swipe between Dashboard tiers.</p></div>
    </div>
    <div class="note-set" id="notes-plan">
        <div class="note-item"><div class="note-dot"></div><p>3px left-border colour codes goal type instantly: purple=Save Up, teal=Spending Habit, green=Debt Paydown.</p></div>
        <div class="note-item"><div class="note-dot"></div><p>Spending Habit is unique to Totem — no other AU/NZ app tracks category spend against a self-set monthly target with streaks.</p></div>
        <div class="note-item"><div class="note-dot"></div><p>The white tick on burn bars shows where spending should be at this point in the month.</p></div>
        <div class="note-item"><div class="note-dot"></div><p>Toggle the AI state buttons below the phone. The milestone card → AI suggestion card transition shows the 30-transaction activation flow.</p></div>
        <div class="note-item"><div class="note-dot"></div><p>Teal dot on Dining Out in Budgets tab = budget synced with a Spending Habit goal.</p></div>
    </div>
    <div class="note-set" id="notes-calendar">
        <div class="note-item"><div class="note-dot"></div><p>February 2026 — Alex's view. Today = Thu 19 Feb (white circle). Tap any day cell to open the detail drawer.</p></div>
        <div class="note-item"><div class="note-dot"></div><p>Safety tinting is Totem's key differentiator: green/amber/red cell backgrounds show spend vs daily discretionary budget — scannable at a glance, absent in all competitors.</p></div>
        <div class="note-item"><div class="note-dot"></div><p>Coloured dots = category fingerprint (red=eating out, green=groceries, teal=transport, amber=entertainment). Max 3 per cell.</p></div>
        <div class="note-item"><div class="note-dot"></div><p>Purple cells = payday (Feb 8 past, Feb 22 upcoming). Red dots in top-right corner = urgent bill due (Netflix Feb 20, Rent Feb 21). Use ‹ button to view January 2026.</p></div>
    </div>
    <div class="note-set" id="notes-accounts">
        <div class="note-item"><div class="note-dot"></div><p>Net Position hero card = Assets − Debt. Pulsing green dot = live bank feed via Basiq. Tap any account row to open the detail sheet with last 5 transactions.</p></div>
        <div class="note-item"><div class="note-dot"></div><p>To Review tab is the 30-transaction AI activation gate. Alex is at 24/30 (80%). Tap ✓ to collapse a row with a smooth animation; tap ✗ to open the category picker sheet first.</p></div>
        <div class="note-item"><div class="note-dot"></div><p>Rules tab shows 8 auto-categorisation rules — 4 user-created (You badge) and 4 AI-detected (✨ AI badge). Toggles are visual-only ON state; trash icon is decorative in the mockup.</p></div>
    </div>
    <div class="note-set" id="notes-insights">
        <div class="note-item"><div class="note-dot"></div><p>Spend tab: category bars are scaled to the highest category (Dining Out $341). Red bar = over 5% of income. Period chips are visual-only in the mockup.</p></div>
        <div class="note-item"><div class="note-dot"></div><p>Trends tab: Lifestyle Creep shows full activated state (+6% = spend grew 11% vs income grew 5%). Dec spike in bar charts = holiday season. Safety Net at 2.6 months = amber warning (below 3-month target).</p></div>
        <div class="note-item"><div class="note-dot"></div><p>Income tab: dual bar chart pairs income (brand) vs spend (red) per month. Feb income bar is dashed/partial because only one of two fortnightly pays has landed. Savings breakdown shows goal progress.</p></div>
        <div class="note-item"><div class="note-dot"></div><p>Forecast tab: projects Feb month-end surplus ($2,241), 90-day cash flow, goal completion ETAs (Japan May · Safety Net Apr · Car Dec), known upcoming expenses, and 4 AI risk/opportunity flags.</p></div>
    </div>

</div><!-- /sidebar -->


<!-- ════════════════════════════════════════════════════════
     PHONE
════════════════════════════════════════════════════════ -->
<div class="phone-col">
<div class="phone-outer">
<div class="phone-screen">

    <div class="dynamic-island"></div>

    <!-- Persistent status bar -->
    <div class="status-bar">
        <span class="status-time">9:41</span>
        <div class="status-icons">
            <svg width="17" height="12" viewBox="0 0 17 12" fill="rgba(240,244,255,0.9)"><rect x="0" y="3" width="3" height="9" rx="1"/><rect x="4.5" y="1.5" width="3" height="10.5" rx="1"/><rect x="9" y="0" width="3" height="12" rx="1"/><rect x="13.5" y="0" width="3" height="12" rx="1" opacity="0.25"/></svg>
            <svg width="16" height="12" viewBox="0 0 16 12" fill="rgba(240,244,255,0.9)"><path d="M8 2.5C10.2 2.5 12.2 3.4 13.6 4.9L15 3.4C13.2 1.4 10.7 0 8 0S2.8 1.4 1 3.4l1.4 1.5C3.8 3.4 5.8 2.5 8 2.5z"/><path d="M8 5.5c1.5 0 2.8.6 3.8 1.6l1.4-1.5C11.7 3.9 9.9 3 8 3S4.3 3.9 2.8 5.6l1.4 1.5C5.2 6.1 6.5 5.5 8 5.5z"/><circle cx="8" cy="10" r="2"/></svg>
            <svg width="26" height="13" viewBox="0 0 26 13" fill="none"><rect x=".75" y=".75" width="21.5" height="11.5" rx="2.75" stroke="rgba(240,244,255,0.35)" stroke-width="1.5"/><rect x="2" y="2" width="17" height="9" rx="1.5" fill="rgba(240,244,255,0.9)"/><path d="M23.5 4.5v4a2 2 0 000-4z" fill="rgba(240,244,255,0.4)"/></svg>
        </div>
    </div>

    <!-- ══════════════════════════════════════════════
         SCREEN: HOME (Dashboard)
    ══════════════════════════════════════════════ -->
    <div class="app-screen active" id="screen-home">

        <!-- Tier indicator bar -->
        <div class="tier-bar">
            <span class="tier-badge-pill" id="tierBadge">Tier 1 · Overview</span>
            <div class="tier-dots">
                <div class="tdot active" id="d0" onclick="goTo(0)"></div>
                <div class="tdot" id="d1" onclick="goTo(1)"></div>
                <div class="tdot" id="d2" onclick="goTo(2)"></div>
            </div>
        </div>

        <!-- Tier slider -->
        <div class="screen-content">
        <div class="tier-slider" id="slider">

            <!-- ── Tier 1: Overview ── -->
            <div class="tier-panel">
                <div class="dash-header">
                    <div>
                        <div class="greeting">Hey Alex 👋</div>
                        <div class="greeting-date">Wednesday, 19 Feb 2026</div>
                    </div>
                    <div class="avatar">AL</div>
                </div>

                <div class="payday-pill">
                    <div class="pay-dot"></div>
                    <div class="pay-text">Payday in <strong>3 days</strong> · ANZ · $3,200</div>
                    <div class="pay-cycle">Day 11 / 14</div>
                </div>

                <div class="hero-card">
                    <div class="hero-label">Safe to Spend</div>
                    <div class="hero-amount"><span class="dollar">$</span>312</div>
                    <div class="hero-sub">until payday · after bills &amp; savings</div>
                    <div class="progress-track" style="margin-bottom:6px">
                        <div class="progress-fill fill-brand" style="width:90%"></div>
                    </div>
                    <div class="progress-labels">
                        <span>$0</span><span>78% of period elapsed</span><span>$3,200</span>
                    </div>
                </div>

                <div class="section-hd"><div class="section-title">This Month</div></div>
                <div class="two-col" style="margin-bottom:0">
                    <div class="metric-card">
                        <div class="metric-label">Month Projection</div>
                        <div class="metric-value" style="color:var(--green)">+$485</div>
                        <div class="badge badge-green" style="margin-top:4px">↑ On Track</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Net So Far</div>
                        <div class="metric-value">+$1,240</div>
                        <div class="metric-sub">income − spent</div>
                    </div>
                </div>

                <div class="section-hd"><div class="section-title">AI Insight</div><div class="section-link">Dismiss</div></div>
                <div class="insight-card">
                    <div class="insight-icon">🍔</div>
                    <div style="flex:1">
                        <div class="insight-tag">⚠ Spending Alert</div>
                        <div class="insight-text">Eating out up 67% vs last month. 4 orders this week — on pace to exceed budget by $87.</div>
                        <div class="insight-cta">See breakdown →</div>
                    </div>
                </div>

                <div class="section-hd"><div class="section-title">Upcoming</div><div class="section-link">See all</div></div>
                <div class="list-card">
                    <div class="list-item">
                        <div class="list-icon" style="background:rgba(229,9,20,0.12)">📺</div>
                        <div class="list-info"><div class="list-name">Netflix</div><div class="list-sub">Tomorrow · Auto-debit</div></div>
                        <div class="list-right"><div class="list-amount">$18.99</div><div class="list-urgency" style="color:var(--amber)">Tomorrow</div></div>
                    </div>
                    <div class="list-item">
                        <div class="list-icon" style="background:rgba(78,205,196,0.1)">🏠</div>
                        <div class="list-info"><div class="list-name">Rent — REA Group</div><div class="list-sub">Fri 21 Feb · Auto-debit</div></div>
                        <div class="list-right"><div class="list-amount">$1,000</div><div class="list-urgency" style="color:var(--red)">In 2 days</div></div>
                    </div>
                    <div class="list-item">
                        <div class="list-icon" style="background:rgba(29,185,84,0.1)">🎵</div>
                        <div class="list-info"><div class="list-name">Spotify</div><div class="list-sub">Sun 23 Feb · Auto-debit</div></div>
                        <div class="list-right"><div class="list-amount">$12.99</div><div class="list-urgency" style="color:var(--text2)">In 4 days</div></div>
                    </div>
                </div>
            </div><!-- /tier 1 -->

            <!-- ── Tier 2: Financial Health ── -->
            <div class="tier-panel">
                <div class="tier-heading">Financial Health</div>
                <div class="tier-sub">Budget burn rates &amp; wellness metrics</div>

                <div class="section-hd"><div class="section-title">Budget Burn Rate</div><div class="section-link" onclick="navigate('plan')">Edit budgets</div></div>
                <div class="list-card" style="overflow:visible">
                    <div class="burn-item">
                        <div class="burn-top">
                            <div class="burn-cat">🍔 <span>Eating Out</span></div>
                            <div class="burn-right"><div class="burn-spent" style="color:var(--red)">$487</div><div class="burn-budget">of $400</div></div>
                        </div>
                        <div class="progress-wrap">
                            <div class="progress-track overflow-visible"><div class="progress-fill fill-red" style="width:100%"></div></div>
                            <div class="period-marker" style="left:78%"></div>
                        </div>
                        <div class="burn-bottom"><div class="badge badge-red">Over Budget · $87 over</div><div class="burn-pct">122%</div></div>
                    </div>
                    <div class="burn-item">
                        <div class="burn-top">
                            <div class="burn-cat">🛒 <span>Groceries</span></div>
                            <div class="burn-right"><div class="burn-spent">$210</div><div class="burn-budget">of $280</div></div>
                        </div>
                        <div class="progress-wrap">
                            <div class="progress-track overflow-visible"><div class="progress-fill fill-amber" style="width:75%"></div></div>
                            <div class="period-marker" style="left:78%"></div>
                        </div>
                        <div class="burn-bottom"><div class="badge badge-amber">At Risk · on pace to overspend</div><div class="burn-pct">75%</div></div>
                    </div>
                    <div class="burn-item">
                        <div class="burn-top">
                            <div class="burn-cat">🚗 <span>Transport</span></div>
                            <div class="burn-right"><div class="burn-spent">$54</div><div class="burn-budget">of $150</div></div>
                        </div>
                        <div class="progress-wrap">
                            <div class="progress-track overflow-visible"><div class="progress-fill fill-green" style="width:36%"></div></div>
                            <div class="period-marker" style="left:78%"></div>
                        </div>
                        <div class="burn-bottom"><div class="badge badge-green">On Track</div><div class="burn-pct">36%</div></div>
                    </div>
                    <div class="burn-item">
                        <div class="burn-top">
                            <div class="burn-cat">🎭 <span>Entertainment</span></div>
                            <div class="burn-right"><div class="burn-spent">$92</div><div class="burn-budget">of $100</div></div>
                        </div>
                        <div class="progress-wrap">
                            <div class="progress-track overflow-visible"><div class="progress-fill fill-amber" style="width:92%"></div></div>
                            <div class="period-marker" style="left:78%"></div>
                        </div>
                        <div class="burn-bottom"><div class="badge badge-amber">At Risk · $8 remaining</div><div class="burn-pct">92%</div></div>
                    </div>
                </div>

                <div class="section-hd"><div class="section-title">Subscription Load</div><div class="section-link">Manage</div></div>
                <div class="sub-card">
                    <div class="sub-top">
                        <div><div class="sub-head-label">Active Subscriptions</div><div class="sub-count">11 <span>active</span></div></div>
                        <div class="badge badge-amber">+2 vs last year</div>
                    </div>
                    <div class="sub-grid">
                        <div class="sub-metric"><div class="sub-metric-label">Per Month</div><div class="sub-metric-value" style="color:var(--teal)">$287</div></div>
                        <div class="sub-metric"><div class="sub-metric-label">Annualised</div><div class="sub-metric-value" style="color:var(--amber)">$3,444</div></div>
                    </div>
                </div>

                <div class="section-hd"><div class="section-title">Wellness Metrics</div></div>
                <div class="health-pair">
                    <div class="health-card">
                        <div class="health-icon">🛡️</div>
                        <div class="health-label">Safety Net</div>
                        <div class="health-value">2.8</div>
                        <div class="health-unit">months runway</div>
                        <div class="badge badge-amber" style="margin-top:8px">Below 3mo target</div>
                    </div>
                    <div class="health-card">
                        <div class="health-icon">🚀</div>
                        <div class="health-label">Savings Velocity</div>
                        <div class="health-value">18%</div>
                        <div class="health-unit">avg of paycheck</div>
                        <div class="badge badge-green" style="margin-top:8px">↑ Up from 14%</div>
                    </div>
                </div>
            </div><!-- /tier 2 -->

            <!-- ── Tier 3: Trends ── -->
            <div class="tier-panel">
                <div class="tier-heading">Trends &amp; Patterns</div>
                <div class="tier-sub">Builds over time as we learn your finances</div>

                <div class="section-hd"><div class="section-title">Lifestyle Creep</div><div class="section-link">Learn more</div></div>
                <div class="creep-card">
                    <div class="creep-top">
                        <div><div class="creep-building-label">Building Baseline</div><div class="creep-status">2 of 3 months complete</div></div>
                        <div style="font-size:32px">📈</div>
                    </div>
                    <div class="progress-track" style="margin-bottom:10px"><div class="progress-fill fill-brand" style="width:67%"></div></div>
                    <div class="creep-desc">We'll compare your 3-month average against your 12-month average to detect whether your lifestyle is inflating faster than your income. <strong>1 month to go.</strong></div>
                </div>

                <div class="section-hd"><div class="section-title">Spend as % of Income</div><div class="section-link">Feb 2026</div></div>
                <div class="list-card">
                    <div style="padding:12px 16px 8px;border-bottom:1px solid var(--border)">
                        <div style="font-size:12px;font-weight:600;color:var(--text)">Top categories · February 2026</div>
                        <div style="font-size:11px;color:var(--text2);margin-top:2px">Based on $6,400 monthly income</div>
                    </div>
                    <div class="cat-item"><span class="cat-emoji">🏠</span><span class="cat-name">Housing</span><div class="cat-bar"><div class="cat-track"><div class="cat-fill fill-brand" style="width:62%"></div></div></div><span class="cat-pct">31%</span></div>
                    <div class="cat-item"><span class="cat-emoji">🛒</span><span class="cat-name">Groceries</span><div class="cat-bar"><div class="cat-track"><div class="cat-fill fill-brand" style="width:26%"></div></div></div><span class="cat-pct">13%</span></div>
                    <div class="cat-item"><span class="cat-emoji">🍔</span><span class="cat-name">Eating Out</span><div class="cat-bar"><div class="cat-track"><div class="cat-fill" style="width:20%;background:var(--red)"></div></div></div><span class="cat-pct" style="color:var(--red)">10%</span></div>
                    <div class="cat-item"><span class="cat-emoji">📱</span><span class="cat-name">Subscriptions</span><div class="cat-bar"><div class="cat-track"><div class="cat-fill fill-brand" style="width:13%"></div></div></div><span class="cat-pct">6%</span></div>
                    <div class="cat-item"><span class="cat-emoji">🚗</span><span class="cat-name">Transport</span><div class="cat-bar"><div class="cat-track"><div class="cat-fill fill-brand" style="width:10%"></div></div></div><span class="cat-pct">5%</span></div>
                </div>

                <div class="section-hd"><div class="section-title">Savings Rate Trend</div><div class="section-link">4 months</div></div>
                <div class="metric-card">
                    <div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:4px">
                        <div>
                            <div class="metric-label">Avg Savings Rate</div>
                            <div class="metric-value">18%</div>
                            <div class="badge badge-green" style="margin-top:4px">↑ +4% vs 3mo ago</div>
                        </div>
                        <div style="text-align:right">
                            <div class="metric-label">3-Month Total</div>
                            <div class="metric-value">$3,840</div>
                            <div class="metric-sub">Goal: $5,000</div>
                        </div>
                    </div>
                    <div class="mini-chart">
                        <div class="mini-bar-wrap"><div class="mini-bar" style="height:22px;background:rgba(124,110,250,0.25)"></div><span class="mini-label">Nov</span></div>
                        <div class="mini-bar-wrap"><div class="mini-bar" style="height:28px;background:rgba(124,110,250,0.4)"></div><span class="mini-label">Dec</span></div>
                        <div class="mini-bar-wrap"><div class="mini-bar" style="height:32px;background:rgba(124,110,250,0.6)"></div><span class="mini-label">Jan</span></div>
                        <div class="mini-bar-wrap"><div class="mini-bar" style="height:40px;background:var(--brand)"></div><span class="mini-label active">Feb</span></div>
                    </div>
                </div>
            </div><!-- /tier 3 -->

        </div><!-- /tier-slider -->
        </div><!-- /screen-content -->
    </div><!-- /screen-home -->


    <!-- ══════════════════════════════════════════════
         SCREEN: PLAN (Goals + Budgets)
    ══════════════════════════════════════════════ -->
    <div class="app-screen" id="screen-plan">

        <div class="screen-header">
            <span class="screen-title">Plan</span>
            <span class="header-action" onclick="openSheet()">+ Add Goal</span>
        </div>

        <div class="subtab-bar">
            <div class="subtab active" id="plan-tab-goals" onclick="switchPlanTab('goals')">Goals</div>
            <div class="subtab" id="plan-tab-budgets" onclick="switchPlanTab('budgets')">Budgets</div>
        </div>

        <div class="tab-scroll">

            <!-- Goals pane -->
            <div class="tab-pane active" id="plan-pane-goals">

                <!-- 30-transaction milestone (default state) -->
                <div id="plan-milestone" class="milestone-card">
                    <div class="milestone-top">
                        <div class="milestone-icon">🤖</div>
                        <div>
                            <div class="ai-tag">Totem AI</div>
                            <div class="milestone-title">Activate AI Goal Suggestions</div>
                        </div>
                    </div>
                    <div class="milestone-bar-track">
                        <div class="milestone-bar-fill" style="width:73%"></div>
                    </div>
                    <div class="milestone-labels">
                        <span class="ms-lbl-left">22 of 30 transactions reviewed</span>
                        <span class="ms-lbl-right">8 more to go</span>
                    </div>
                    <div class="milestone-sub">Review transactions so Totem AI can learn your patterns and suggest personalised goals.</div>
                    <span class="milestone-cta" onclick="navigate('accounts')">Go to Review →</span>
                </div>

                <!-- AI suggestion card (shown when AI active) -->
                <div id="plan-ai-suggestion" class="plan-ai-card">
                    <div class="ai-card-top">
                        <div class="ai-card-icon">✨</div>
                        <div>
                            <div class="ai-tag">Totem AI</div>
                            <div class="ai-card-type">Spending Habit Goal</div>
                        </div>
                    </div>
                    <div class="ai-insight-text">Your Dining Out spend has risen 38% over the last 3 months 📈</div>
                    <div class="ai-preview-text">Based on $620/mo avg → $496/mo target (−20%)<br>Save approx. <strong style="color:var(--teal)">$124/mo</strong> if you hit this goal</div>
                    <div class="ai-actions">
                        <button class="btn-primary">Review Suggestion</button>
                        <button class="btn-ghost">Not Now</button>
                    </div>
                </div>

                <div class="section-hd"><div class="section-title">Active Goals · 3</div></div>

                <!-- Save Up: Japan Trip -->
                <div class="goal-card gc-save">
                    <div class="goal-header">
                        <div class="goal-header-left">
                            <div class="goal-icon">🏖️</div>
                            <div><div class="goal-name">Japan Trip</div><div class="goal-type-label">Save Up Goal</div></div>
                        </div>
                        <span class="badge badge-green">On Track</span>
                    </div>
                    <div class="goal-amounts">
                        <div class="goal-amount-main">$2,840 <span class="unit">of $5,000</span></div>
                        <div class="goal-pct-brand">57%</div>
                    </div>
                    <div class="progress-track"><div class="progress-fill fill-brand" style="width:57%"></div></div>
                    <div class="goal-footer">
                        <div><div class="goal-footer-lbl">Projected completion</div><div class="goal-footer-val">August 2025 · 6 months</div></div>
                    </div>
                    <div class="inline-pill">↻ Auto-transfer: $300/mo · next 1 Mar</div>
                </div>

                <!-- Spending Habit: Dining Out -->
                <div class="goal-card gc-spend">
                    <div class="goal-header">
                        <div class="goal-header-left">
                            <div class="goal-icon">🍔</div>
                            <div><div class="goal-name">Dining Out</div><div class="goal-type-label">Spending Habit</div></div>
                        </div>
                        <span class="badge badge-amber">At Risk</span>
                    </div>
                    <div class="goal-amounts">
                        <div class="goal-amount-main" style="color:var(--amber)">$341 <span class="unit" style="color:var(--text2)">of $464/mo</span></div>
                        <div class="goal-pct-teal">73%</div>
                    </div>
                    <div class="progress-track overflow-visible" style="position:relative">
                        <div class="period-marker" style="left:68%"></div>
                        <div class="progress-fill fill-amber" style="width:73%"></div>
                    </div>
                    <div class="bar-labels">
                        <span class="bar-lbl">19 Feb · 8 days left</span>
                        <span class="bar-val-red">−$123 over pace</span>
                    </div>
                    <div class="streak-row">
                        <span>🔥</span>
                        <span class="streak-text-amber">3 months in a row</span>
                        <span class="streak-best">Best: 3</span>
                    </div>
                </div>

                <!-- Debt Paydown: ANZ Visa -->
                <div class="goal-card gc-debt">
                    <div class="goal-header">
                        <div class="goal-header-left">
                            <div class="goal-icon">💳</div>
                            <div><div class="goal-name">ANZ Visa</div><div class="goal-type-label">Debt Paydown</div></div>
                        </div>
                        <span class="badge badge-green">Ahead</span>
                    </div>
                    <div class="goal-amounts">
                        <div class="goal-amount-main" style="color:var(--green)">$2,150 <span class="unit">paid off</span></div>
                        <div class="goal-pct-green">43%</div>
                    </div>
                    <div class="progress-track"><div class="progress-fill fill-teal" style="width:43%;background:var(--green)"></div></div>
                    <div class="bar-labels">
                        <span class="bar-lbl">$2,850 remaining</span>
                        <span class="bar-val-green">+2 months ahead</span>
                    </div>
                    <div class="goal-footer" style="margin-top:10px">
                        <div><div class="goal-footer-lbl">Projected payoff</div><div class="goal-footer-val">December 2025</div></div>
                    </div>
                    <div class="inline-pill inline-pill-green">💰 Saving ~$380 in interest vs. minimums</div>
                </div>

                <button class="add-btn" onclick="openSheet()"><span>+</span> Add Goal</button>

                <!-- Completed section -->
                <div class="completed-toggle" onclick="toggleCompleted()">
                    <span class="completed-label">Completed</span>
                    <span class="completed-count">2 goals</span>
                    <span class="completed-chevron" id="completed-chevron">▼</span>
                </div>
                <div class="completed-goals" id="completed-goals">
                    <div class="goal-card gc-save gc-completed">
                        <div class="goal-header">
                            <div class="goal-header-left">
                                <div class="goal-icon">🎮</div>
                                <div><div class="goal-name">New PC</div><div class="goal-type-label">Save Up Goal</div></div>
                            </div>
                            <span class="badge badge-green">Completed</span>
                        </div>
                        <div class="progress-track"><div class="progress-fill fill-brand" style="width:100%"></div></div>
                        <div class="goal-footer" style="margin-top:8px">
                            <div class="goal-footer-lbl">Completed 14 Jan 2025 · $2,200 saved</div>
                        </div>
                    </div>
                </div>

            </div><!-- /goals pane -->

            <!-- Budgets pane -->
            <div class="tab-pane" id="plan-pane-budgets">

                <div class="period-banner">
                    <span class="period-day">Day 19 of February</span>
                    <span class="period-pct">68% of month elapsed</span>
                </div>

                <div class="budget-summary">
                    <div class="bsc"><div class="bsc-label">Total Budgeted</div><div class="bsc-amount">$3,050</div></div>
                    <div class="bsc"><div class="bsc-label">Spent This Month</div><div class="bsc-amount" style="color:var(--amber)">$2,190</div></div>
                </div>

                <div class="section-hd"><div class="section-title">Budgets · 5 active</div><div class="section-link">Edit</div></div>

                <div class="budget-list">
                    <div class="budget-row">
                        <div class="budget-row-top">
                            <div class="budget-cat"><span>🛒</span> Groceries</div>
                            <div class="budget-amounts"><span class="budget-spent">$412</span><span class="budget-limit">/ $600</span></div>
                        </div>
                        <div class="progress-track overflow-visible" style="position:relative"><div class="period-marker" style="left:68%"></div><div class="progress-fill fill-green" style="width:69%"></div></div>
                        <div class="budget-row-bottom"><span class="badge badge-green">On Track</span><span class="budget-pct">69%</span></div>
                    </div>
                    <div class="budget-row">
                        <div class="budget-row-top">
                            <div class="budget-cat"><span>🍔</span> Dining Out <div class="budget-goal-dot" title="Synced with Dining Out goal"></div></div>
                            <div class="budget-amounts"><span class="budget-spent">$341</span><span class="budget-limit">/ $464</span></div>
                        </div>
                        <div class="progress-track overflow-visible" style="position:relative"><div class="period-marker" style="left:68%"></div><div class="progress-fill fill-amber" style="width:73%"></div></div>
                        <div class="budget-row-bottom"><span class="badge badge-amber">At Risk</span><span class="budget-pct">73%</span></div>
                    </div>
                    <div class="budget-row">
                        <div class="budget-row-top">
                            <div class="budget-cat"><span>🎬</span> Entertainment</div>
                            <div class="budget-amounts"><span class="budget-spent">$60</span><span class="budget-limit">/ $150</span></div>
                        </div>
                        <div class="progress-track overflow-visible" style="position:relative"><div class="period-marker" style="left:68%"></div><div class="progress-fill fill-green" style="width:40%"></div></div>
                        <div class="budget-row-bottom"><span class="badge badge-green">On Track</span><span class="budget-pct">40%</span></div>
                    </div>
                    <div class="budget-row">
                        <div class="budget-row-top">
                            <div class="budget-cat"><span>🚗</span> Transport</div>
                            <div class="budget-amounts"><span class="budget-spent" style="color:var(--red)">$290</span><span class="budget-limit">/ $250</span></div>
                        </div>
                        <div class="progress-track overflow-visible" style="position:relative"><div class="period-marker" style="left:68%"></div><div class="progress-fill fill-red" style="width:100%"></div></div>
                        <div class="budget-row-bottom"><span class="badge badge-red">Over Budget</span><span class="budget-pct" style="color:var(--red)">116%</span></div>
                    </div>
                    <div class="budget-row">
                        <div class="budget-row-top">
                            <div class="budget-cat"><span>🛍️</span> Shopping</div>
                            <div class="budget-amounts"><span class="budget-spent">$375</span><span class="budget-limit">/ $500</span></div>
                        </div>
                        <div class="progress-track overflow-visible" style="position:relative"><div class="period-marker" style="left:68%"></div><div class="progress-fill fill-green" style="width:75%"></div></div>
                        <div class="budget-row-bottom"><span class="badge badge-green">On Track</span><span class="budget-pct">75%</span></div>
                    </div>
                </div>

                <div class="inline-pill inline-pill-teal" style="margin-bottom:12px">⟷ Dining Out budget is synced with your Spending Habit goal</div>
                <button class="add-btn">+ Add Budget</button>

            </div><!-- /budgets pane -->

        </div><!-- /tab-scroll -->
    </div><!-- /screen-plan -->


    <!-- ══════════════════════════════════════════════
         SCREEN: CALENDAR
    ══════════════════════════════════════════════ -->
    <div class="app-screen" id="screen-calendar">

        <!-- Header -->
        <div class="screen-header" style="padding-bottom:4px">
            <span class="screen-title">Calendar</span>
            <span class="header-action" id="cal-today-btn" style="display:none" onclick="calJumpToday()">Today</span>
        </div>

        <!-- Month navigation -->
        <div class="cal-month-nav">
            <button class="cal-nav-btn" id="cal-prev-btn" onclick="calChangeMonth(-1)">‹</button>
            <div class="cal-month-title" id="cal-month-title">February 2026</div>
            <button class="cal-nav-btn" id="cal-next-btn" onclick="calChangeMonth(1)" disabled>›</button>
        </div>

        <!-- Summary strip -->
        <div class="cal-summary-strip">
            <div class="cal-sum-cell">
                <div class="cal-sum-label">Spent</div>
                <div class="cal-sum-value" id="cal-sum-spent">$1,157</div>
            </div>
            <div class="cal-sum-cell">
                <div class="cal-sum-label" id="cal-sum-vs-label">vs Last Mo.</div>
                <div class="cal-sum-value" id="cal-sum-vs" style="color:var(--red)">+8%</div>
            </div>
            <div class="cal-sum-cell">
                <div class="cal-sum-label" id="cal-sum-days-label">Days Left</div>
                <div class="cal-sum-value" id="cal-sum-days">9</div>
            </div>
        </div>

        <!-- View toggle: Month | Week | Day -->
        <div class="cal-view-bar">
            <div class="cal-view-seg">
                <button class="cal-view-btn active" id="cal-btn-month" onclick="calSetView('month')">Month</button>
                <button class="cal-view-btn" id="cal-btn-week" onclick="calSetView('week')">Week</button>
                <button class="cal-view-btn" id="cal-btn-day" onclick="calSetView('day')">Day</button>
            </div>
        </div>

        <!-- Weekday headers (hidden in Day view) -->
        <div class="cal-weekdays" id="cal-weekdays">
            <div class="cal-weekday">Sun</div>
            <div class="cal-weekday">Mon</div>
            <div class="cal-weekday">Tue</div>
            <div class="cal-weekday">Wed</div>
            <div class="cal-weekday">Thu</div>
            <div class="cal-weekday">Fri</div>
            <div class="cal-weekday">Sat</div>
        </div>

        <!-- Calendar grid — February 2026
             Feb 1 = Sunday → 4 perfect rows, no leading blanks
        -->
        <div class="cal-grid" id="cal-grid">

            <!-- ── Row 1: Feb 1–7 ── -->
            <div class="cal-day tint-g" id="cal-day-1" onclick="calSelectDay(1)">
                <div class="cal-date-num">1</div>
                <div class="cal-amount">$45</div>
                <div class="cal-dots">
                    <div class="cal-dot" style="background:var(--green)"></div>
                    <div class="cal-dot" style="background:var(--teal)"></div>
                </div>
            </div>
            <div class="cal-day tint-g" id="cal-day-2" onclick="calSelectDay(2)">
                <div class="cal-date-num">2</div>
                <div class="cal-amount">$28</div>
                <div class="cal-dots">
                    <div class="cal-dot" style="background:var(--red)"></div>
                </div>
            </div>
            <div class="cal-day" id="cal-day-3" onclick="calSelectDay(3)">
                <div class="cal-date-num">3</div>
            </div>
            <div class="cal-day tint-a" id="cal-day-4" onclick="calSelectDay(4)">
                <div class="cal-date-num">4</div>
                <div class="cal-amount">$87</div>
                <div class="cal-dots">
                    <div class="cal-dot" style="background:var(--red)"></div>
                    <div class="cal-dot" style="background:var(--green)"></div>
                </div>
            </div>
            <div class="cal-day tint-g" id="cal-day-5" onclick="calSelectDay(5)">
                <div class="cal-date-num">5</div>
                <div class="cal-amount">$18</div>
                <div class="cal-dots">
                    <div class="cal-dot" style="background:var(--teal)"></div>
                </div>
            </div>
            <div class="cal-day tint-a" id="cal-day-6" onclick="calSelectDay(6)">
                <div class="cal-date-num">6</div>
                <div class="cal-amount">$74</div>
                <div class="cal-dots">
                    <div class="cal-dot" style="background:var(--amber)"></div>
                    <div class="cal-dot" style="background:var(--red)"></div>
                </div>
            </div>
            <div class="cal-day tint-r" id="cal-day-7" onclick="calSelectDay(7)">
                <div class="cal-date-num">7</div>
                <div class="cal-amount">$156</div>
                <div class="cal-dots">
                    <div class="cal-dot" style="background:var(--green)"></div>
                    <div class="cal-dot" style="background:var(--red)"></div>
                </div>
            </div>

            <!-- ── Row 2: Feb 8–14 (Feb 8 = Payday) ── -->
            <div class="cal-day tint-p" id="cal-day-8" onclick="calSelectDay(8)">
                <div class="cal-date-num">8</div>
                <div class="cal-payday-tag">Pay</div>
                <div class="cal-amount income">+$3,166</div>
                <div class="cal-dots">
                    <div class="cal-dot" style="background:var(--green)"></div>
                </div>
            </div>
            <div class="cal-day tint-g" id="cal-day-9" onclick="calSelectDay(9)">
                <div class="cal-date-num">9</div>
                <div class="cal-amount">$28</div>
                <div class="cal-dots">
                    <div class="cal-dot" style="background:var(--green)"></div>
                </div>
            </div>
            <div class="cal-day tint-a" id="cal-day-10" onclick="calSelectDay(10)">
                <div class="cal-date-num">10</div>
                <div class="cal-amount">$52</div>
                <div class="cal-dots">
                    <div class="cal-dot" style="background:var(--red)"></div>
                </div>
            </div>
            <div class="cal-day tint-g" id="cal-day-11" onclick="calSelectDay(11)">
                <div class="cal-date-num">11</div>
                <div class="cal-amount">$35</div>
                <div class="cal-dots">
                    <div class="cal-dot" style="background:var(--green)"></div>
                    <div class="cal-dot" style="background:var(--teal)"></div>
                </div>
            </div>
            <div class="cal-day tint-r" id="cal-day-12" onclick="calSelectDay(12)">
                <div class="cal-date-num">12</div>
                <div class="cal-amount">$98</div>
                <div class="cal-dots">
                    <div class="cal-dot" style="background:var(--red)"></div>
                </div>
            </div>
            <div class="cal-day tint-a" id="cal-day-13" onclick="calSelectDay(13)">
                <div class="cal-date-num">13</div>
                <div class="cal-amount">$67</div>
                <div class="cal-dots">
                    <div class="cal-dot" style="background:var(--amber)"></div>
                    <div class="cal-dot" style="background:var(--red)"></div>
                </div>
            </div>
            <div class="cal-day tint-r" id="cal-day-14" onclick="calSelectDay(14)">
                <div class="cal-date-num">14</div>
                <div class="cal-amount">$180</div>
                <div class="cal-dots">
                    <div class="cal-dot" style="background:var(--red)"></div>
                    <div class="cal-dot" style="background:var(--amber)"></div>
                </div>
            </div>

            <!-- ── Row 3: Feb 15–21 (Feb 20 Netflix, Feb 21 Rent, Feb 19 = TODAY) ── -->
            <div class="cal-day tint-a" id="cal-day-15" onclick="calSelectDay(15)">
                <div class="cal-date-num">15</div>
                <div class="cal-amount">$56</div>
                <div class="cal-dots">
                    <div class="cal-dot" style="background:var(--green)"></div>
                </div>
            </div>
            <div class="cal-day tint-g" id="cal-day-16" onclick="calSelectDay(16)">
                <div class="cal-date-num">16</div>
                <div class="cal-amount">$12</div>
                <div class="cal-dots">
                    <div class="cal-dot" style="background:var(--red)"></div>
                </div>
            </div>
            <div class="cal-day tint-g" id="cal-day-17" onclick="calSelectDay(17)">
                <div class="cal-date-num">17</div>
                <div class="cal-amount">$44</div>
                <div class="cal-dots">
                    <div class="cal-dot" style="background:var(--red)"></div>
                </div>
            </div>
            <div class="cal-day tint-r" id="cal-day-18" onclick="calSelectDay(18)">
                <div class="cal-date-num">18</div>
                <div class="cal-amount">$89</div>
                <div class="cal-dots">
                    <div class="cal-dot" style="background:var(--red)"></div>
                </div>
            </div>
            <div class="cal-day tint-a is-today" id="cal-day-19" onclick="calSelectDay(19)">
                <div class="cal-date-num">19</div>
                <div class="cal-amount">$54</div>
                <div class="cal-dots">
                    <div class="cal-dot" style="background:var(--red)"></div>
                    <div class="cal-dot" style="background:var(--teal)"></div>
                </div>
            </div>
            <div class="cal-day future" id="cal-day-20" onclick="calSelectDay(20)">
                <div class="cal-date-num">20</div>
                <div class="cal-bill-flag urgent"></div>
            </div>
            <div class="cal-day future" id="cal-day-21" onclick="calSelectDay(21)">
                <div class="cal-date-num">21</div>
                <div class="cal-bill-flag urgent"></div>
            </div>

            <!-- ── Row 4: Feb 22–28 (Feb 22 = Next Payday + Spotify bill) ── -->
            <div class="cal-day tint-p future" id="cal-day-22" onclick="calSelectDay(22)">
                <div class="cal-date-num">22</div>
                <div class="cal-payday-tag">Pay</div>
                <div class="cal-bill-flag"></div>
            </div>
            <div class="cal-day future" id="cal-day-23" onclick="calSelectDay(23)">
                <div class="cal-date-num">23</div>
            </div>
            <div class="cal-day future" id="cal-day-24" onclick="calSelectDay(24)">
                <div class="cal-date-num">24</div>
            </div>
            <div class="cal-day future" id="cal-day-25" onclick="calSelectDay(25)">
                <div class="cal-date-num">25</div>
            </div>
            <div class="cal-day future" id="cal-day-26" onclick="calSelectDay(26)">
                <div class="cal-date-num">26</div>
            </div>
            <div class="cal-day future" id="cal-day-27" onclick="calSelectDay(27)">
                <div class="cal-date-num">27</div>
            </div>
            <div class="cal-day future" id="cal-day-28" onclick="calSelectDay(28)">
                <div class="cal-date-num">28</div>
            </div>

        </div><!-- /cal-grid -->

        <!-- ── Week list: dynamically rendered by renderCalWeek() ── -->
        <div class="cal-week-list" id="cal-week-grid"></div>

        <!-- ── Day view: inline transaction list ── -->
        <div class="cal-day-view" id="cal-day-view">
            <div class="cal-day-content" id="cal-day-content"></div>
        </div><!-- /cal-day-view -->

        <!-- Legend (hidden in Day view) -->
        <div class="cal-legend" id="cal-legend">
            <div class="cal-legend-item">
                <div class="cal-legend-swatch" style="background:rgba(81,207,102,0.25)"></div>
                Under
            </div>
            <div class="cal-legend-item">
                <div class="cal-legend-swatch" style="background:rgba(247,200,75,0.25)"></div>
                On pace
            </div>
            <div class="cal-legend-item">
                <div class="cal-legend-swatch" style="background:rgba(255,107,107,0.25)"></div>
                Over
            </div>
            <div class="cal-legend-item">
                <div class="cal-legend-swatch" style="background:rgba(139,126,255,0.25)"></div>
                Payday
            </div>
        </div>

    </div><!-- /screen-calendar -->

    <!-- ══════════════════════════════════════════════
         SCREEN: ACCOUNTS (placeholder)
    ══════════════════════════════════════════════ -->
    <!-- ══════════════════════════════════════════════
         SCREEN: ACCOUNTS
    ══════════════════════════════════════════════ -->
    <div class="app-screen" id="screen-accounts">

        <div class="screen-header">
            <div class="screen-title">Accounts</div>
            <div class="header-action" id="acct-header-action" onclick="">Sync ↺</div>
        </div>

        <div class="subtab-bar">
            <div class="subtab active" id="acct-tab-accounts" onclick="switchAcctTab('accounts')">Accounts</div>
            <div class="subtab"        id="acct-tab-review"   onclick="switchAcctTab('review')">To Review</div>
            <div class="subtab"        id="acct-tab-rules"    onclick="switchAcctTab('rules')">Rules</div>
        </div>

        <div class="tab-scroll">

            <!-- ─── ACCOUNTS PANE ─── -->
            <div class="tab-pane active" id="acct-pane-accounts">

                <!-- Net position hero card -->
                <div class="acct-net-card">
                    <div class="acct-net-label">Net Position</div>
                    <div class="acct-net-amount">+$13,454</div>
                    <div class="acct-net-grid">
                        <div class="acct-net-cell">
                            <div class="acct-net-cell-label">Assets</div>
                            <div class="acct-net-cell-val">$14,297</div>
                        </div>
                        <div class="acct-net-cell">
                            <div class="acct-net-cell-label">Debt</div>
                            <div class="acct-net-cell-val" style="color:var(--red)">$843</div>
                        </div>
                    </div>
                </div>

                <div class="section-hd">
                    <div class="section-title">Linked Accounts · 3</div>
                </div>

                <div class="list-card">
                    <!-- ANZ Everyday -->
                    <div class="list-item" onclick="openAcctDetail('ANZ Everyday')" style="cursor:pointer">
                        <div class="list-icon" style="background:rgba(0,160,100,0.12);font-size:18px">🏦</div>
                        <div style="flex:1;min-width:0">
                            <div style="display:flex;align-items:center;gap:7px;margin-bottom:2px">
                                <span style="font-size:14px;font-weight:600;color:var(--text)">ANZ Everyday</span>
                                <span class="badge badge-muted">Cheque</span>
                            </div>
                            <div style="display:flex;align-items:center;gap:6px">
                                <span class="acct-live-dot"></span>
                                <span style="font-size:11px;color:var(--text3)">Live · synced just now</span>
                            </div>
                        </div>
                        <div style="text-align:right;flex-shrink:0">
                            <div style="font-size:16px;font-weight:700;color:var(--text)">$1,847</div>
                            <div style="font-size:10px;color:var(--text3)">available</div>
                        </div>
                    </div>

                    <!-- ANZ NetSaver -->
                    <div class="list-item" onclick="openAcctDetail('ANZ NetSaver')" style="cursor:pointer">
                        <div class="list-icon" style="background:rgba(0,160,100,0.12);font-size:18px">💰</div>
                        <div style="flex:1;min-width:0">
                            <div style="display:flex;align-items:center;gap:7px;margin-bottom:2px">
                                <span style="font-size:14px;font-weight:600;color:var(--text)">ANZ NetSaver</span>
                                <span class="badge badge-green">Savings</span>
                            </div>
                            <div style="display:flex;align-items:center;gap:6px">
                                <span class="acct-live-dot"></span>
                                <span style="font-size:11px;color:var(--text3)">Live · synced 2 min ago</span>
                            </div>
                        </div>
                        <div style="text-align:right;flex-shrink:0">
                            <div style="font-size:16px;font-weight:700;color:var(--green)">$12,450</div>
                            <div style="font-size:10px;color:var(--text3)">3.75% p.a.</div>
                        </div>
                    </div>

                    <!-- ANZ Credit Visa -->
                    <div class="list-item" onclick="openAcctDetail('ANZ Credit Visa')" style="cursor:pointer">
                        <div class="list-icon" style="background:rgba(255,107,107,0.12);font-size:18px">💳</div>
                        <div style="flex:1;min-width:0">
                            <div style="display:flex;align-items:center;gap:7px;margin-bottom:2px">
                                <span style="font-size:14px;font-weight:600;color:var(--text)">ANZ Credit Visa</span>
                                <span class="badge badge-red">Credit</span>
                            </div>
                            <div style="display:flex;align-items:center;gap:6px">
                                <span class="acct-live-dot"></span>
                                <span style="font-size:11px;color:var(--text3)">Live · synced 2 min ago</span>
                            </div>
                        </div>
                        <div style="text-align:right;flex-shrink:0">
                            <div style="font-size:16px;font-weight:700;color:var(--red)">−$843</div>
                            <div style="font-size:10px;color:var(--text3)">due Mar 5</div>
                        </div>
                    </div>
                </div>

                <button class="acct-link-btn">+ Link New Account</button>

            </div><!-- /acct-pane-accounts -->

            <!-- ─── TO REVIEW PANE ─── -->
            <div class="tab-pane" id="acct-pane-review">

                <!-- Milestone banner -->
                <div class="acct-milestone-banner">
                    <div style="display:flex;justify-content:space-between;align-items:baseline;margin-bottom:2px">
                        <div class="acct-milestone-title">AI Activation Progress</div>
                        <div style="font-size:13px;font-weight:700;color:var(--brand)" id="acct-milestone-count">24 / 30</div>
                    </div>
                    <div class="acct-milestone-sub" id="acct-milestone-sub">Review 6 more transactions to unlock AI insights &amp; goal suggestions</div>
                    <div class="progress-track" style="margin-top:4px">
                        <div class="progress-fill fill-brand" id="acct-milestone-bar" style="width:80%"></div>
                    </div>
                </div>

                <!-- Review list -->
                <div class="list-card" id="acct-review-list">

                    <!-- Transaction 1 -->
                    <div class="acct-review-item" id="acct-txn-1">
                        <div class="acct-review-inner">
                            <div class="list-icon" style="background:rgba(255,160,0,0.12);font-size:16px;flex-shrink:0">⛽</div>
                            <div style="flex:1;min-width:0">
                                <div style="display:flex;align-items:baseline;justify-content:space-between;gap:8px">
                                    <span style="font-size:13px;font-weight:600;color:var(--text)">Shell Coles Express</span>
                                    <span style="font-size:14px;font-weight:700;color:var(--red);flex-shrink:0">−$68.40</span>
                                </div>
                                <div style="font-size:11px;color:var(--text3);margin:2px 0 6px">Feb 19 · Fuel</div>
                                <div style="display:flex;align-items:center;gap:6px;flex-wrap:wrap">
                                    <span class="acct-ai-pill">✨ Transport</span>
                                    <span class="acct-conf-high">High confidence</span>
                                </div>
                            </div>
                        </div>
                        <div class="acct-review-actions">
                            <button class="acct-approve-btn" onclick="approveTransaction('acct-txn-1')">✓ Correct</button>
                            <button class="acct-wrong-btn"   onclick="openCatSheet('acct-txn-1', 'Shell Coles Express')">✗ Wrong</button>
                        </div>
                    </div>

                    <!-- Transaction 2 -->
                    <div class="acct-review-item" id="acct-txn-2">
                        <div class="acct-review-inner">
                            <div class="list-icon" style="background:rgba(0,200,150,0.12);font-size:16px;flex-shrink:0">🛒</div>
                            <div style="flex:1;min-width:0">
                                <div style="display:flex;align-items:baseline;justify-content:space-between;gap:8px">
                                    <span style="font-size:13px;font-weight:600;color:var(--text)">Woolworths Metro</span>
                                    <span style="font-size:14px;font-weight:700;color:var(--red);flex-shrink:0">−$43.15</span>
                                </div>
                                <div style="font-size:11px;color:var(--text3);margin:2px 0 6px">Feb 18 · Groceries</div>
                                <div style="display:flex;align-items:center;gap:6px;flex-wrap:wrap">
                                    <span class="acct-ai-pill">✨ Groceries</span>
                                    <span class="acct-conf-high">High confidence</span>
                                </div>
                            </div>
                        </div>
                        <div class="acct-review-actions">
                            <button class="acct-approve-btn" onclick="approveTransaction('acct-txn-2')">✓ Correct</button>
                            <button class="acct-wrong-btn"   onclick="openCatSheet('acct-txn-2', 'Woolworths Metro')">✗ Wrong</button>
                        </div>
                    </div>

                    <!-- Transaction 3 -->
                    <div class="acct-review-item" id="acct-txn-3">
                        <div class="acct-review-inner">
                            <div class="list-icon" style="background:rgba(124,110,250,0.12);font-size:16px;flex-shrink:0">🎬</div>
                            <div style="flex:1;min-width:0">
                                <div style="display:flex;align-items:baseline;justify-content:space-between;gap:8px">
                                    <span style="font-size:13px;font-weight:600;color:var(--text)">Event Cinemas</span>
                                    <span style="font-size:14px;font-weight:700;color:var(--red);flex-shrink:0">−$28.50</span>
                                </div>
                                <div style="font-size:11px;color:var(--text3);margin:2px 0 6px">Feb 17 · Entertainment</div>
                                <div style="display:flex;align-items:center;gap:6px;flex-wrap:wrap">
                                    <span class="acct-ai-pill">✨ Entertainment</span>
                                    <span class="acct-conf-high">High confidence</span>
                                </div>
                            </div>
                        </div>
                        <div class="acct-review-actions">
                            <button class="acct-approve-btn" onclick="approveTransaction('acct-txn-3')">✓ Correct</button>
                            <button class="acct-wrong-btn"   onclick="openCatSheet('acct-txn-3', 'Event Cinemas')">✗ Wrong</button>
                        </div>
                    </div>

                    <!-- Transaction 4 -->
                    <div class="acct-review-item" id="acct-txn-4">
                        <div class="acct-review-inner">
                            <div class="list-icon" style="background:rgba(255,107,107,0.12);font-size:16px;flex-shrink:0">🍜</div>
                            <div style="flex:1;min-width:0">
                                <div style="display:flex;align-items:baseline;justify-content:space-between;gap:8px">
                                    <span style="font-size:13px;font-weight:600;color:var(--text)">Grill'd Burgers</span>
                                    <span style="font-size:14px;font-weight:700;color:var(--red);flex-shrink:0">−$22.90</span>
                                </div>
                                <div style="font-size:11px;color:var(--text3);margin:2px 0 6px">Feb 17 · Dining</div>
                                <div style="display:flex;align-items:center;gap:6px;flex-wrap:wrap">
                                    <span class="acct-ai-pill">✨ Dining Out</span>
                                    <span class="acct-conf-medium">Medium confidence</span>
                                </div>
                            </div>
                        </div>
                        <div class="acct-review-actions">
                            <button class="acct-approve-btn" onclick="approveTransaction('acct-txn-4')">✓ Correct</button>
                            <button class="acct-wrong-btn"   onclick="openCatSheet('acct-txn-4', 'Grill\'d Burgers')">✗ Wrong</button>
                        </div>
                    </div>

                    <!-- Transaction 5 -->
                    <div class="acct-review-item" id="acct-txn-5">
                        <div class="acct-review-inner">
                            <div class="list-icon" style="background:rgba(0,180,255,0.12);font-size:16px;flex-shrink:0">🏥</div>
                            <div style="flex:1;min-width:0">
                                <div style="display:flex;align-items:baseline;justify-content:space-between;gap:8px">
                                    <span style="font-size:13px;font-weight:600;color:var(--text)">Priceline Pharmacy</span>
                                    <span style="font-size:14px;font-weight:700;color:var(--red);flex-shrink:0">−$18.75</span>
                                </div>
                                <div style="font-size:11px;color:var(--text3);margin:2px 0 6px">Feb 16 · Health</div>
                                <div style="display:flex;align-items:center;gap:6px;flex-wrap:wrap">
                                    <span class="acct-ai-pill">✨ Health &amp; Wellness</span>
                                    <span class="acct-conf-medium">Medium confidence</span>
                                </div>
                            </div>
                        </div>
                        <div class="acct-review-actions">
                            <button class="acct-approve-btn" onclick="approveTransaction('acct-txn-5')">✓ Correct</button>
                            <button class="acct-wrong-btn"   onclick="openCatSheet('acct-txn-5', 'Priceline Pharmacy')">✗ Wrong</button>
                        </div>
                    </div>

                    <!-- Transaction 6 -->
                    <div class="acct-review-item" id="acct-txn-6">
                        <div class="acct-review-inner">
                            <div class="list-icon" style="background:rgba(255,160,0,0.12);font-size:16px;flex-shrink:0">☕</div>
                            <div style="flex:1;min-width:0">
                                <div style="display:flex;align-items:baseline;justify-content:space-between;gap:8px">
                                    <span style="font-size:13px;font-weight:600;color:var(--text)">Seven Seeds Coffee</span>
                                    <span style="font-size:14px;font-weight:700;color:var(--red);flex-shrink:0">−$9.50</span>
                                </div>
                                <div style="font-size:11px;color:var(--text3);margin:2px 0 6px">Feb 15 · Coffee</div>
                                <div style="display:flex;align-items:center;gap:6px;flex-wrap:wrap">
                                    <span class="acct-ai-pill">✨ Coffee &amp; Drinks</span>
                                    <span class="acct-conf-high">High confidence</span>
                                </div>
                            </div>
                        </div>
                        <div class="acct-review-actions">
                            <button class="acct-approve-btn" onclick="approveTransaction('acct-txn-6')">✓ Correct</button>
                            <button class="acct-wrong-btn"   onclick="openCatSheet('acct-txn-6', 'Seven Seeds Coffee')">✗ Wrong</button>
                        </div>
                    </div>

                </div><!-- /acct-review-list -->

                <!-- Empty state (hidden until all reviewed) -->
                <div class="acct-empty-state" id="acct-empty-state">
                    <div class="acct-empty-icon">✅</div>
                    <div class="acct-empty-title">All caught up!</div>
                    <div class="acct-empty-sub">You've reviewed all your transactions.<br>AI insights &amp; goal suggestions are now active.</div>
                </div>

            </div><!-- /acct-pane-review -->

            <!-- ─── RULES PANE ─── -->
            <div class="tab-pane" id="acct-pane-rules">

                <div class="section-hd">
                    <div class="section-title">Auto-categorisation Rules · 8</div>
                </div>

                <div class="list-card">

                    <!-- Rule 1 (user-created) -->
                    <div class="acct-rule-row">
                        <div class="list-icon" style="background:rgba(0,200,150,0.12);font-size:15px;flex-shrink:0">🛒</div>
                        <div class="acct-rule-info">
                            <div style="display:flex;align-items:center;gap:6px">
                                <span class="acct-rule-merchant">Woolworths</span>
                                <span class="badge badge-muted" style="font-size:9px">You</span>
                            </div>
                            <div class="acct-rule-arrow">→ Groceries</div>
                        </div>
                        <div class="acct-toggle"><div class="acct-toggle-track"><div class="acct-toggle-thumb"></div></div></div>
                        <button class="acct-delete-btn">🗑</button>
                    </div>

                    <!-- Rule 2 (user-created) -->
                    <div class="acct-rule-row">
                        <div class="list-icon" style="background:rgba(0,160,100,0.12);font-size:15px;flex-shrink:0">🏋️</div>
                        <div class="acct-rule-info">
                            <div style="display:flex;align-items:center;gap:6px">
                                <span class="acct-rule-merchant">Anytime Fitness</span>
                                <span class="badge badge-muted" style="font-size:9px">You</span>
                            </div>
                            <div class="acct-rule-arrow">→ Health &amp; Wellness</div>
                        </div>
                        <div class="acct-toggle"><div class="acct-toggle-track"><div class="acct-toggle-thumb"></div></div></div>
                        <button class="acct-delete-btn">🗑</button>
                    </div>

                    <!-- Rule 3 (user-created) -->
                    <div class="acct-rule-row">
                        <div class="list-icon" style="background:rgba(124,110,250,0.12);font-size:15px;flex-shrink:0">🎮</div>
                        <div class="acct-rule-info">
                            <div style="display:flex;align-items:center;gap:6px">
                                <span class="acct-rule-merchant">Steam</span>
                                <span class="badge badge-muted" style="font-size:9px">You</span>
                            </div>
                            <div class="acct-rule-arrow">→ Entertainment</div>
                        </div>
                        <div class="acct-toggle"><div class="acct-toggle-track"><div class="acct-toggle-thumb"></div></div></div>
                        <button class="acct-delete-btn">🗑</button>
                    </div>

                    <!-- Rule 4 (user-created) -->
                    <div class="acct-rule-row">
                        <div class="list-icon" style="background:rgba(255,107,107,0.12);font-size:15px;flex-shrink:0">🍕</div>
                        <div class="acct-rule-info">
                            <div style="display:flex;align-items:center;gap:6px">
                                <span class="acct-rule-merchant">Domino's Pizza</span>
                                <span class="badge badge-muted" style="font-size:9px">You</span>
                            </div>
                            <div class="acct-rule-arrow">→ Dining Out</div>
                        </div>
                        <div class="acct-toggle"><div class="acct-toggle-track"><div class="acct-toggle-thumb"></div></div></div>
                        <button class="acct-delete-btn">🗑</button>
                    </div>

                    <!-- Rule 5 (AI-detected) -->
                    <div class="acct-rule-row">
                        <div class="list-icon" style="background:rgba(255,160,0,0.12);font-size:15px;flex-shrink:0">⛽</div>
                        <div class="acct-rule-info">
                            <div style="display:flex;align-items:center;gap:6px">
                                <span class="acct-rule-merchant">Shell</span>
                                <span class="badge badge-brand" style="font-size:9px">✨ AI</span>
                            </div>
                            <div class="acct-rule-arrow">→ Transport</div>
                        </div>
                        <div class="acct-toggle"><div class="acct-toggle-track"><div class="acct-toggle-thumb"></div></div></div>
                        <button class="acct-delete-btn">🗑</button>
                    </div>

                    <!-- Rule 6 (AI-detected) -->
                    <div class="acct-rule-row">
                        <div class="list-icon" style="background:rgba(0,200,150,0.12);font-size:15px;flex-shrink:0">🥗</div>
                        <div class="acct-rule-info">
                            <div style="display:flex;align-items:center;gap:6px">
                                <span class="acct-rule-merchant">Coles</span>
                                <span class="badge badge-brand" style="font-size:9px">✨ AI</span>
                            </div>
                            <div class="acct-rule-arrow">→ Groceries</div>
                        </div>
                        <div class="acct-toggle"><div class="acct-toggle-track"><div class="acct-toggle-thumb"></div></div></div>
                        <button class="acct-delete-btn">🗑</button>
                    </div>

                    <!-- Rule 7 (AI-detected) -->
                    <div class="acct-rule-row">
                        <div class="list-icon" style="background:rgba(0,180,255,0.12);font-size:15px;flex-shrink:0">🚌</div>
                        <div class="acct-rule-info">
                            <div style="display:flex;align-items:center;gap:6px">
                                <span class="acct-rule-merchant">Myki / Opal</span>
                                <span class="badge badge-brand" style="font-size:9px">✨ AI</span>
                            </div>
                            <div class="acct-rule-arrow">→ Transport</div>
                        </div>
                        <div class="acct-toggle"><div class="acct-toggle-track"><div class="acct-toggle-thumb"></div></div></div>
                        <button class="acct-delete-btn">🗑</button>
                    </div>

                    <!-- Rule 8 (AI-detected) -->
                    <div class="acct-rule-row">
                        <div class="list-icon" style="background:rgba(255,160,0,0.12);font-size:15px;flex-shrink:0">☕</div>
                        <div class="acct-rule-info">
                            <div style="display:flex;align-items:center;gap:6px">
                                <span class="acct-rule-merchant">Seven Seeds</span>
                                <span class="badge badge-brand" style="font-size:9px">✨ AI</span>
                            </div>
                            <div class="acct-rule-arrow">→ Coffee &amp; Drinks</div>
                        </div>
                        <div class="acct-toggle"><div class="acct-toggle-track"><div class="acct-toggle-thumb"></div></div></div>
                        <button class="acct-delete-btn">🗑</button>
                    </div>

                </div><!-- /list-card rules -->

                <div class="acct-info-card">
                    <strong>✨ AI auto-rules</strong> are created when Totem detects 3+ transactions from the same merchant with a consistent category. You can disable or delete any rule — your edits always take priority.
                </div>

            </div><!-- /acct-pane-rules -->

        </div><!-- /tab-scroll -->

    </div><!-- /screen-accounts -->

    <!-- ══════════════════════════════════════════════
         SCREEN: INSIGHTS (placeholder)
    ══════════════════════════════════════════════ -->
    <!-- ══════════════════════════════════════════════
         SCREEN: INSIGHTS
    ══════════════════════════════════════════════ -->
    <div class="app-screen" id="screen-insights">

        <div class="screen-header">
            <div class="screen-title">Insights</div>
            <div class="header-action" style="color:var(--text2);font-size:12px;font-weight:600">Feb 2026</div>
        </div>

        <div class="subtab-bar">
            <div class="subtab active" id="ins-tab-spend"    onclick="switchInsTab('spend')">Spend</div>
            <div class="subtab"        id="ins-tab-trends"   onclick="switchInsTab('trends')">Trends</div>
            <div class="subtab"        id="ins-tab-income"   onclick="switchInsTab('income')">Income</div>
            <div class="subtab"        id="ins-tab-forecast" onclick="switchInsTab('forecast')">Forecast</div>
        </div>

        <div class="tab-scroll">

            <!-- ─── SPEND PANE ─── -->
            <div class="tab-pane active" id="ins-pane-spend">

                <!-- Period selector -->
                <div class="ins-period-bar" style="margin-top:4px">
                    <div class="ins-period-chip active">This Month</div>
                    <div class="ins-period-chip">3 Months</div>
                    <div class="ins-period-chip">12 Months</div>
                </div>

                <!-- KPI row -->
                <div class="ins-kpi-row">
                    <div class="ins-kpi-card">
                        <div class="ins-kpi-label">Spent</div>
                        <div class="ins-kpi-value">$2,781</div>
                        <div class="ins-kpi-sub">of month so far</div>
                    </div>
                    <div class="ins-kpi-card">
                        <div class="ins-kpi-label">Daily avg</div>
                        <div class="ins-kpi-value">$146</div>
                        <div class="ins-kpi-sub">19 days tracked</div>
                    </div>
                    <div class="ins-kpi-card">
                        <div class="ins-kpi-label">Saved</div>
                        <div class="ins-kpi-value" style="color:var(--green)">18%</div>
                        <div class="ins-kpi-sub">of income rcvd</div>
                    </div>
                </div>

                <!-- Category breakdown -->
                <div class="section-hd">
                    <div class="section-title">By Category · % of income</div>
                    <div class="section-link">$6,400 / mo</div>
                </div>
                <div class="list-card" style="margin-bottom:14px">
                    <div class="cat-item">
                        <span class="cat-emoji">🏠</span>
                        <span class="cat-name">Housing</span>
                        <div class="cat-bar"><div class="cat-track"><div class="cat-fill fill-brand" style="width:100%"></div></div></div>
                        <span class="cat-pct">25%</span>
                        <span style="font-size:11px;color:var(--text2);width:40px;text-align:right">$1,600</span>
                    </div>
                    <div class="cat-item">
                        <span class="cat-emoji">🍜</span>
                        <span class="cat-name">Dining Out</span>
                        <div class="cat-bar"><div class="cat-track"><div class="cat-fill" style="width:68%;background:var(--red)"></div></div></div>
                        <span class="cat-pct" style="color:var(--red)">5%</span>
                        <span style="font-size:11px;color:var(--text2);width:40px;text-align:right">$341</span>
                    </div>
                    <div class="cat-item">
                        <span class="cat-emoji">🛒</span>
                        <span class="cat-name">Groceries</span>
                        <div class="cat-bar"><div class="cat-track"><div class="cat-fill fill-brand" style="width:44%"></div></div></div>
                        <span class="cat-pct">3%</span>
                        <span style="font-size:11px;color:var(--text2);width:40px;text-align:right">$178</span>
                    </div>
                    <div class="cat-item">
                        <span class="cat-emoji">🚗</span>
                        <span class="cat-name">Transport</span>
                        <div class="cat-bar"><div class="cat-track"><div class="cat-fill fill-brand" style="width:30%"></div></div></div>
                        <span class="cat-pct">2%</span>
                        <span style="font-size:11px;color:var(--text2);width:40px;text-align:right">$122</span>
                    </div>
                    <div class="cat-item">
                        <span class="cat-emoji">🛍️</span>
                        <span class="cat-name">Shopping</span>
                        <div class="cat-bar"><div class="cat-track"><div class="cat-fill fill-brand" style="width:26%"></div></div></div>
                        <span class="cat-pct">2%</span>
                        <span style="font-size:11px;color:var(--text2);width:40px;text-align:right">$106</span>
                    </div>
                    <div class="cat-item">
                        <span class="cat-emoji">🎬</span>
                        <span class="cat-name">Entertainment</span>
                        <div class="cat-bar"><div class="cat-track"><div class="cat-fill fill-brand" style="width:21%"></div></div></div>
                        <span class="cat-pct">1%</span>
                        <span style="font-size:11px;color:var(--text2);width:40px;text-align:right">$85</span>
                    </div>
                    <div class="cat-item">
                        <span class="cat-emoji">☕</span>
                        <span class="cat-name">Coffee</span>
                        <div class="cat-bar"><div class="cat-track"><div class="cat-fill fill-brand" style="width:16%"></div></div></div>
                        <span class="cat-pct">1%</span>
                        <span style="font-size:11px;color:var(--text2);width:40px;text-align:right">$64</span>
                    </div>
                    <div class="cat-item">
                        <span class="cat-emoji">📱</span>
                        <span class="cat-name">Subscriptions</span>
                        <div class="cat-bar"><div class="cat-track"><div class="cat-fill fill-brand" style="width:15%"></div></div></div>
                        <span class="cat-pct">1%</span>
                        <span style="font-size:11px;color:var(--text2);width:40px;text-align:right">$60</span>
                    </div>
                    <div class="cat-item">
                        <span class="cat-emoji">🏥</span>
                        <span class="cat-name">Health</span>
                        <div class="cat-bar"><div class="cat-track"><div class="cat-fill fill-brand" style="width:11%"></div></div></div>
                        <span class="cat-pct">&lt;1%</span>
                        <span style="font-size:11px;color:var(--text2);width:40px;text-align:right">$45</span>
                    </div>
                    <div class="cat-item" style="border-bottom:none">
                        <span class="cat-emoji">💡</span>
                        <span class="cat-name">Utilities</span>
                        <div class="cat-bar"><div class="cat-track"><div class="cat-fill fill-brand" style="width:19%"></div></div></div>
                        <span class="cat-pct">2%</span>
                        <span style="font-size:11px;color:var(--text2);width:40px;text-align:right">$120</span>
                    </div>
                </div>

                <!-- Top merchants -->
                <div class="section-hd"><div class="section-title">Top Merchants</div></div>
                <div class="list-card">
                    <div class="ins-merchant-row">
                        <div class="list-icon" style="background:rgba(255,107,107,0.12);font-size:14px;flex-shrink:0">🍜</div>
                        <span class="ins-merchant-name">Grill'd</span>
                        <div class="ins-merchant-bar-wrap"><div class="ins-merchant-bar-track"><div class="ins-merchant-bar-fill" style="width:100%;background:var(--red)"></div></div></div>
                        <span class="ins-merchant-amount" style="color:var(--red)">$341</span>
                    </div>
                    <div class="ins-merchant-row">
                        <div class="list-icon" style="background:rgba(0,200,150,0.12);font-size:14px;flex-shrink:0">🛒</div>
                        <span class="ins-merchant-name">Woolworths</span>
                        <div class="ins-merchant-bar-wrap"><div class="ins-merchant-bar-track"><div class="ins-merchant-bar-fill" style="width:52%"></div></div></div>
                        <span class="ins-merchant-amount">$178</span>
                    </div>
                    <div class="ins-merchant-row">
                        <div class="list-icon" style="background:rgba(255,160,0,0.12);font-size:14px;flex-shrink:0">⛽</div>
                        <span class="ins-merchant-name">Shell</span>
                        <div class="ins-merchant-bar-wrap"><div class="ins-merchant-bar-track"><div class="ins-merchant-bar-fill" style="width:36%"></div></div></div>
                        <span class="ins-merchant-amount">$122</span>
                    </div>
                    <div class="ins-merchant-row">
                        <div class="list-icon" style="background:rgba(124,110,250,0.12);font-size:14px;flex-shrink:0">🛍️</div>
                        <span class="ins-merchant-name">Amazon AU</span>
                        <div class="ins-merchant-bar-wrap"><div class="ins-merchant-bar-track"><div class="ins-merchant-bar-fill" style="width:31%"></div></div></div>
                        <span class="ins-merchant-amount">$106</span>
                    </div>
                    <div class="ins-merchant-row">
                        <div class="list-icon" style="background:rgba(0,200,150,0.12);font-size:14px;flex-shrink:0">🛒</div>
                        <span class="ins-merchant-name">Coles</span>
                        <div class="ins-merchant-bar-wrap"><div class="ins-merchant-bar-track"><div class="ins-merchant-bar-fill" style="width:29%"></div></div></div>
                        <span class="ins-merchant-amount">$98</span>
                    </div>
                </div>

                <!-- AI Spending insight -->
                <div class="insight-card" style="margin-top:12px">
                    <div class="insight-icon">🍜</div>
                    <div>
                        <div class="insight-tag">✨ Totem AI</div>
                        <div class="insight-text">Dining Out is your fastest-growing category — up <strong>+34%</strong> vs your 3-month average. At this rate you'll overshoot your $464 budget by ~$60.</div>
                        <div class="insight-cta">View dining transactions →</div>
                    </div>
                </div>

            </div><!-- /ins-pane-spend -->

            <!-- ─── TRENDS PANE ─── -->
            <div class="tab-pane" id="ins-pane-trends">

                <!-- Lifestyle Creep card — full detail -->
                <div class="section-hd"><div class="section-title">Lifestyle Creep</div><div class="section-link">Learn more</div></div>
                <div class="creep-card" style="margin-bottom:12px">
                    <div class="creep-top">
                        <div>
                            <div class="creep-building-label" style="color:var(--amber)">⚠ Creep Detected</div>
                            <div class="creep-status">+6% above income growth</div>
                        </div>
                        <div style="text-align:right">
                            <div style="font-size:28px;font-weight:800;color:var(--amber);letter-spacing:-1px">+6%</div>
                            <div style="font-size:10px;color:var(--text3)">3mo delta</div>
                        </div>
                    </div>
                    <div class="progress-track" style="margin-bottom:10px">
                        <div class="progress-fill" style="width:60%;background:var(--amber)"></div>
                    </div>
                    <div class="ins-creep-detail">
                        <div class="ins-creep-row">
                            <span class="ins-creep-row-label">Spend growth · 3mo vs 12mo avg</span>
                            <span class="ins-creep-row-val" style="color:var(--red)">+11%</span>
                        </div>
                        <div class="ins-creep-row">
                            <span class="ins-creep-row-label">Income growth · same period</span>
                            <span class="ins-creep-row-val" style="color:var(--green)">+5%</span>
                        </div>
                        <div class="ins-creep-row">
                            <span class="ins-creep-row-label">Lifestyle Creep delta</span>
                            <span class="ins-creep-row-val" style="color:var(--amber)">+6%</span>
                        </div>
                        <div class="ins-creep-row">
                            <span class="ins-creep-row-label">Main driver</span>
                            <span class="ins-creep-row-val">Dining Out 🍜</span>
                        </div>
                    </div>
                    <div class="creep-desc" style="margin-top:12px">Your income grew <strong>+5%</strong> this year but spending grew <strong>+11%</strong> — mostly driven by Dining Out (+34%) and Shopping (+18%). Keeping Dining Out within budget would eliminate creep.</div>
                </div>

                <!-- Safety Net card -->
                <div class="section-hd"><div class="section-title">Safety Net</div></div>
                <div class="health-pair" style="margin-bottom:12px">
                    <div class="health-card">
                        <div class="health-icon">🛡️</div>
                        <div class="health-label">Runway</div>
                        <div class="health-value" style="color:var(--amber)">2.6</div>
                        <div class="health-unit">months</div>
                        <div class="badge badge-amber" style="margin-top:8px">Below 3mo target</div>
                    </div>
                    <div class="health-card">
                        <div class="health-icon">💰</div>
                        <div class="health-label">Liquid savings</div>
                        <div class="health-value">$12,450</div>
                        <div class="health-unit">ANZ NetSaver</div>
                        <div class="badge badge-green" style="margin-top:8px">↑ $500 this month</div>
                    </div>
                </div>

                <!-- Month-over-month spend chart -->
                <div class="section-hd"><div class="section-title">Monthly Spend Trend</div><div class="section-link">Discretionary</div></div>
                <div class="metric-card" style="margin-bottom:12px">
                    <div style="display:flex;justify-content:space-between;align-items:flex-start">
                        <div>
                            <div class="metric-label">5-Month Average</div>
                            <div class="metric-value">$1,106</div>
                        </div>
                        <div style="text-align:right">
                            <div class="metric-label">vs last month</div>
                            <div style="font-size:18px;font-weight:700;color:var(--green)">−$0</div>
                            <div class="metric-sub">flat · on track</div>
                        </div>
                    </div>
                    <div class="mini-chart" style="height:60px">
                        <div class="mini-bar-wrap">
                            <div class="mini-bar" style="height:37px;background:rgba(124,110,250,0.25)"></div>
                            <span class="mini-label">Oct</span>
                        </div>
                        <div class="mini-bar-wrap">
                            <div class="mini-bar" style="height:43px;background:rgba(124,110,250,0.35)"></div>
                            <span class="mini-label">Nov</span>
                        </div>
                        <div class="mini-bar-wrap">
                            <div class="mini-bar" style="height:60px;background:rgba(255,107,107,0.6)"></div>
                            <span class="mini-label" style="color:var(--red)">Dec</span>
                        </div>
                        <div class="mini-bar-wrap">
                            <div class="mini-bar" style="height:40px;background:rgba(124,110,250,0.45)"></div>
                            <span class="mini-label">Jan</span>
                        </div>
                        <div class="mini-bar-wrap">
                            <div class="mini-bar" style="height:40px;background:var(--brand)"></div>
                            <span class="mini-label active">Feb*</span>
                        </div>
                    </div>
                    <div style="font-size:10px;color:var(--text3);margin-top:6px">* Feb is partial (19/28 days). Dec spike driven by holidays.</div>
                </div>

                <!-- Savings velocity -->
                <div class="section-hd"><div class="section-title">Savings Velocity</div></div>
                <div class="metric-card">
                    <div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:4px">
                        <div>
                            <div class="metric-label">Savings Rate</div>
                            <div class="metric-value">18%</div>
                            <div class="badge badge-amber" style="margin-top:4px">↓ from 27% in Jan</div>
                        </div>
                        <div style="text-align:right">
                            <div class="metric-label">3-Month saved</div>
                            <div class="metric-value">$3,980</div>
                            <div class="metric-sub" style="color:var(--green)">+$980 vs goal</div>
                        </div>
                    </div>
                    <div class="mini-chart">
                        <div class="mini-bar-wrap">
                            <div class="mini-bar" style="height:16px;background:rgba(124,110,250,0.3)"></div>
                            <span class="mini-label">Oct</span>
                        </div>
                        <div class="mini-bar-wrap">
                            <div class="mini-bar" style="height:20px;background:rgba(124,110,250,0.4)"></div>
                            <span class="mini-label">Nov</span>
                        </div>
                        <div class="mini-bar-wrap">
                            <div class="mini-bar" style="height:8px;background:rgba(255,107,107,0.5)"></div>
                            <span class="mini-label" style="color:var(--red)">Dec</span>
                        </div>
                        <div class="mini-bar-wrap">
                            <div class="mini-bar" style="height:40px;background:var(--green)"></div>
                            <span class="mini-label">Jan</span>
                        </div>
                        <div class="mini-bar-wrap">
                            <div class="mini-bar" style="height:28px;background:var(--brand)"></div>
                            <span class="mini-label active">Feb</span>
                        </div>
                    </div>
                </div>

            </div><!-- /ins-pane-trends -->

            <!-- ─── INCOME PANE ─── -->
            <div class="tab-pane" id="ins-pane-income">

                <!-- KPI row -->
                <div class="ins-kpi-row" style="margin-top:4px">
                    <div class="ins-kpi-card">
                        <div class="ins-kpi-label">Monthly</div>
                        <div class="ins-kpi-value">$6,400</div>
                        <div class="ins-kpi-sub">net income</div>
                    </div>
                    <div class="ins-kpi-card">
                        <div class="ins-kpi-label">YTD Total</div>
                        <div class="ins-kpi-value">$9,640</div>
                        <div class="ins-kpi-sub">since Jan 1</div>
                    </div>
                    <div class="ins-kpi-card">
                        <div class="ins-kpi-label">Growth</div>
                        <div class="ins-kpi-value" style="color:var(--green)">+5%</div>
                        <div class="ins-kpi-sub">vs last year</div>
                    </div>
                </div>

                <!-- Income vs Spend dual-bar chart -->
                <div class="section-hd"><div class="section-title">Income vs Spend</div><div class="section-link">5 months</div></div>
                <div class="metric-card" style="margin-bottom:14px">
                    <div class="ins-dual-chart">
                        <!-- Oct -->
                        <div class="ins-month-col">
                            <div class="ins-bar-pair">
                                <div class="ins-bar-i" style="height:72px"></div>
                                <div class="ins-bar-s" style="height:54px"></div>
                            </div>
                            <span class="ins-chart-label">Oct</span>
                        </div>
                        <!-- Nov -->
                        <div class="ins-month-col">
                            <div class="ins-bar-pair">
                                <div class="ins-bar-i" style="height:72px"></div>
                                <div class="ins-bar-s" style="height:57px"></div>
                            </div>
                            <span class="ins-chart-label">Nov</span>
                        </div>
                        <!-- Dec -->
                        <div class="ins-month-col">
                            <div class="ins-bar-pair">
                                <div class="ins-bar-i" style="height:72px"></div>
                                <div class="ins-bar-s" style="height:65px;background:var(--amber);opacity:0.85"></div>
                            </div>
                            <span class="ins-chart-label" style="color:var(--amber)">Dec</span>
                        </div>
                        <!-- Jan -->
                        <div class="ins-month-col">
                            <div class="ins-bar-pair">
                                <div class="ins-bar-i" style="height:72px"></div>
                                <div class="ins-bar-s" style="height:53px"></div>
                            </div>
                            <span class="ins-chart-label">Jan</span>
                        </div>
                        <!-- Feb (partial) -->
                        <div class="ins-month-col">
                            <div class="ins-bar-pair">
                                <div class="ins-bar-i" style="height:36px;opacity:0.9;border-style:dashed;border:1.5px dashed rgba(124,110,250,0.5);background:rgba(124,110,250,0.2)"></div>
                                <div class="ins-bar-s" style="height:31px"></div>
                            </div>
                            <span class="ins-chart-label active">Feb*</span>
                        </div>
                    </div>
                    <div class="ins-chart-legend">
                        <div class="ins-legend-item">
                            <div class="ins-legend-dot" style="background:var(--brand);opacity:0.65"></div>
                            Income
                        </div>
                        <div class="ins-legend-item">
                            <div class="ins-legend-dot" style="background:var(--red);opacity:0.75"></div>
                            Spend
                        </div>
                    </div>
                    <div style="font-size:10px;color:var(--text3);margin-top:6px">* Feb income shows one of two pay periods. Dec spend spike = holiday season.</div>
                </div>

                <!-- Pay history -->
                <div class="section-hd"><div class="section-title">Pay History</div><div class="section-link">Acme Corp</div></div>
                <div class="list-card" style="margin-bottom:14px">
                    <div class="ins-pay-row">
                        <div class="list-icon" style="background:rgba(0,200,150,0.12);font-size:15px;flex-shrink:0">💰</div>
                        <div style="flex:1">
                            <div style="font-size:13px;font-weight:600;color:var(--text)">Salary — Acme Corp</div>
                            <div style="font-size:11px;color:var(--text3)">Feb 8, 2026 · Fortnightly</div>
                        </div>
                        <div style="font-size:15px;font-weight:700;color:var(--green)">+$3,240</div>
                    </div>
                    <div class="ins-pay-row">
                        <div class="list-icon" style="background:rgba(0,200,150,0.12);font-size:15px;flex-shrink:0">💰</div>
                        <div style="flex:1">
                            <div style="font-size:13px;font-weight:600;color:var(--text)">Salary — Acme Corp</div>
                            <div style="font-size:11px;color:var(--text3)">Jan 25, 2026 · Fortnightly</div>
                        </div>
                        <div style="font-size:15px;font-weight:700;color:var(--green)">+$3,240</div>
                    </div>
                    <div class="ins-pay-row">
                        <div class="list-icon" style="background:rgba(0,200,150,0.12);font-size:15px;flex-shrink:0">💰</div>
                        <div style="flex:1">
                            <div style="font-size:13px;font-weight:600;color:var(--text)">Salary — Acme Corp</div>
                            <div style="font-size:11px;color:var(--text3)">Jan 11, 2026 · Fortnightly</div>
                        </div>
                        <div style="font-size:15px;font-weight:700;color:var(--green)">+$3,240</div>
                    </div>
                    <div class="ins-pay-row" style="border-bottom:none">
                        <div class="list-icon" style="background:rgba(0,200,150,0.12);font-size:15px;flex-shrink:0">💰</div>
                        <div style="flex:1">
                            <div style="font-size:13px;font-weight:600;color:var(--text)">Salary — Acme Corp</div>
                            <div style="font-size:11px;color:var(--text3)">Dec 28, 2025 · Fortnightly</div>
                        </div>
                        <div style="font-size:15px;font-weight:700;color:var(--green)">+$3,200</div>
                    </div>
                </div>

                <!-- Savings breakdown -->
                <div class="section-hd"><div class="section-title">Savings Breakdown · Feb</div></div>
                <div class="list-card">
                    <div class="burn-item">
                        <div class="burn-top">
                            <div class="burn-cat">💰 ANZ NetSaver transfer</div>
                            <div class="burn-right">
                                <div class="burn-spent" style="color:var(--green)">$500</div>
                                <div class="burn-budget">of $500 goal</div>
                            </div>
                        </div>
                        <div class="progress-track">
                            <div class="progress-fill fill-green" style="width:100%"></div>
                        </div>
                    </div>
                    <div class="burn-item" style="border-bottom:none">
                        <div class="burn-top">
                            <div class="burn-cat">🎯 Japan Trip fund</div>
                            <div class="burn-right">
                                <div class="burn-spent" style="color:var(--brand)">$280</div>
                                <div class="burn-budget">of $300 goal</div>
                            </div>
                        </div>
                        <div class="progress-track">
                            <div class="progress-fill fill-brand" style="width:93%"></div>
                        </div>
                    </div>
                </div>

            </div><!-- /ins-pane-income -->

            <!-- ─── FORECAST PANE ─── -->
            <div class="tab-pane" id="ins-pane-forecast">

                <!-- Month-end projection hero -->
                <div class="ins-proj-card" style="margin-top:4px">
                    <div class="ins-proj-label">Feb projected surplus</div>
                    <div class="ins-proj-amount" style="color:var(--green)">+$2,241</div>
                    <div class="ins-proj-grid">
                        <div class="ins-proj-cell">
                            <div class="ins-proj-cell-label">Income</div>
                            <div class="ins-proj-cell-val">$6,480</div>
                        </div>
                        <div class="ins-proj-cell">
                            <div class="ins-proj-cell-label">Projected spend</div>
                            <div class="ins-proj-cell-val" style="color:var(--red)">$4,239</div>
                        </div>
                        <div class="ins-proj-cell">
                            <div class="ins-proj-cell-label">Days left</div>
                            <div class="ins-proj-cell-val">9</div>
                        </div>
                    </div>
                    <div style="font-size:11px;color:var(--text3);margin-top:10px">Based on $146/day avg · 9 days remaining · upcoming: Rent $1,600 (Feb 21)</div>
                </div>

                <!-- 90-day cash flow projection -->
                <div class="section-hd">
                    <div class="section-title">90-Day Cash Flow</div>
                    <div class="section-link">Mar – May 2026</div>
                </div>
                <div class="metric-card" style="margin-bottom:12px">
                    <div style="display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:2px">
                        <div>
                            <div class="metric-label">Avg projected surplus</div>
                            <div class="metric-value" style="color:var(--green)">+$2,180</div>
                        </div>
                        <div style="text-align:right">
                            <div class="metric-label">3-month total</div>
                            <div class="metric-value">$6,540</div>
                            <div class="metric-sub">if trend holds</div>
                        </div>
                    </div>
                    <!-- Dual bar chart: income vs projected spend -->
                    <div class="ins-dual-chart" style="margin-top:14px">
                        <div class="ins-month-col">
                            <div class="ins-bar-pair">
                                <div class="ins-bar-i" style="height:72px"></div>
                                <div class="ins-bar-s" style="height:46px"></div>
                            </div>
                            <span class="ins-chart-label">Mar</span>
                        </div>
                        <div class="ins-month-col">
                            <div class="ins-bar-pair">
                                <div class="ins-bar-i" style="height:72px"></div>
                                <div class="ins-bar-s" style="height:48px"></div>
                            </div>
                            <span class="ins-chart-label">Apr</span>
                        </div>
                        <div class="ins-month-col">
                            <div class="ins-bar-pair">
                                <div class="ins-bar-i" style="height:72px"></div>
                                <div class="ins-bar-s" style="height:47px"></div>
                            </div>
                            <span class="ins-chart-label">May</span>
                        </div>
                    </div>
                    <div class="ins-chart-legend">
                        <div class="ins-legend-item">
                            <div class="ins-legend-dot" style="background:var(--brand);opacity:0.65"></div>Income
                        </div>
                        <div class="ins-legend-item">
                            <div class="ins-legend-dot" style="background:var(--red);opacity:0.75"></div>Projected spend
                        </div>
                    </div>
                    <div style="font-size:10px;color:var(--text3);margin-top:6px">Projections use 3-month rolling average. Excludes one-off or seasonal spend.</div>
                </div>

                <!-- Goal completion forecasts -->
                <div class="section-hd"><div class="section-title">Goal Completion Forecast</div></div>
                <div class="list-card" style="margin-bottom:12px">

                    <!-- Japan Trip -->
                    <div class="ins-goal-row">
                        <div class="list-icon" style="background:rgba(124,110,250,0.12);font-size:16px;flex-shrink:0">✈️</div>
                        <div class="ins-goal-info">
                            <div class="ins-goal-name">Japan Trip Fund</div>
                            <div class="ins-goal-bar-row">
                                <div style="flex:1">
                                    <div class="progress-track">
                                        <div class="progress-fill fill-brand" style="width:68%"></div>
                                    </div>
                                </div>
                                <span style="font-size:11px;color:var(--text3);flex-shrink:0">$2,840 / $4,200</span>
                            </div>
                        </div>
                        <div class="ins-goal-eta">May<br><span style="font-size:9px;font-weight:500;color:var(--text3)">2026</span></div>
                    </div>

                    <!-- Safety Net -->
                    <div class="ins-goal-row">
                        <div class="list-icon" style="background:rgba(255,160,0,0.12);font-size:16px;flex-shrink:0">🛡️</div>
                        <div class="ins-goal-info">
                            <div class="ins-goal-name">Safety Net · 3 months</div>
                            <div class="ins-goal-bar-row">
                                <div style="flex:1">
                                    <div class="progress-track">
                                        <div class="progress-fill" style="width:86%;background:var(--amber)"></div>
                                    </div>
                                </div>
                                <span style="font-size:11px;color:var(--text3);flex-shrink:0">$12,450 / $14,550</span>
                            </div>
                        </div>
                        <div class="ins-goal-eta" style="color:var(--amber)">Apr<br><span style="font-size:9px;font-weight:500;color:var(--text3)">2026</span></div>
                    </div>

                    <!-- Car fund -->
                    <div class="ins-goal-row" style="border-bottom:none">
                        <div class="list-icon" style="background:rgba(0,200,150,0.12);font-size:16px;flex-shrink:0">🚗</div>
                        <div class="ins-goal-info">
                            <div class="ins-goal-name">New Car Deposit</div>
                            <div class="ins-goal-bar-row">
                                <div style="flex:1">
                                    <div class="progress-track">
                                        <div class="progress-fill fill-green" style="width:31%"></div>
                                    </div>
                                </div>
                                <span style="font-size:11px;color:var(--text3);flex-shrink:0">$3,100 / $10,000</span>
                            </div>
                        </div>
                        <div class="ins-goal-eta" style="color:var(--text2)">Dec<br><span style="font-size:9px;font-weight:500;color:var(--text3)">2026</span></div>
                    </div>

                </div>

                <!-- Upcoming large expenses -->
                <div class="section-hd"><div class="section-title">Upcoming Known Expenses</div></div>
                <div class="list-card" style="margin-bottom:12px">
                    <div class="list-item">
                        <div class="list-icon" style="background:rgba(255,107,107,0.12);font-size:15px">🏠</div>
                        <div style="flex:1">
                            <div style="font-size:13px;font-weight:600;color:var(--text)">Rent</div>
                            <div style="font-size:11px;color:var(--text3)">Feb 21 · recurring monthly</div>
                        </div>
                        <div style="font-size:14px;font-weight:700;color:var(--red)">−$1,600</div>
                    </div>
                    <div class="list-item">
                        <div class="list-icon" style="background:rgba(255,160,0,0.12);font-size:15px">🚗</div>
                        <div style="flex:1">
                            <div style="font-size:13px;font-weight:600;color:var(--text)">Car registration</div>
                            <div style="font-size:11px;color:var(--text3)">Mar 15 · annual</div>
                        </div>
                        <div style="font-size:14px;font-weight:700;color:var(--amber)">−$680</div>
                    </div>
                    <div class="list-item" style="border-bottom:none">
                        <div class="list-icon" style="background:rgba(124,110,250,0.12);font-size:15px">✈️</div>
                        <div style="flex:1">
                            <div style="font-size:13px;font-weight:600;color:var(--text)">Japan flights deposit</div>
                            <div style="font-size:11px;color:var(--text3)">Apr 1 · planned</div>
                        </div>
                        <div style="font-size:14px;font-weight:700;color:var(--brand)">−$1,200</div>
                    </div>
                </div>

                <!-- AI risk & opportunity flags -->
                <div class="section-hd"><div class="section-title">✨ AI Flags</div></div>
                <div class="list-card">
                    <div class="ins-risk-item">
                        <div class="ins-risk-dot" style="background:var(--red)"></div>
                        <div class="ins-risk-text"><strong style="color:var(--text)">Dining Out creep</strong> — at current rate you'll overspend your Feb budget by ~$60. Cutting 2 dinners this week keeps you on track.</div>
                    </div>
                    <div class="ins-risk-item">
                        <div class="ins-risk-dot" style="background:var(--amber)"></div>
                        <div class="ins-risk-text"><strong style="color:var(--text)">Car rego in 24 days</strong> — $680 due Mar 15. Your current surplus easily covers it, but worth keeping $700 unallocated this month.</div>
                    </div>
                    <div class="ins-risk-item">
                        <div class="ins-risk-dot" style="background:var(--green)"></div>
                        <div class="ins-risk-text"><strong style="color:var(--text)">Japan Trip on track</strong> — at $280/month you'll hit $4,200 by May. Increasing to $380/month would get you there a month early.</div>
                    </div>
                    <div class="ins-risk-item" style="border-bottom:none">
                        <div class="ins-risk-dot" style="background:var(--brand)"></div>
                        <div class="ins-risk-text"><strong style="color:var(--text)">Safety Net nearly there</strong> — $2,100 to go. Two months of current savings rate puts you at the 3-month target in April.</div>
                    </div>
                </div>

            </div><!-- /ins-pane-forecast -->

        </div><!-- /tab-scroll -->

    </div><!-- /screen-insights -->


    <!-- ════════════ PERSISTENT BOTTOM NAV ════════════ -->
    <div class="bottom-nav">
        <div class="nav-item active" id="nav-home" onclick="navigate('home')">
            <div class="nav-icon"><svg viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg></div>
            <span class="nav-label">Home</span>
        </div>
        <div class="nav-item" id="nav-plan" onclick="navigate('plan')">
            <div class="nav-icon"><svg viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14l-5-5 1.41-1.41L12 14.17l7.59-7.59L21 8l-9 9z"/></svg></div>
            <span class="nav-label">Plan</span>
        </div>
        <div class="nav-item" id="nav-calendar" onclick="navigate('calendar')">
            <div class="nav-icon"><svg viewBox="0 0 24 24"><path d="M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"/></svg></div>
            <span class="nav-label">Calendar</span>
        </div>
        <div class="nav-item" id="nav-accounts" onclick="navigate('accounts')">
            <div class="nav-icon"><svg viewBox="0 0 24 24"><path d="M4 10v7h3v-7H4zm6 0v7h3v-7h-3zM2 22h19v-3H2v3zm14-12v7h3v-7h-3zM11.5 1L2 6v2h19V6l-9.5-5z"/></svg></div>
            <span class="nav-label">Accounts</span>
        </div>
        <div class="nav-item" id="nav-insights" onclick="navigate('insights')">
            <div class="nav-icon"><svg viewBox="0 0 24 24"><path d="M3.5 18.49l6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z"/></svg></div>
            <span class="nav-label">Insights</span>
        </div>
    </div>

    <!-- Persistent FAB -->
    <button class="fab" onclick="openChat()">
        ✨
        <div class="fab-dot"></div>
    </button>

    <!-- ════════════ BOTTOM SHEET (Add Goal) ════════════ -->
    <div class="sheet-backdrop" id="sheet-backdrop" onclick="closeSheet()"></div>
    <div class="bottom-sheet" id="add-goal-sheet">
        <div class="sheet-handle"></div>
        <div class="sheet-title">What type of goal?</div>
        <div class="sheet-sub">Choose the type that fits what you're trying to do.</div>
        <div class="type-option to-save" onclick="closeSheet()">
            <div class="type-icon">🎯</div>
            <div><div class="type-name">Save Up</div><div class="type-desc">Set a target amount and track your progress toward it</div></div>
            <span class="type-chevron">›</span>
        </div>
        <div class="type-option to-spend" onclick="closeSheet()">
            <div class="type-icon">📊</div>
            <div><div class="type-name">Reduce Spending</div><div class="type-desc">Set a monthly limit on a category and build a streak</div></div>
            <span class="type-chevron">›</span>
        </div>
        <div class="type-option to-debt" onclick="closeSheet()">
            <div class="type-icon">💳</div>
            <div><div class="type-name">Pay Off Debt</div><div class="type-desc">Track your progress on clearing a credit card or loan</div></div>
            <span class="type-chevron">›</span>
        </div>
    </div>

    <!-- ════════════ CALENDAR DAY DETAIL SHEET ════════════ -->
    <div class="sheet-backdrop" id="cal-backdrop" onclick="closeCalSheet()"></div>
    <div class="bottom-sheet" id="cal-day-sheet" style="max-height:72%;">
        <div class="sheet-handle"></div>
        <div id="cal-sheet-content" style="overflow-y:auto;max-height:calc(72vh - 60px);scrollbar-width:none;padding-bottom:4px"></div>
    </div>

    <!-- ════════════ ACCOUNTS: ACCOUNT DETAIL SHEET ════════════ -->
    <div class="sheet-backdrop" id="acct-acct-backdrop" onclick="closeAcctSheet()"></div>
    <div class="bottom-sheet" id="acct-acct-sheet" style="max-height:75%;">
        <div class="sheet-handle"></div>
        <div id="acct-acct-content" style="overflow-y:auto;max-height:calc(75vh - 60px);scrollbar-width:none;padding:0 20px 20px"></div>
    </div>

    <!-- ════════════ ACCOUNTS: CATEGORY PICKER SHEET ════════════ -->
    <div class="sheet-backdrop" id="acct-cat-backdrop" onclick="closeCatSheet()"></div>
    <div class="bottom-sheet" id="acct-cat-sheet" style="max-height:65%;">
        <div class="sheet-handle"></div>
        <div style="padding:0 20px 20px">
            <div style="font-size:17px;font-weight:800;color:var(--text);margin-bottom:4px">Correct Category</div>
            <div style="font-size:12px;color:var(--text2);margin-bottom:16px">Categorising: <strong id="acct-cat-merchant" style="color:var(--text)"></strong></div>
            <div class="acct-cat-grid">
                <div class="acct-cat-option" onclick="pickCategory('Groceries','🛒')">
                    <span class="acct-cat-icon">🛒</span><span class="acct-cat-name">Groceries</span>
                </div>
                <div class="acct-cat-option" onclick="pickCategory('Dining Out','🍜')">
                    <span class="acct-cat-icon">🍜</span><span class="acct-cat-name">Dining Out</span>
                </div>
                <div class="acct-cat-option" onclick="pickCategory('Coffee & Drinks','☕')">
                    <span class="acct-cat-icon">☕</span><span class="acct-cat-name">Coffee &amp; Drinks</span>
                </div>
                <div class="acct-cat-option" onclick="pickCategory('Transport','🚌')">
                    <span class="acct-cat-icon">🚌</span><span class="acct-cat-name">Transport</span>
                </div>
                <div class="acct-cat-option" onclick="pickCategory('Entertainment','🎬')">
                    <span class="acct-cat-icon">🎬</span><span class="acct-cat-name">Entertainment</span>
                </div>
                <div class="acct-cat-option" onclick="pickCategory('Health & Wellness','🏥')">
                    <span class="acct-cat-icon">🏥</span><span class="acct-cat-name">Health &amp; Wellness</span>
                </div>
                <div class="acct-cat-option" onclick="pickCategory('Shopping','🛍️')">
                    <span class="acct-cat-icon">🛍️</span><span class="acct-cat-name">Shopping</span>
                </div>
                <div class="acct-cat-option" onclick="pickCategory('Utilities','💡')">
                    <span class="acct-cat-icon">💡</span><span class="acct-cat-name">Utilities</span>
                </div>
                <div class="acct-cat-option" onclick="pickCategory('Subscriptions','📱')">
                    <span class="acct-cat-icon">📱</span><span class="acct-cat-name">Subscriptions</span>
                </div>
                <div class="acct-cat-option" onclick="pickCategory('Personal Care','💇')">
                    <span class="acct-cat-icon">💇</span><span class="acct-cat-name">Personal Care</span>
                </div>
                <div class="acct-cat-option" onclick="pickCategory('Other','📦')">
                    <span class="acct-cat-icon">📦</span><span class="acct-cat-name">Other</span>
                </div>
            </div>
        </div>
    </div>

    <!-- ════════════ AI CHAT OVERLAY ════════════ -->
    <div class="chat-overlay" id="chat-overlay">
        <div class="chat-header">
            <div><div class="chat-ai-label">✨ Totem AI</div><div class="chat-title">Ask me anything</div></div>
            <button class="chat-close" onclick="closeChat()">✕</button>
        </div>
        <div class="chat-messages" id="chat-messages">
            <div class="chat-msg ai">
                <div class="msg-ai-tag">✨ Totem AI</div>
                <div class="msg-bubble">Hey Alex! 👋 I've been looking at your spending this week. Your Dining Out is running a bit hot — $341 of $464 with 8 days left. Want me to help you finish the month on track?</div>
            </div>
            <div class="chat-msg user">
                <div class="msg-bubble">Yes please, what should I do?</div>
            </div>
            <div class="chat-msg ai">
                <div class="msg-ai-tag">✨ Totem AI</div>
                <div class="msg-bubble">You need to keep Dining Out under <strong>$123</strong> for the next 8 days — about $15/day. Cook at home 5 days this week, budget $30–40 for one dinner out. You'll finish around $450, just under your $464 target. 🎯</div>
            </div>
        </div>
        <div class="chat-suggestions">
            <div class="chat-sugg-label">Suggested questions</div>
            <div class="chat-chips">
                <button class="chat-chip" onclick="fillChat(this)">How's my Japan Trip goal?</button>
                <button class="chat-chip" onclick="fillChat(this)">Show my spending trends</button>
                <button class="chat-chip" onclick="fillChat(this)">Set a new budget</button>
            </div>
        </div>
        <div class="chat-input-row">
            <input class="chat-input" id="chat-input" type="text" placeholder="Ask about your money…">
            <button class="chat-send" onclick="sendChat()">↑</button>
        </div>
    </div>

</div><!-- /phone-screen -->
</div><!-- /phone-outer -->

<!-- Arrow controls (only visible on Home screen) -->
<div id="arrow-row" class="arrow-row">
    <div class="arrow-btn" onclick="prev()">←</div>
    <span class="arrow-label" id="arrowLabel">Overview · 1 of 3</span>
    <div class="arrow-btn" onclick="next()">→</div>
</div>

<!-- Plan AI state toggle (only visible on Plan screen) -->
<div id="plan-controls" style="display:none; gap:10px;">
    <button id="plan-btn-milestone" onclick="setPlanState('milestone')" style="background:var(--card);border:1px solid var(--brand);border-radius:20px;padding:7px 16px;font-size:12px;font-weight:600;color:var(--brand);cursor:pointer;font-family:inherit;">🔒 AI Locked (22/30)</button>
    <button id="plan-btn-ai" onclick="setPlanState('ai')" style="background:var(--card);border:1px solid var(--border);border-radius:20px;padding:7px 16px;font-size:12px;font-weight:600;color:var(--text2);cursor:pointer;font-family:inherit;">✨ AI Active</button>
</div>

</div><!-- /phone-col -->
</div><!-- /page-wrapper -->

<script>
/* ════════════════════════════════════════════════
   SCREEN NAVIGATION
════════════════════════════════════════════════ */
const screens = ['home', 'plan', 'calendar', 'accounts', 'insights'];
let currentScreen = 'home';

function navigate(id) {
    if (id === currentScreen) return;

    // Exit current
    const old = document.getElementById('screen-' + currentScreen);
    old.classList.remove('active');
    old.classList.add('exit-left');
    setTimeout(() => old.classList.remove('exit-left'), 300);

    // Enter new
    currentScreen = id;
    const nw = document.getElementById('screen-' + id);
    nw.classList.add('active');

    // Update bottom nav
    screens.forEach(s => {
        document.getElementById('nav-' + s).classList.toggle('active', s === id);
        const sb = document.getElementById('sb-' + s);
        if (sb) sb.classList.toggle('active', s === id);
    });

    // Show/hide screen-specific controls
    document.getElementById('arrow-row').style.display     = (id === 'home')  ? 'flex' : 'none';
    document.getElementById('plan-controls').style.display = (id === 'plan')  ? 'flex' : 'none';

    // Close any open calendar sheet when navigating away
    if (id !== 'calendar') closeCalSheet();

    // Close accounts sheets when navigating away; reset header when entering
    if (id !== 'accounts') { closeAcctSheet(); closeCatSheet(); }
    if (id === 'accounts') {
        const activeAcctTab = document.querySelector('#screen-accounts .subtab.active');
        const tabName = activeAcctTab ? activeAcctTab.id.replace('acct-tab-', '') : 'accounts';
        updateAcctHeader(tabName);
    }

    // Update sidebar notes
    document.querySelectorAll('.note-set').forEach(n => n.classList.remove('active'));
    const noteEl = document.getElementById('notes-' + id);
    if (noteEl) noteEl.classList.add('active');

    // Update header action (Plan screen toggles based on active tab)
    if (id === 'plan') {
        const activeTab = document.querySelector('#screen-plan .subtab.active');
        updatePlanHeader(activeTab ? activeTab.id : 'plan-tab-goals');
    }
}

/* ════════════════════════════════════════════════
   DASHBOARD TIER SYSTEM
════════════════════════════════════════════════ */
let cur = 0;
const tLabels = ['Overview · 1 of 3', 'Financial Health · 2 of 3', 'Trends & Patterns · 3 of 3'];
const tBadges = ['Tier 1 · Overview', 'Tier 2 · Financial Health', 'Tier 3 · Trends'];

function goTo(i) {
    cur = i;
    document.getElementById('slider').style.transform = `translateX(-${cur * 33.333}%)`;
    [0,1,2].forEach(n => {
        document.getElementById('d'+n).classList.toggle('active', n === cur);
    });
    document.getElementById('arrowLabel').textContent = tLabels[cur];
    document.getElementById('tierBadge').textContent  = tBadges[cur];
}
function next() { if (cur < 2) goTo(cur + 1); }
function prev() { if (cur > 0) goTo(cur - 1); }

// Swipe on phone for Dashboard tiers
let tx = 0;
document.querySelector('.phone-screen').addEventListener('touchstart', e => { tx = e.touches[0].clientX; });
document.querySelector('.phone-screen').addEventListener('touchend', e => {
    if (currentScreen !== 'home') return;
    const d = tx - e.changedTouches[0].clientX;
    if (Math.abs(d) > 40) { d > 0 ? next() : prev(); }
});
document.addEventListener('keydown', e => {
    if (currentScreen !== 'home') return;
    if (e.key === 'ArrowRight') next();
    if (e.key === 'ArrowLeft')  prev();
});

/* ════════════════════════════════════════════════
   PLAN SCREEN — TABS
════════════════════════════════════════════════ */
function switchPlanTab(tab) {
    document.querySelectorAll('#screen-plan .subtab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('#screen-plan .tab-pane').forEach(p => p.classList.remove('active'));
    document.getElementById('plan-tab-' + tab).classList.add('active');
    document.getElementById('plan-pane-' + tab).classList.add('active');
    updatePlanHeader('plan-tab-' + tab);
}
function updatePlanHeader(tabId) {
    const action = document.querySelector('#screen-plan .header-action');
    if (tabId === 'plan-tab-goals')   { action.textContent = '+ Add Goal';   action.onclick = openSheet; }
    if (tabId === 'plan-tab-budgets') { action.textContent = '+ Add Budget'; action.onclick = null; }
}

/* ════════════════════════════════════════════════
   PLAN SCREEN — AI STATE TOGGLE
════════════════════════════════════════════════ */
function setPlanState(state) {
    const ms  = document.getElementById('plan-milestone');
    const ai  = document.getElementById('plan-ai-suggestion');
    const bms = document.getElementById('plan-btn-milestone');
    const bai = document.getElementById('plan-btn-ai');

    if (state === 'milestone') {
        ms.style.display  = 'block';
        ai.classList.remove('visible');
        bms.style.borderColor = 'var(--brand)';     bms.style.color = 'var(--brand)';
        bai.style.borderColor = 'var(--border)';    bai.style.color = 'var(--text2)';
    } else {
        ms.style.display  = 'none';
        ai.classList.add('visible');
        bms.style.borderColor = 'var(--border)';    bms.style.color = 'var(--text2)';
        bai.style.borderColor = 'var(--brand)';     bai.style.color = 'var(--brand)';
    }
    // Switch to Goals tab
    switchPlanTab('goals');
}

/* ════════════════════════════════════════════════
   COMPLETED SECTION TOGGLE
════════════════════════════════════════════════ */
function toggleCompleted() {
    const goals   = document.getElementById('completed-goals');
    const chevron = document.getElementById('completed-chevron');
    const open = goals.classList.toggle('visible');
    chevron.classList.toggle('open', open);
}

/* ════════════════════════════════════════════════
   BOTTOM SHEET (Add Goal)
════════════════════════════════════════════════ */
function openSheet() {
    document.getElementById('sheet-backdrop').classList.add('visible');
    document.getElementById('add-goal-sheet').classList.add('open');
}
function closeSheet() {
    document.getElementById('sheet-backdrop').classList.remove('visible');
    document.getElementById('add-goal-sheet').classList.remove('open');
}

/* ════════════════════════════════════════════════
   AI CHAT OVERLAY
════════════════════════════════════════════════ */
function openChat() {
    document.getElementById('chat-overlay').classList.add('open');
}
function closeChat() {
    document.getElementById('chat-overlay').classList.remove('open');
}
function fillChat(el) {
    document.getElementById('chat-input').value = el.textContent;
    document.getElementById('chat-input').focus();
}
function sendChat() {
    const input = document.getElementById('chat-input');
    const val = input.value.trim();
    if (!val) return;
    const msgs = document.getElementById('chat-messages');
    const um = document.createElement('div');
    um.className = 'chat-msg user';
    um.innerHTML = `<div class="msg-bubble">${val}</div>`;
    msgs.appendChild(um);
    input.value = '';
    msgs.scrollTop = msgs.scrollHeight;
    setTimeout(() => {
        const am = document.createElement('div');
        am.className = 'chat-msg ai';
        am.innerHTML = `<div class="msg-ai-tag">✨ Totem AI</div><div class="msg-bubble">Let me check that for you… 🔍</div>`;
        msgs.appendChild(am);
        msgs.scrollTop = msgs.scrollHeight;
    }, 700);
}
document.getElementById('chat-input').addEventListener('keydown', e => {
    if (e.key === 'Enter') sendChat();
});

/* ════════════════════════════════════════════════
   THEME SWITCHER
════════════════════════════════════════════════ */
function setTheme(theme) {
    const html = document.documentElement;
    html.className = theme === 'midnight' ? '' : 't-' + theme;
    document.body.style.background = 'var(--body-bg)';
    ['midnight','oled','light'].forEach(t => {
        document.getElementById('t-' + t).classList.toggle('active', t === theme);
    });
}

/* ════════════════════════════════════════════════
   CALENDAR — DAY DATA
════════════════════════════════════════════════ */
const calFebData = {
    1:  { txns: [{icon:'🛒',name:'Coles',cat:'Groceries',time:'10:22 AM',amt:'$32.00'},{icon:'🚌',name:'Opal Card',cat:'Transport',time:'8:05 AM',amt:'$13.00'}], total:'$45' },
    2:  { txns: [{icon:'🍔',name:'Mad Mex',cat:'Eating Out',time:'1:02 PM',amt:'$28.00'}], total:'$28' },
    3:  { txns: [], total: null, empty: true },
    4:  { txns: [{icon:'🍔',name:"Nando's",cat:'Eating Out',time:'7:30 PM',amt:'$64.00'},{icon:'🛒',name:'Woolworths',cat:'Groceries',time:'5:15 PM',amt:'$23.00'}], total:'$87' },
    5:  { txns: [{icon:'🚌',name:'Opal Card',cat:'Transport',time:'8:12 AM',amt:'$18.00'}], total:'$18' },
    6:  { txns: [{icon:'🎭',name:'Hoyts Cinema',cat:'Entertainment',time:'7:00 PM',amt:'$56.00'},{icon:'🍔',name:'Guzman y Gomez',cat:'Eating Out',time:'6:30 PM',amt:'$18.00'}], total:'$74' },
    7:  { txns: [{icon:'🛒',name:'Aldi',cat:'Groceries',time:'10:45 AM',amt:'$78.00'},{icon:'🍔',name:'Fratelli Fresh',cat:'Eating Out',time:'1:30 PM',amt:'$78.00'}], total:'$156' },
    8:  { txns: [{icon:'💰',name:'ANZ Payroll',cat:'Income',time:'12:00 AM',amt:'$3,200.00',income:true},{icon:'🛒',name:'Coles',cat:'Groceries',time:'4:30 PM',amt:'$34.00'}], payday:true, total:null },
    9:  { txns: [{icon:'🛒',name:'Harris Farm Markets',cat:'Groceries',time:'6:00 PM',amt:'$28.00'}], total:'$28' },
    10: { txns: [{icon:'🍔',name:'Uber Eats',cat:'Eating Out',time:'12:45 PM',amt:'$52.00'}], total:'$52' },
    11: { txns: [{icon:'🛒',name:'Woolworths',cat:'Groceries',time:'5:30 PM',amt:'$23.00'},{icon:'🚌',name:'Opal Card',cat:'Transport',time:'8:00 AM',amt:'$12.00'}], total:'$35' },
    12: { txns: [{icon:'🍔',name:'The Grounds of Alexandria',cat:'Eating Out',time:'12:00 PM',amt:'$98.00'}], total:'$98' },
    13: { txns: [{icon:'🍔',name:'Bar Luca',cat:'Eating Out',time:'7:00 PM',amt:'$54.00'},{icon:'📱',name:'Spotify',cat:'Subscriptions',time:'9:00 AM',amt:'$12.99'}], total:'$67' },
    14: { txns: [{icon:'🍔',name:'Nour Restaurant',cat:'Eating Out',time:'7:30 PM',amt:'$120.00'},{icon:'🎭',name:'Event Cinemas',cat:'Entertainment',time:'6:00 PM',amt:'$60.00'}], total:'$180', note:'💌 Valentine\'s Day' },
    15: { txns: [{icon:'🛒',name:'Coles',cat:'Groceries',time:'11:00 AM',amt:'$56.00'}], total:'$56' },
    16: { txns: [{icon:'☕',name:"Pablo & Rusty's",cat:'Eating Out',time:'8:30 AM',amt:'$12.00'}], total:'$12' },
    17: { txns: [{icon:'🍔',name:"Grill'd Burgers",cat:'Eating Out',time:'12:30 PM',amt:'$44.00'}], total:'$44' },
    18: { txns: [{icon:'🍔',name:'Rockpool Bar & Grill',cat:'Eating Out',time:'7:00 PM',amt:'$89.00'}], total:'$89' },
    19: { txns: [{icon:'🍔',name:'Uber Eats',cat:'Eating Out',time:'12:30 PM',amt:'$37.00'},{icon:'🚌',name:'Opal Card',cat:'Transport',time:'8:00 AM',amt:'$17.00'}], total:'$54', today:true },
    20: { bills:[{icon:'📺',name:'Netflix',amt:'$18.99'}], future:true },
    21: { bills:[{icon:'🏠',name:'Rent — REA Group',amt:'$1,000.00'}], future:true },
    22: { bills:[{icon:'🎵',name:'Spotify',amt:'$12.99'}], future:true, payday:true },
    23: { future:true }, 24: { future:true }, 25: { future:true },
    26: { future:true }, 27: { future:true }, 28: { future:true },
};

const _febDayOfWeek = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'];

/* ════════════════════════════════════════════════
   CALENDAR — DAY SELECTION
════════════════════════════════════════════════ */
function calSelectDay(day, month) {
    month = month || (currentCalMonth === 'jan' ? 'jan' : 'feb');
    document.querySelectorAll('.cal-day').forEach(d => d.classList.remove('selected'));
    const cell = document.getElementById('cal-day-' + day);
    if (cell) cell.classList.add('selected');

    // January cells — simplified message
    if (month === 'jan') {
        const dow = _febDayOfWeek[new Date(2026, 0, day).getDay()];
        document.getElementById('cal-sheet-content').innerHTML =
            `<div class="cal-sheet-date-hd">${dow}, ${day} January 2026</div>
             <div style="text-align:center;padding:28px 0;color:var(--text2);font-size:13px;line-height:1.7">
                 Full transaction history for January<br>is available in the production app.
             </div>
             <div style="text-align:center">
                 <span style="font-size:12px;font-weight:600;color:var(--brand);cursor:pointer" onclick="closeCalSheet();calJumpToday()">Back to February →</span>
             </div>`;
        document.getElementById('cal-backdrop').classList.add('visible');
        document.getElementById('cal-day-sheet').classList.add('open');
        return;
    }

    const data = calFebData[day];
    if (!data) return;
    const dow = _febDayOfWeek[new Date(2026, 1, day).getDay()];
    const todayLabel = data.today ? ' · Today' : '';
    let html = `<div class="cal-sheet-date-hd">${dow}, ${day} February 2026${todayLabel}</div>`;

    // Total / summary row
    if (data.payday && !data.future) {
        html += `<div class="cal-sheet-total-row">
            <span class="cal-sheet-total-lbl">Net (income day)</span>
            <span class="cal-sheet-total-amt income">+$3,166</span>
        </div>`;
    } else if (data.future && data.payday) {
        html += `<div class="cal-sheet-total-row">
            <span class="cal-sheet-total-lbl">Payday · Expected</span>
            <span class="cal-sheet-total-amt income">~+$3,200</span>
        </div>`;
    } else if (data.total) {
        html += `<div class="cal-sheet-total-row">
            <span class="cal-sheet-total-lbl">${data.today ? 'Spent so far today' : 'Total spent'}</span>
            <span class="cal-sheet-total-amt">−${data.total}</span>
        </div>`;
    }

    // Special day note
    if (data.note) {
        html += `<div style="font-size:12px;color:var(--text2);margin-bottom:10px;padding:7px 10px;background:rgba(255,107,107,0.08);border-radius:8px">${data.note}</div>`;
    }

    // Transactions
    if (data.txns && data.txns.length > 0) {
        html += `<div>`;
        for (const t of data.txns) {
            const amtStyle = t.income ? 'color:var(--brand)' : 'color:var(--text)';
            const prefix   = t.income ? '+' : '−';
            const iconBg   = t.income ? 'var(--brand-light)' : 'rgba(255,255,255,0.06)';
            html += `<div class="list-item" style="padding:10px 0">
                <div class="list-icon" style="background:${iconBg}">${t.icon}</div>
                <div class="list-info">
                    <div class="list-name">${t.name}</div>
                    <div class="list-sub">${t.cat} · ${t.time}</div>
                </div>
                <div class="list-right">
                    <div class="list-amount" style="${amtStyle}">${prefix}${t.amt}</div>
                </div>
            </div>`;
        }
        html += `</div>`;
    }

    // Upcoming bills (future days)
    if (data.bills && data.bills.length > 0) {
        html += `<div class="cal-upcoming-hd">Upcoming Bills</div>`;
        for (const b of data.bills) {
            html += `<div class="list-item" style="padding:10px 0">
                <div class="list-icon" style="background:var(--amber-light)">${b.icon}</div>
                <div class="list-info">
                    <div class="list-name">${b.name}</div>
                    <div class="list-sub">Auto-debit · Upcoming</div>
                </div>
                <div class="list-right">
                    <div class="list-amount" style="color:var(--amber)">−${b.amt}</div>
                </div>
            </div>`;
        }
    }

    // Empty state
    if (data.empty || ((!data.txns || data.txns.length === 0) && (!data.bills || data.bills.length === 0) && !data.payday)) {
        html += `<div style="text-align:center;padding:24px 0;color:var(--text2);font-size:13px">No transactions on this day.</div>`;
    }

    // Footer
    html += `<div style="margin-top:12px;padding-top:10px;border-top:1px solid var(--border);text-align:center">
        <span style="font-size:12px;font-weight:600;color:var(--brand);cursor:pointer" onclick="navigate('accounts')">View all in Accounts →</span>
    </div>`;

    document.getElementById('cal-sheet-content').innerHTML = html;
    document.getElementById('cal-backdrop').classList.add('visible');
    document.getElementById('cal-day-sheet').classList.add('open');
}

function closeCalSheet() {
    document.getElementById('cal-backdrop').classList.remove('visible');
    document.getElementById('cal-day-sheet').classList.remove('open');
    document.querySelectorAll('.cal-day').forEach(d => d.classList.remove('selected'));
}

/* ════════════════════════════════════════════════
   CALENDAR — VIEW SWITCHER (Month / Week / Day)
════════════════════════════════════════════════ */
let currentCalView = 'month';
let calWeekIndex   = 3;    // current week (Feb 15–21)
let calDayViewDay  = 19;   // default = today

function calSetView(view) {
    const prevView    = currentCalView;
    currentCalView    = view;
    const isMonth = view === 'month';
    const isWeek  = view === 'week';
    const isDay   = view === 'day';

    // Buttons
    ['month','week','day'].forEach(v =>
        document.getElementById('cal-btn-' + v).classList.toggle('active', v === view)
    );

    // Sections visibility
    const wd  = document.getElementById('cal-weekdays');
    const leg = document.getElementById('cal-legend');
    wd.style.display  = (isDay || isWeek) ? 'none' : '';
    leg.style.display = isDay ? 'none'  : '';

    document.getElementById('cal-grid').style.display      = isMonth ? '' : 'none';
    document.getElementById('cal-week-grid').classList.toggle('vis', isWeek);
    document.getElementById('cal-day-view').classList.toggle('vis', isDay);

    // Each view drives the shared top nav bar
    // Week and Day views only have February data — reset month to avoid Jan placeholder
    if (isMonth) restoreMonthNav();
    if (isWeek)  { currentCalMonth = 'feb'; renderCalWeek(calWeekIndex); }
    if (isDay)   { currentCalMonth = 'feb'; renderCalDayView(calDayViewDay); }

    closeCalSheet();
}

function renderCalDayView(day) {
    calDayViewDay = Math.max(1, Math.min(28, day));
    const data = calFebData[calDayViewDay] || {};
    const dow  = _febDayOfWeek[new Date(2026, 1, calDayViewDay).getDay()];
    const isToday  = calDayViewDay === 19;
    const isFuture = !!data.future;
    const txns  = data.txns  || [];
    const bills = data.bills || [];

    document.getElementById('cal-month-title').textContent    = `${dow}, ${calDayViewDay} Feb`;
    document.getElementById('cal-prev-btn').disabled          = calDayViewDay <= 1;
    document.getElementById('cal-next-btn').disabled          = calDayViewDay >= 28;
    document.getElementById('cal-today-btn').style.display    = isToday ? 'none' : 'inline';

    // Stat card
    let statLeft, statLeftVal, statRight, statRightVal, statRightColor = 'var(--text)';
    if (data.payday && !isFuture) {
        statLeft = 'Net Day'; statLeftVal = '+$3,166'; statRight = 'Transactions'; statRightVal = txns.length;
    } else if (isFuture && data.payday) {
        statLeft = 'Payday'; statLeftVal = '~$3,200'; statLeftVal = '~$3,200'; statRight = 'Bills Due'; statRightVal = bills.length; statRightColor = 'var(--amber)';
    } else if (isFuture) {
        statLeft = 'Bills Due'; statLeftVal = bills.length || '—'; statRight = 'Transactions'; statRightVal = '—'; statRightColor = bills.length ? 'var(--amber)' : 'var(--text3)';
    } else {
        statLeft = 'Spent'; statLeftVal = data.total ? '−' + data.total : '$0'; statRight = 'Transactions'; statRightVal = txns.length;
    }

    let html = `<div class="cal-day-stat-card">
        <div class="cal-day-stat"><div class="cal-day-stat-lbl">${statLeft}</div><div class="cal-day-stat-val" style="color:${data.payday && !isFuture ? 'var(--brand)' : 'var(--text)'}">${statLeftVal}</div></div>
        <div style="width:1px;background:var(--border)"></div>
        <div class="cal-day-stat"><div class="cal-day-stat-lbl">${statRight}</div><div class="cal-day-stat-val" style="color:${statRightColor}">${statRightVal}</div></div>
    </div>`;

    // Transactions
    if (txns.length > 0) {
        html += `<div class="section-hd"><div class="section-title">Transactions</div></div><div class="list-card">`;
        for (const t of txns) {
            const color  = t.income ? 'color:var(--brand)' : 'color:var(--text)';
            const prefix = t.income ? '+' : '−';
            const iconBg = t.income ? 'var(--brand-light)' : 'rgba(255,255,255,0.06)';
            html += `<div class="list-item">
                <div class="list-icon" style="background:${iconBg}">${t.icon}</div>
                <div class="list-info"><div class="list-name">${t.name}</div><div class="list-sub">${t.cat} · ${t.time}</div></div>
                <div class="list-right"><div class="list-amount" style="${color}">${prefix}${t.amt}</div></div>
            </div>`;
        }
        html += `</div>`;
    }

    // Bills
    if (bills.length > 0) {
        html += `<div class="section-hd"><div class="section-title">Upcoming Bills</div></div><div class="list-card">`;
        for (const b of bills) {
            html += `<div class="list-item">
                <div class="list-icon" style="background:var(--amber-light)">${b.icon}</div>
                <div class="list-info"><div class="list-name">${b.name}</div><div class="list-sub">Auto-debit · Upcoming</div></div>
                <div class="list-right"><div class="list-amount" style="color:var(--amber)">−${b.amt}</div></div>
            </div>`;
        }
        html += `</div>`;
    }

    // Empty state
    if (!txns.length && !bills.length && !data.payday) {
        html += `<div style="text-align:center;padding:40px 0;color:var(--text2);font-size:13px;line-height:1.7">No transactions on this day.</div>`;
    }

    // Valentine's note
    if (data.note) {
        html = html.replace('</div><div class="list-card">', `</div><div style="font-size:12px;color:var(--text2);margin-bottom:8px;padding:7px 10px;background:rgba(255,107,107,0.08);border-radius:8px">${data.note}</div><div class="list-card">`);
    }

    document.getElementById('cal-day-content').innerHTML = html;
}

function calDayNav(dir) {
    renderCalDayView(calDayViewDay + dir);
}

/* ════════════════════════════════════════════════
   CALENDAR — MONTH / WEEK NAVIGATION
════════════════════════════════════════════════ */
let currentCalMonth = 'feb';

function calChangeMonth(dir) {
    // Delegate to the active view's navigation
    if (currentCalView === 'week') { calNavWeek(dir); return; }
    if (currentCalView === 'day')  { renderCalDayView(calDayViewDay + dir); return; }

    if (dir === -1 && currentCalMonth === 'feb') {
        currentCalMonth = 'jan';
        document.getElementById('cal-month-title').textContent = 'January 2026';
        document.getElementById('cal-sum-spent').textContent   = '$1,073';
        document.getElementById('cal-sum-vs').textContent      = '+3%';
        document.getElementById('cal-sum-vs').style.color      = 'var(--red)';
        document.getElementById('cal-sum-vs-label').textContent = 'vs Last Mo.';
        document.getElementById('cal-sum-days').textContent    = '31 days';
        document.getElementById('cal-sum-days-label').textContent = 'Total';
        document.getElementById('cal-today-btn').style.display  = 'inline';
        document.getElementById('cal-prev-btn').disabled        = true;
        document.getElementById('cal-next-btn').disabled        = false;
        renderJanGrid();
    } else if (dir === 1 && currentCalMonth === 'jan') {
        currentCalMonth = 'feb';
        document.getElementById('cal-month-title').textContent = 'February 2026';
        document.getElementById('cal-sum-spent').textContent   = '$1,157';
        document.getElementById('cal-sum-vs').textContent      = '+8%';
        document.getElementById('cal-sum-vs').style.color      = 'var(--red)';
        document.getElementById('cal-sum-vs-label').textContent = 'vs Last Mo.';
        document.getElementById('cal-sum-days').textContent    = '9';
        document.getElementById('cal-sum-days-label').textContent = 'Days Left';
        document.getElementById('cal-today-btn').style.display  = 'none';
        document.getElementById('cal-prev-btn').disabled        = false;
        document.getElementById('cal-next-btn').disabled        = true;
        restoreFebGrid();
    }
}

function calJumpToday() {
    if (currentCalView === 'week') { renderCalWeek(3); return; }
    if (currentCalView === 'day')  { renderCalDayView(19); return; }
    calChangeMonth(1);
}

function restoreMonthNav() {
    const isFeb = currentCalMonth === 'feb';
    document.getElementById('cal-month-title').textContent    = isFeb ? 'February 2026' : 'January 2026';
    document.getElementById('cal-sum-spent').textContent      = isFeb ? '$1,157' : '$1,073';
    document.getElementById('cal-sum-vs').textContent         = isFeb ? '+8%' : '+3%';
    document.getElementById('cal-sum-vs').style.color         = 'var(--red)';
    document.getElementById('cal-sum-vs-label').textContent   = 'vs Last Mo.';
    document.getElementById('cal-sum-days').textContent       = isFeb ? '9' : '31 days';
    document.getElementById('cal-sum-days-label').textContent = isFeb ? 'Days Left' : 'Total';
    document.getElementById('cal-prev-btn').disabled          = !isFeb;
    document.getElementById('cal-next-btn').disabled          = isFeb;
}

/* ════════════════════════════════════════════════
   CALENDAR — WEEK VIEW DATA + RENDERING
════════════════════════════════════════════════ */
const calWeekData = {
    1: {
        range: 'Feb 1 – 7', spent: '$382', vsLast: '+8%', vsColor: 'var(--red)',
        daysLabel: 'Total Days', daysVal: '7',
        days: [
            { dow:'Sun', date:1,  tint:'tint-g', amount:'$45',  barPct:68,  dots:['var(--green)','var(--teal)'] },
            { dow:'Mon', date:2,  tint:'tint-a', amount:'$62',  barPct:93,  dots:['var(--red)','var(--amber)'] },
            { dow:'Tue', date:3,  tint:'',       amount:null,   barPct:0,   dots:[] },
            { dow:'Wed', date:4,  tint:'tint-r', amount:'$95',  barPct:143, dots:['var(--red)','var(--amber)'] },
            { dow:'Thu', date:5,  tint:'tint-g', amount:'$38',  barPct:57,  dots:['var(--green)'] },
            { dow:'Fri', date:6,  tint:'tint-g', amount:'$27',  barPct:40,  dots:['var(--red)'] },
            { dow:'Sat', date:7,  tint:'tint-r', amount:'$72',  barPct:109, dots:['var(--red)'] },
        ]
    },
    2: {
        range: 'Feb 8 – 14', spent: '$458', vsLast: '+20%', vsColor: 'var(--red)',
        daysLabel: 'Total Days', daysVal: '7',
        days: [
            { dow:'Sun', date:8,  tint:'tint-p', amount:'+$3,166', barPct:0,   dots:['var(--brand)'], income:true, payday:true },
            { dow:'Mon', date:9,  tint:'tint-g', amount:'$18',     barPct:27,  dots:['var(--teal)'] },
            { dow:'Tue', date:10, tint:'tint-g', amount:'$52',     barPct:78,  dots:['var(--green)'] },
            { dow:'Wed', date:11, tint:'tint-a', amount:'$61',     barPct:92,  dots:['var(--red)','var(--green)'] },
            { dow:'Thu', date:12, tint:'tint-g', amount:'$29',     barPct:43,  dots:['var(--teal)'] },
            { dow:'Fri', date:13, tint:'tint-r', amount:'$84',     barPct:126, dots:['var(--red)','var(--amber)'] },
            { dow:'Sat', date:14, tint:'tint-r', amount:'$180',    barPct:271, dots:['var(--red)','var(--amber)','var(--brand)'] },
        ]
    },
    3: {
        range: 'Feb 15 – 21', spent: '$255', vsLast: '−18%', vsColor: 'var(--green)',
        daysLabel: 'Days Left', daysVal: '2',
        days: [
            { dow:'Sun', date:15, tint:'tint-a', amount:'$56',  barPct:85,  dots:['var(--green)'] },
            { dow:'Mon', date:16, tint:'tint-g', amount:'$12',  barPct:18,  dots:['var(--red)'] },
            { dow:'Tue', date:17, tint:'tint-g', amount:'$44',  barPct:65,  dots:['var(--red)'] },
            { dow:'Wed', date:18, tint:'tint-r', amount:'$89',  barPct:134, dots:['var(--red)'] },
            { dow:'Thu', date:19, tint:'tint-a', amount:'$54',  barPct:80,  dots:['var(--red)','var(--teal)'], today:true },
            { dow:'Fri', date:20, tint:'',       amount:null,   barPct:0,   dots:[], future:true, bill:'📺 Netflix', billAmt:'−$18.99' },
            { dow:'Sat', date:21, tint:'',       amount:null,   barPct:0,   dots:[], future:true, bill:'🏠 Rent',    billAmt:'−$1,000' },
        ]
    },
    4: {
        range: 'Feb 22 – 28', spent: '—', vsLast: '—', vsColor: 'var(--text3)',
        daysLabel: 'Days Left', daysVal: '7',
        days: [
            { dow:'Sun', date:22, tint:'tint-p', amount:null, barPct:0, dots:[], future:true, payday:true, bill:'🎵 Spotify', billAmt:'−$12.99' },
            { dow:'Mon', date:23, tint:'', amount:null, barPct:0, dots:[], future:true },
            { dow:'Tue', date:24, tint:'', amount:null, barPct:0, dots:[], future:true },
            { dow:'Wed', date:25, tint:'', amount:null, barPct:0, dots:[], future:true },
            { dow:'Thu', date:26, tint:'', amount:null, barPct:0, dots:[], future:true },
            { dow:'Fri', date:27, tint:'', amount:null, barPct:0, dots:[], future:true },
            { dow:'Sat', date:28, tint:'', amount:null, barPct:0, dots:[], future:true },
        ]
    }
};

function renderCalWeek(idx) {
    calWeekIndex = Math.max(1, Math.min(4, idx));
    const wk = calWeekData[calWeekIndex];

    // Update nav
    document.getElementById('cal-month-title').textContent = wk.range;
    document.getElementById('cal-prev-btn').disabled       = calWeekIndex <= 1;
    document.getElementById('cal-next-btn').disabled       = calWeekIndex >= 4;
    document.getElementById('cal-today-btn').style.display = calWeekIndex !== 3 ? 'inline' : 'none';

    // Update summary strip
    document.getElementById('cal-sum-spent').textContent       = wk.spent;
    document.getElementById('cal-sum-vs').textContent          = wk.vsLast;
    document.getElementById('cal-sum-vs').style.color          = wk.vsColor;
    document.getElementById('cal-sum-vs-label').textContent    = 'vs Last Wk.';
    document.getElementById('cal-sum-days').textContent        = wk.daysVal;
    document.getElementById('cal-sum-days-label').textContent  = wk.daysLabel;

    // Build tile HTML
    let html = '';
    for (const d of wk.days) {
        const todayClass  = d.today  ? ' is-today'  : '';
        const futureClass = d.future ? ' future'    : '';
        const tintClass   = d.tint   ? ' ' + d.tint : '';
        const dateStyle   = d.future ? ' style="color:var(--text3)"' : '';

        let centerHtml, amtHtml;

        if (d.future) {
            const hasPayday = d.payday;
            const hasBill   = !!d.bill;
            if (hasPayday && hasBill) {
                centerHtml = `<div class="cal-week-future-lbl">Payday + bill due</div>
                              <div class="cal-week-bill-name">${d.bill}</div>`;
                amtHtml    = `<div class="cal-week-amount future-amt">${d.billAmt}</div>`;
            } else if (hasBill) {
                centerHtml = `<div class="cal-week-future-lbl">Bill due</div>
                              <div class="cal-week-bill-name">${d.bill}</div>`;
                amtHtml    = `<div class="cal-week-amount future-amt">${d.billAmt}</div>`;
            } else if (hasPayday) {
                centerHtml = `<div class="cal-week-future-lbl">Payday</div>
                              <div class="cal-week-bill-name" style="color:var(--brand)">~$3,200</div>`;
                amtHtml    = `<div class="cal-week-amount" style="color:var(--brand)">~$3,200</div>`;
            } else {
                centerHtml = `<div class="cal-week-future-lbl">No bills</div>`;
                amtHtml    = `<div class="cal-week-amount zero-amt">—</div>`;
            }
        } else if (!d.amount) {
            centerHtml = `<div class="cal-week-dots"></div>
                          <div class="cal-week-bar-row">
                              <div class="cal-week-bar-track"><div class="cal-week-bar-fill" style="width:0%"></div></div>
                              <span class="cal-week-bar-pct">$0</span>
                          </div>`;
            amtHtml    = `<div class="cal-week-amount zero-amt">$0</div>`;
        } else {
            const dotHtml  = d.dots.map(c => `<div class="cal-week-dot" style="background:${c}"></div>`).join('');
            const barWidth = Math.min(d.barPct, 100);
            centerHtml = `<div class="cal-week-dots">${dotHtml}</div>
                          <div class="cal-week-bar-row">
                              <div class="cal-week-bar-track"><div class="cal-week-bar-fill" style="width:${barWidth}%"></div></div>
                              <span class="cal-week-bar-pct">${d.barPct}%</span>
                          </div>`;
            amtHtml    = d.income
                ? `<div class="cal-week-amount" style="color:var(--brand)">${d.amount}</div>`
                : `<div class="cal-week-amount">${d.amount}</div>`;
        }

        html += `<div class="cal-week-row${tintClass}${todayClass}${futureClass}" onclick="calSelectDay(${d.date}, 'feb')">
            <div class="cal-week-day-label">
                <div class="cal-week-dow">${d.dow}</div>
                <div class="cal-week-date"${dateStyle}>${d.date}</div>
            </div>
            <div class="cal-week-center">${centerHtml}</div>
            ${amtHtml}
        </div>`;
    }

    const container = document.getElementById('cal-week-grid');
    container.style.opacity = '0';
    setTimeout(() => { container.innerHTML = html; container.style.opacity = '1'; }, 80);
}

function calNavWeek(dir) {
    renderCalWeek(calWeekIndex + dir);
}

// January 2026: starts Thursday (offset=4), 31 days, all past, no interaction detail
const janGrid = [
    ['','',''],['a','🔴🟡','$67'],['r','🟢🔴','$145'],['','',''],
    ['g','🟢','$24'],['g','🔴','$38'],['','',''],['a','🔴','$72'],
    ['a','🟡🔴','$55'],['r','🟢🔴','$120'],['','',''],['g','🟢','$30'],
    ['g','🔴','$45'],['','',''],['r','🔴','$82'],['g','🟡','$35'],
    ['r','🟢🔴','$98'],['p','',''],['g','🟢','$28'],['','',''],
    ['a','🔴','$55'],['g','🟢','$34'],['r','🔴🟡','$89'],['','',''],
    ['','',''],['a','🔴','$48'],['','',''],['','',''],
    ['a','🔴🟢','$64'],['g','🔴','$44'],['','',''],
];
const janDotColors = {'🔴':'var(--red)','🟢':'var(--green)','🟡':'var(--amber)','🔵':'var(--teal)'};

function renderJanGrid() {
    const grid = document.getElementById('cal-grid');
    grid.style.opacity = '0';
    let html = '';
    // 4 leading blanks (Jan 1 = Thursday → Sun/Mon/Tue/Wed blank)
    for (let b = 0; b < 4; b++) html += `<div class="cal-day blank"></div>`;
    for (let i = 0; i < 31; i++) {
        const d = i + 1;
        const [tint, dots, amt] = janGrid[i] || ['','',''];
        const tintClass  = tint ? 'tint-' + tint : '';
        const isPayday   = tint === 'p';
        let dotHtml = '';
        if (dots) [...dots].filter(c => janDotColors[c]).forEach(c => {
            dotHtml += `<div class="cal-dot" style="background:${janDotColors[c]}"></div>`;
        });
        html += `<div class="cal-day ${tintClass}" onclick="calSelectDay(${d})">
            <div class="cal-date-num">${d}</div>
            ${isPayday ? '<div class="cal-payday-tag">Pay</div>' : ''}
            ${amt || isPayday ? `<div class="cal-amount${isPayday?' income':''}">${isPayday?'+$3,166':amt}</div>` : ''}
            ${dotHtml ? `<div class="cal-dots">${dotHtml}</div>` : ''}
        </div>`;
    }
    setTimeout(() => {
        grid.innerHTML = html;
        grid.style.opacity = '1';
    }, 180);
}

function restoreFebGrid() {
    const grid = document.getElementById('cal-grid');
    grid.style.opacity = '0';
    setTimeout(() => {
        grid.innerHTML = window._febGridHTML;
        grid.style.opacity = '1';
    }, 180);
}

/* ════════════════════════════════════════════════
   INSIGHTS SCREEN — TABS
════════════════════════════════════════════════ */
function switchInsTab(tab) {
    document.querySelectorAll('#screen-insights .subtab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('#screen-insights .tab-pane').forEach(p => p.classList.remove('active'));
    document.getElementById('ins-tab-' + tab).classList.add('active');
    document.getElementById('ins-pane-' + tab).classList.add('active');
}

/* ════════════════════════════════════════════════
   ACCOUNTS SCREEN
════════════════════════════════════════════════ */
let acctReviewCount = 24;
const acctTotalGoal = 30;
let acctPendingTxn  = null;

function switchAcctTab(tab) {
    document.querySelectorAll('#screen-accounts .subtab').forEach(t => t.classList.remove('active'));
    document.querySelectorAll('#screen-accounts .tab-pane').forEach(p => p.classList.remove('active'));
    document.getElementById('acct-tab-' + tab).classList.add('active');
    document.getElementById('acct-pane-' + tab).classList.add('active');
    updateAcctHeader(tab);
}

function updateAcctHeader(tab) {
    const action = document.getElementById('acct-header-action');
    if (tab === 'accounts') { action.textContent = 'Sync ↺'; action.onclick = null; }
    if (tab === 'review')   { action.textContent = acctReviewCount + '/' + acctTotalGoal; action.onclick = null; }
    if (tab === 'rules')    { action.textContent = '+ Add Rule'; action.onclick = null; }
}

function approveTransaction(txnId) {
    const el = document.getElementById(txnId);
    if (!el) return;
    el.classList.add('removing');
    setTimeout(() => {
        el.remove();
        acctReviewCount++;
        // Update progress bar and count
        const pct = Math.round((acctReviewCount / acctTotalGoal) * 100);
        const bar = document.getElementById('acct-milestone-bar');
        const cnt = document.getElementById('acct-milestone-count');
        const sub = document.getElementById('acct-milestone-sub');
        if (bar) bar.style.width = Math.min(pct, 100) + '%';
        if (cnt) cnt.textContent = acctReviewCount + ' / ' + acctTotalGoal;
        if (sub) {
            const remaining = acctTotalGoal - acctReviewCount;
            if (remaining <= 0) {
                cnt.style.color = 'var(--green)';
                sub.textContent = '🎉 AI is now active! Insights and goal suggestions unlocked.';
                if (bar) { bar.style.background = 'var(--green)'; }
            } else {
                sub.textContent = 'Review ' + remaining + ' more transaction' + (remaining !== 1 ? 's' : '') + ' to unlock AI insights & goal suggestions';
            }
        }
        // Update header counter
        const headerAction = document.getElementById('acct-header-action');
        if (headerAction && headerAction.textContent.includes('/')) {
            headerAction.textContent = acctReviewCount + '/' + acctTotalGoal;
        }
        // Show empty state if list is empty
        const list = document.getElementById('acct-review-list');
        const emptyState = document.getElementById('acct-empty-state');
        if (list && list.children.length === 0) {
            list.style.display = 'none';
            if (emptyState) emptyState.classList.add('visible');
        }
    }, 320);
}

function openCatSheet(txnId, merchantName) {
    acctPendingTxn = txnId;
    const label = document.getElementById('acct-cat-merchant');
    if (label) label.textContent = merchantName;
    document.getElementById('acct-cat-backdrop').classList.add('open');
    document.getElementById('acct-cat-sheet').classList.add('open');
}

function closeCatSheet() {
    acctPendingTxn = null;
    const bd = document.getElementById('acct-cat-backdrop');
    const sh = document.getElementById('acct-cat-sheet');
    if (bd) bd.classList.remove('open');
    if (sh) sh.classList.remove('open');
}

function pickCategory(catName, icon) {
    const pending = acctPendingTxn;
    closeCatSheet();
    if (pending) approveTransaction(pending);
}

const acctDetailData = {
    'ANZ Everyday': {
        balance: '$1,847', balanceColor: 'var(--text)',
        sub: 'Cheque account · BSB 012-345 · Acc 987654',
        transactions: [
            { icon: '⛽', name: 'Shell Coles Express',  date: 'Feb 19', amount: '−$68.40', color: 'var(--red)'  },
            { icon: '☕', name: 'Seven Seeds Coffee',    date: 'Feb 18', amount: '−$9.50',  color: 'var(--red)'  },
            { icon: '🍜', name: 'Grill\'d Burgers',     date: 'Feb 17', amount: '−$22.90', color: 'var(--red)'  },
            { icon: '💰', name: 'Salary — Acme Corp',   date: 'Feb 8',  amount: '+$3,240', color: 'var(--green)' },
            { icon: '🛒', name: 'Woolworths Metro',      date: 'Feb 7',  amount: '−$43.15', color: 'var(--red)'  },
        ]
    },
    'ANZ NetSaver': {
        balance: '$12,450', balanceColor: 'var(--green)',
        sub: 'Savings account · 3.75% p.a. variable',
        transactions: [
            { icon: '💸', name: 'Transfer from Everyday', date: 'Feb 8',  amount: '+$500',   color: 'var(--green)' },
            { icon: '💸', name: 'Transfer from Everyday', date: 'Jan 8',  amount: '+$500',   color: 'var(--green)' },
            { icon: '💸', name: 'Transfer from Everyday', date: 'Dec 8',  amount: '+$500',   color: 'var(--green)' },
            { icon: '🏦', name: 'Interest earned',        date: 'Feb 1',  amount: '+$39.20', color: 'var(--green)' },
            { icon: '🏦', name: 'Interest earned',        date: 'Jan 1',  amount: '+$38.90', color: 'var(--green)' },
        ]
    },
    'ANZ Credit Visa': {
        balance: '−$843', balanceColor: 'var(--red)',
        sub: 'Credit card · $5,000 limit · Due Mar 5',
        transactions: [
            { icon: '🎬', name: 'Event Cinemas',          date: 'Feb 17', amount: '−$28.50', color: 'var(--red)' },
            { icon: '🏥', name: 'Priceline Pharmacy',     date: 'Feb 16', amount: '−$18.75', color: 'var(--red)' },
            { icon: '📺', name: 'Netflix',                 date: 'Feb 14', amount: '−$17.99', color: 'var(--red)' },
            { icon: '🎵', name: 'Spotify',                 date: 'Feb 13', amount: '−$11.99', color: 'var(--red)' },
            { icon: '🛒', name: 'Amazon AU',               date: 'Feb 12', amount: '−$54.90', color: 'var(--red)' },
        ]
    }
};

function openAcctDetail(acctName) {
    const data = acctDetailData[acctName];
    if (!data) return;
    let html = `
        <div style="padding-top:4px;margin-bottom:16px">
            <div style="font-size:22px;font-weight:800;letter-spacing:-0.5px;color:var(--text);margin-bottom:2px">${acctName}</div>
            <div style="font-size:32px;font-weight:800;color:${data.balanceColor};letter-spacing:-1.5px;margin-bottom:4px">${data.balance}</div>
            <div style="font-size:12px;color:var(--text2)">${data.sub}</div>
        </div>
        <div class="section-hd"><div class="section-title">Recent Transactions</div></div>
        <div class="list-card">`;
    data.transactions.forEach(tx => {
        html += `
            <div class="list-item">
                <div class="list-icon" style="background:rgba(255,255,255,0.06);font-size:15px">${tx.icon}</div>
                <div style="flex:1;min-width:0">
                    <div style="font-size:13px;font-weight:600;color:var(--text)">${tx.name}</div>
                    <div style="font-size:11px;color:var(--text3)">${tx.date}</div>
                </div>
                <div style="font-size:14px;font-weight:700;color:${tx.color};flex-shrink:0">${tx.amount}</div>
            </div>`;
    });
    html += `</div>`;
    document.getElementById('acct-acct-content').innerHTML = html;
    document.getElementById('acct-acct-backdrop').classList.add('open');
    document.getElementById('acct-acct-sheet').classList.add('open');
}

function closeAcctSheet() {
    const bd = document.getElementById('acct-acct-backdrop');
    const sh = document.getElementById('acct-acct-sheet');
    if (bd) bd.classList.remove('open');
    if (sh) sh.classList.remove('open');
}

/* ════════════════════════════════════════════════
   INIT
════════════════════════════════════════════════ */
// Show arrow controls by default (home screen)
document.getElementById('arrow-row').style.display     = 'flex';
document.getElementById('plan-controls').style.display = 'none';
// Cache February grid HTML for month-nav restore
window._febGridHTML = document.getElementById('cal-grid').innerHTML;
</script>
</body>
</html>
